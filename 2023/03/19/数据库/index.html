<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>数据库 | 飘渺之旅</title><meta name="author" content="c4rich"><meta name="copyright" content="c4rich"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1，数据库的相关概念1.1  数据   1，定义：描述事务的符号    2，表达形式：多种表现形式：文本，图形，音频，视频 1.2  数据库（Database, DB）1，粮库  车库 2，存放数据的仓库 存放在计算机中，按照一定格式存放  可为用户共享 1.3 数据库管理系统（Database Management System, DBMS）1，如何科学的组织和存储数据，如何高效的获取和维护数据">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库">
<meta property="og:url" content="https://c4rich.github.io/2023/03/19/%E6%95%B0%E6%8D%AE%E5%BA%93/index.html">
<meta property="og:site_name" content="飘渺之旅">
<meta property="og:description" content="1，数据库的相关概念1.1  数据   1，定义：描述事务的符号    2，表达形式：多种表现形式：文本，图形，音频，视频 1.2  数据库（Database, DB）1，粮库  车库 2，存放数据的仓库 存放在计算机中，按照一定格式存放  可为用户共享 1.3 数据库管理系统（Database Management System, DBMS）1，如何科学的组织和存储数据，如何高效的获取和维护数据">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.iqiq.io/qihuancode/images/dev/img/202303192049109.jpg">
<meta property="article:published_time" content="2023-03-19T15:12:40.000Z">
<meta property="article:modified_time" content="2023-03-28T15:05:39.251Z">
<meta property="article:author" content="c4rich">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Javase">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.iqiq.io/qihuancode/images/dev/img/202303192049109.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://c4rich.github.io/2023/03/19/%E6%95%B0%E6%8D%AE%E5%BA%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-28 23:05:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.iqiq.io/qihuancode/images/dev/img/202303192049109.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="飘渺之旅"><span class="site-name">飘渺之旅</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库<a class="post-edit-link" href="https://github.com/c4rich/c4rich.github.io/edit/master/./_posts/数据库.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-19T15:12:40.000Z" title="发表于 2023-03-19 23:12:40">2023-03-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-28T15:05:39.251Z" title="更新于 2023-03-28 23:05:39">2023-03-28</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">21.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>83分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1，数据库的相关概念"><a href="#1，数据库的相关概念" class="headerlink" title="1，数据库的相关概念"></a>1，数据库的相关概念</h1><h2 id="1-1-数据"><a href="#1-1-数据" class="headerlink" title="1.1  数据"></a>1.1  <strong>数据</strong></h2><p>   1，定义：描述事务的符号</p>
<p>   2，表达形式：多种表现形式：文本，<strong>图形，音频，视频</strong></p>
<h2 id="1-2-数据库（Database-DB）"><a href="#1-2-数据库（Database-DB）" class="headerlink" title="1.2  数据库（Database, DB）"></a>1.2  <strong>数据库（Database, DB）</strong></h2><p>1，粮库  车库</p>
<p>2，存放数据的仓库 存放在计算机中，按照一定格式存放  可为用户共享</p>
<h2 id="1-3-数据库管理系统（Database-Management-System-DBMS）"><a href="#1-3-数据库管理系统（Database-Management-System-DBMS）" class="headerlink" title="1.3 数据库管理系统（Database Management System, DBMS）"></a>1.3 <strong>数据库管理系统（Database Management System, DBMS）</strong></h2><p>1，如何科学的组织和存储数据，如何高效的获取和维护数据，靠数据库管理系统完成</p>
<p>2，Oracle  MySQL SQL Server  DB2 FoxPro，Access  sqlite</p>
<h2 id="1-4-数据库应用程序（DBAS）"><a href="#1-4-数据库应用程序（DBAS）" class="headerlink" title="1.4 数据库应用程序（DBAS）"></a>1.4 <strong>数据库应用程序（DBAS）</strong></h2><p>1，在数据库管理系统基础上，使用数据库管理系统的语法，开发的直接面对<strong>最终用户</strong>的应用程序</p>
<p>2，学生管理系统、人事管理系统、图书管理系统</p>
<h2 id="1-5-数据库管理员（Database-Administrator-DBA）"><a href="#1-5-数据库管理员（Database-Administrator-DBA）" class="headerlink" title="1.5 数据库管理员（Database Administrator, DBA）"></a>1.5 <strong>数据库管理员（Database Administrator, DBA）</strong></h2><p>  1，数据库管理系统的操作者</p>
<h2 id="1-6-最终用户"><a href="#1-6-最终用户" class="headerlink" title="1.6 最终用户"></a>1.6 <strong>最终用户</strong></h2><p>  1，数据库应用程序的使用者</p>
<h2 id="1-7-数据库系统"><a href="#1-7-数据库系统" class="headerlink" title="1.7 数据库系统"></a>1.7 <strong>数据库系统</strong></h2><p>  1，数据库+数据库管理系统+数据库应用程序+最终用户</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282220567.png" alt="img"></p>
<h2 id="1-8-数据库的发展阶段"><a href="#1-8-数据库的发展阶段" class="headerlink" title="1.8 数据库的发展阶段"></a>1.8 <strong>数据库的发展阶段</strong></h2><p>   1，网状数据库</p>
<p>   2，层次数据库【tree】</p>
<p>   3，关系数据库</p>
<p> 采用关系[二维表]结构存储与管理数据</p>
<p> 采用结构化查询语言(sql)作为客户端数据库服务器间沟通的桥梁</p>
<p> 目前主流的数据库技术</p>
<p>  <img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282220069.jpg" alt="img"></p>
<p> 4，对象数据库</p>
<h2 id="1-9-NOSQL数据库"><a href="#1-9-NOSQL数据库" class="headerlink" title="1.9 NOSQL数据库"></a>1.9 <strong>NOSQL数据库</strong></h2><p>   1，Not only sql数据库 泛指非关系数据库。如MongoDB,Redis</p>
<p>   2，关系数据库在超大规模和高并发的web2.0纯属动态网站已经显示力不从心，暴露了很多难以克服的问题。Nosql数据库的产生就是为了解决大无框数据集合多重数据种类带来的挑战，尤其是大数据应用难题</p>
<h2 id="1-10-市场上流行的关系型数据库"><a href="#1-10-市场上流行的关系型数据库" class="headerlink" title="1.10 市场上流行的关系型数据库"></a>1.10 <strong>市场上流行的关系型数据库</strong></h2><table>
<thead>
<tr>
<th>数据库</th>
<th>厂商</th>
</tr>
</thead>
<tbody><tr>
<td>Oracle</td>
<td>甲骨文公司</td>
</tr>
<tr>
<td>MySQL</td>
<td>MySQL甲骨文</td>
</tr>
<tr>
<td>SQLServer</td>
<td>Microsoft</td>
</tr>
<tr>
<td>DB2</td>
<td>IBM</td>
</tr>
<tr>
<td>Sqlite</td>
<td>RichardHipp</td>
</tr>
</tbody></table>
<h1 id="2-，数据库的相关操作"><a href="#2-，数据库的相关操作" class="headerlink" title="2 ，数据库的相关操作"></a>2 ，数据库的相关操作</h1><h2 id="2-1-启动-停止"><a href="#2-1-启动-停止" class="headerlink" title="2.1 启动|停止"></a>2.1 <strong>启动|停止</strong></h2><h3 id="【方式1】"><a href="#【方式1】" class="headerlink" title="【方式1】"></a>【方式1】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd-- net start|stop mysql</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282220385.png" alt="1637283771326"></p>
<p>以上的错的原因是因为没有管理员权限</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282220847.png" alt="1637283832813"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282220295.png" alt="1637283931230"></p>
<h3 id="【方式2】"><a href="#【方式2】" class="headerlink" title="【方式2】"></a>【方式2】</h3><p>win+R   – control–打开控制面板</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282219816.png" alt="1637283978552"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282219484.png" alt="1637283989190"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282219210.png" alt="1637284016441"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282218793.png" alt="1637284100787"></p>
<h2 id="2-2-使用root账户登陆"><a href="#2-2-使用root账户登陆" class="headerlink" title="2.2 使用root账户登陆"></a>2.2 <strong>使用root账户登陆</strong></h2><p>mysql -uroot -p123456</p>
<p>root是默认的用户名—超级管理员</p>
<p>123456是之前我们安装的时候设置的默认密码</p>
<h2 id="2-3-显示所有数据库"><a href="#2-3-显示所有数据库" class="headerlink" title="2.3 显示所有数据库"></a>2.3 <strong>显示所有数据库</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282218789.png" alt="1637284204500"></p>
<h2 id="2-4-默认的几个数据库说明"><a href="#2-4-默认的几个数据库说明" class="headerlink" title="2.4 默认的几个数据库说明"></a>2.4 默认的几个数据库说明</h2><h3 id="2-4-1-information-schema"><a href="#2-4-1-information-schema" class="headerlink" title="2.4.1 information_schema"></a>2.4.1 <strong>information_schema</strong></h3><p> information_schema数据库是MySQL自带的，它提供了访问数据库元数据的方式。什么是元数据呢？元数据是关于数据的数据，如数据库名或表名，列的数据类型，或访问权限等。有些时候用于表述该信息的其他术语包括“数据词典”和“系统目录”。</p>
<p>在MySQL中，把 information_schema 看作是一个数据库，确切说是信息数据库。其中保存着关于MySQL服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权 限等。在INFORMATION_SCHEMA中，有数个只读表。它们实际上是视图，而不是基本表，因此，你将无法看到与之相关的任何文件</p>
<h3 id="2-4-2-mysql"><a href="#2-4-2-mysql" class="headerlink" title="2.4.2 mysql"></a>2.4.2 <strong>mysql</strong></h3><p>这个是mysql的核心数据库，主要负责存储数据库的用户、权限设置、关键字等mysql自己需要使用的控制和管理信息。不可以删除，如果对mysql不是很了解，也不要轻易修改这个数据库里面的表信息。</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282218549.png" alt="1637284578700"></p>
<h3 id="2-4-3-performance-schema"><a href="#2-4-3-performance-schema" class="headerlink" title="2.4.3 performance_schema"></a>2.4.3 <strong>performance_schema</strong></h3><p>mysql 5.5 版本 新增了一个性能优化的引擎： PERFORMANCE_SCHEMA这个功能默认是关闭的：</p>
<p>需要设置参数： performance_schema  才可以启动该功能，这个参数是静态参数，只能写在</p>
<p>my.cnf 中 不能动态修改。</p>
<p>windows里面叫 my.ini文件    C:\ProgramData\MySQL\MySQL Server 5.7   【默认在这个目录】</p>
<p>linux里面叫my.cnf文件</p>
<h3 id="2-4-4-sys"><a href="#2-4-4-sys" class="headerlink" title="2.4.4 sys"></a>2.4.4 <strong>sys</strong></h3><p>通过这个库可以快速的了解系统的元数据信息</p>
<p>这个库确实可以方便DBA发现数据库的很多信息，解决性能瓶颈都提供了巨大帮助</p>
<h3 id="2-4-5-重要说明"><a href="#2-4-5-重要说明" class="headerlink" title="2.4.5 重要说明"></a>2.4.5 <strong>重要说明</strong></h3><p>以上的4个默认库。都不要删除，只有自己创建的库可以删除</p>
<h2 id="2-5-使用某一个数据库"><a href="#2-5-使用某一个数据库" class="headerlink" title="2.5 使用某一个数据库"></a>2.5 <strong>使用某一个数据库</strong></h2><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282218973.png" alt="1637284769121"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 语法</span><br><span class="line">-- use  &lt;数据库名称&gt;;</span><br><span class="line">-- 例如：使用mysql数据库</span><br><span class="line">use mysql;</span><br></pre></td></tr></table></figure>

<h2 id="2-6-修改密码"><a href="#2-6-修改密码" class="headerlink" title="2.6 修改密码"></a>2.6 <strong>修改密码</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 1使用mysql数据库</span><br><span class="line">use mysql;</span><br><span class="line">-- 2修改密码命令(将root用户的密码修改为123456)</span><br><span class="line">update mysql.user set authentication_string=PASSWORD(&#x27;123456&#x27;) where user=&#x27;root;</span><br><span class="line">-- 3刷新</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h2 id="2-7-创建用户"><a href="#2-7-创建用户" class="headerlink" title="2.7 创建用户"></a>2.7 <strong>创建用户</strong></h2><h3 id="2-7-1-命令"><a href="#2-7-1-命令" class="headerlink" title="2.7.1 命令"></a>2.7.1 <strong>命令</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;username&#x27;@&#x27;host&#x27; IDENTIFIED BY &#x27;password&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="2-7-2-说明"><a href="#2-7-2-说明" class="headerlink" title="2.7.2 说明"></a>2.7.2 <strong>说明</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">username：你将创建的用户名</span><br><span class="line">host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%</span><br><span class="line">password：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器</span><br></pre></td></tr></table></figure>

<h3 id="2-7-3-例子"><a href="#2-7-3-例子" class="headerlink" title="2.7.3 例子"></a>2.7.3 <strong>例子</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;dog&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br><span class="line">CREATE USER &#x27;pig&#x27;@&#x27;192.168.1.101&#x27; IDENDIFIED BY &#x27;123456&#x27;;</span><br><span class="line">CREATE USER &#x27;pig&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br><span class="line">CREATE USER &#x27;pig&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;&#x27;;</span><br><span class="line">CREATE USER &#x27;pig&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="2-8-给用户授权"><a href="#2-8-给用户授权" class="headerlink" title="2.8 给用户授权"></a>2.8 <strong>给用户授权</strong></h2><h3 id="2-8-1-命令"><a href="#2-8-1-命令" class="headerlink" title="2.8.1 命令"></a>2.8.1 <strong>命令</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT privileges ON databasename.tablename TO &#x27;username&#x27;@&#x27;host&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="2-8-2-说明"><a href="#2-8-2-说明" class="headerlink" title="2.8.2 说明"></a>2.8.2 <strong>说明</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">privileges：用户的操作权限，如SELECT，INSERT，UPDATE等，如果要授予所的权限则使用ALL</span><br><span class="line">databasename：数据库名</span><br><span class="line">tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用*表示，如*.*</span><br></pre></td></tr></table></figure>

<h3 id="2-8-3-例子"><a href="#2-8-3-例子" class="headerlink" title="2.8.3 例子"></a>2.8.3 <strong>例子</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GRANT SELECT ON wh2105.user TO &#x27;dog&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">		|--给host=localhost这个用户对wh2105数据库的user表的查询权限</span><br><span class="line">GRANT ALL ON *.* TO &#x27;dog&#x27;@&#x27;%&#x27;; </span><br><span class="line">		|--给host=%的dog用户  对所有数据库的所有表表的所有权限</span><br><span class="line">GRANT ALL ON wh2105.* TO &#x27;dog&#x27;@&#x27;%&#x27;;</span><br><span class="line">		|--给host=%的dog用户  对wh2105数据库的所有表的所有权限</span><br></pre></td></tr></table></figure>

<h3 id="2-8-4-注意"><a href="#2-8-4-注意" class="headerlink" title="2.8.4 注意"></a>2.8.4 <strong>注意</strong></h3><p>用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT privileges ON databasename.tablename TO &#x27;username&#x27;@&#x27;host&#x27; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<h3 id="2-8-5-作用"><a href="#2-8-5-作用" class="headerlink" title="2.8.5 作用"></a>2.8.5 <strong>作用</strong></h3><p>多公司协同开发的，如A公司需要B公司的数据，那么A公司可以创建一个用户给B公司，并且去设置相关权限</p>
<h2 id="2-9-创建一个数据库"><a href="#2-9-创建一个数据库" class="headerlink" title="2.9 创建一个数据库"></a>2.9 <strong>创建一个数据库</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-- 创建数据库有两种方式：</span><br><span class="line">-- 第一种 语法如下</span><br><span class="line">-- 注意：&lt;&gt;里面的内容都是可变的</span><br><span class="line">-- create database &lt;数据库名称&gt;;</span><br><span class="line">-- 例如</span><br><span class="line">create database whqihuan;</span><br><span class="line">-- 第二种 语法如下</span><br><span class="line">-- if not exists 创建之前会做check操作，如果数据库名称在MySQL数据库管理系统中不存在才创建</span><br><span class="line">-- charset default 为数据库指定默认编码</span><br><span class="line">-- create database if not exists &lt;数据库名称&gt;  default charset  &lt;数据库字符集编码&gt;;</span><br><span class="line">-- 例如：</span><br><span class="line">create database if not exists whqihuan default charset UTF8;</span><br><span class="line">create database if not exists whqihuan default charset UTF8MB4;</span><br><span class="line">-- UTF8和UTF8MB4区别？</span><br><span class="line">-- 绝大多数情况下使用UTF8编码的字符集一个汉字占据3个字符，但是有极少数情况下一个汉字占据4个字符</span><br><span class="line">-- 占据4个字符的汉字不能使用UTF8存储，必须使用UTF8MB4存储</span><br><span class="line">-- UTF8MB4字符集编码表示一个汉字最多占据4个字符  M Most  B Byte  可以存放微信的表情 </span><br><span class="line">-- 注意：创建数据库指定的字符集编码必须跟MySQL数据库里面的my.ini字符集编码保持一致</span><br></pre></td></tr></table></figure>



<h2 id="2-10-删除一个数据库"><a href="#2-10-删除一个数据库" class="headerlink" title="2.10 删除一个数据库"></a>2.10 <strong>删除一个数据库</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 第一种方式 语法：</span><br><span class="line">-- drop database &lt;数据库名称&gt;;</span><br><span class="line">-- 例如：</span><br><span class="line">drop database whqihuan;</span><br><span class="line">-- 第二种方式 语法：</span><br><span class="line">-- 删除之前先判断 存在才删除</span><br><span class="line">-- drop database if exists &lt;数据库名称&gt;;</span><br><span class="line">-- 例如：</span><br><span class="line">drop database if exists whqihuan;</span><br></pre></td></tr></table></figure>

<h2 id="2-11-修改数据库默认编码"><a href="#2-11-修改数据库默认编码" class="headerlink" title="2.11 修改数据库默认编码"></a>2.11 修改数据库默认编码</h2><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282218266.png" alt="1637286573409"></p>
<p>C:\ProgramData\MySQL\MySQL Server 5.7</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282218261.png" alt="1637286592935"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217488.png" alt="1637286653497"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217298.png" alt="1637286676484"></p>
<p>重启mysql</p>
<h1 id="3-什么是SQL"><a href="#3-什么是SQL" class="headerlink" title="3. 什么是SQL"></a>3. <strong>什么是SQL</strong></h1><p>SQL是一个面向过程的结构化查询语言，全称Struct Query Language 。我们对MySQL做的任何操作(命令)都建立在结构化查询语言中。</p>
<p>SQL由以下四部分组成：DDL、DML、DQL、TCL ,DCL</p>
<h2 id="3-1DDL-数据定义语言"><a href="#3-1DDL-数据定义语言" class="headerlink" title="3.1DDL 数据定义语言"></a>3.1DDL 数据定义语言</h2><p>全称Data Definition Language，主要用于创建和删除结构。</p>
<p>Ø 1)创建结构相关操作：表、视图、索引、数据 </p>
<p>Ø 2)删除结构相关操作：表、视图、索引、数据</p>
<p>Ø 3)改变结构相关操作：表、视图、索引、数据</p>
<h2 id="3-2-DML-数据操纵语言"><a href="#3-2-DML-数据操纵语言" class="headerlink" title="3.2 DML 数据操纵语言"></a>3.2 DML 数据操纵语言</h2><p>DML对表和视图进行插入、删除、更新相关操作，全称Data Manipulation Language。</p>
<p>插入数据关键字：insert</p>
<p>删除数据关键字：delete</p>
<p>修改数据关键字：update</p>
<h2 id="3-3-DQL-数据查询语言"><a href="#3-3-DQL-数据查询语言" class="headerlink" title="3.3 DQL 数据查询语言"></a>3.3 <strong>DQL 数据查询语言</strong></h2><p> 对表和视图进行操作，全称： Data Query Language</p>
<h2 id="3-4-DQL关键字-select"><a href="#3-4-DQL关键字-select" class="headerlink" title="3.4 DQL关键字 select"></a>3.4 DQL关键字 select</h2><p>TCL全称Transaction Control Language，使用事务管理DML操作。</p>
<p>Ø  提交事务关键字 commit;</p>
<p>Ø  回滚事务关键字 rollback;</p>
<p>Ø  开启事务关键字 start transaction;</p>
<h2 id="3-5-DCL-数据控制语言"><a href="#3-5-DCL-数据控制语言" class="headerlink" title="3.5 DCL 数据控制语言"></a>3.5 DCL 数据控制语言</h2><p>Data Control Language<br>主控制权限</p>
<h1 id="4-MySQL数据类型"><a href="#4-MySQL数据类型" class="headerlink" title="4. MySQL数据类型"></a>4. <strong>MySQL数据类型</strong></h1><h2 id="4-1-整数类型—java-Integer-Long"><a href="#4-1-整数类型—java-Integer-Long" class="headerlink" title="4.1 整数类型—java[Integer Long]"></a>4.1 <strong>整数类型</strong>—java[Integer Long]</h2><table>
<thead>
<tr>
<th><strong>数据类型</strong></th>
<th><strong>大小</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>tinyint</td>
<td>8bit</td>
<td>范围(-128~127)</td>
</tr>
<tr>
<td>smallint</td>
<td>16bit</td>
<td>范围(-32768~32767)</td>
</tr>
<tr>
<td>mediumint</td>
<td>24bit</td>
<td>范围(-8388608~8388607)</td>
</tr>
<tr>
<td><strong>int</strong></td>
<td><strong>32bit</strong></td>
<td><strong>范围(-2147483648~2147483647)</strong></td>
</tr>
<tr>
<td><strong>bigint</strong></td>
<td><strong>64bit</strong></td>
<td><strong>范围(+-9.22*10的18次方)</strong></td>
</tr>
</tbody></table>
<h2 id="4-2-小数类型—java-float-double"><a href="#4-2-小数类型—java-float-double" class="headerlink" title="4.2 小数类型—java[float  double]"></a>4.2 <strong>小数类型</strong>—java[float  double]</h2><table>
<thead>
<tr>
<th>float(m,d)</th>
<th>32bit</th>
<th>单精度浮点型，m总个数，d小数位</th>
</tr>
</thead>
<tbody><tr>
<td>double(m,d)</td>
<td>64bit</td>
<td>双精度浮点型，m总个数，d小数位</td>
</tr>
</tbody></table>
<h2 id="4-3-定点数—-java-BigDecimal"><a href="#4-3-定点数—-java-BigDecimal" class="headerlink" title="4.3 定点数—-java[BigDecimal]"></a>4.3 <strong>定点数</strong>—-java[BigDecimal]</h2><p>浮点型在数据库中存放的是近似值，而定点类型在数据库中存放的是精确值。 decimal(m,d) 参数m是总个数，d是小数位。</p>
<h2 id="4-4-字符串-—java-String"><a href="#4-4-字符串-—java-String" class="headerlink" title="4.4 字符串 —java[String]"></a>4.4 <strong>字符串</strong> —java[String]</h2><table>
<thead>
<tr>
<th><strong>MySQL数据类型</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>char(n)</strong></td>
<td>固定长度，最多255个字符，<strong>索引效率级高</strong>，必须在括号里定义长度，可以有默认值</td>
</tr>
<tr>
<td><strong>varchar(n)</strong></td>
<td><strong>可变长度，最多65535个字符</strong></td>
</tr>
<tr>
<td>tinytext</td>
<td>可变长度，最多255个字符</td>
</tr>
<tr>
<td><strong>text</strong></td>
<td><strong>可变长度，最多65535个字符</strong></td>
</tr>
<tr>
<td>mediumtext</td>
<td>可变长度，最多2的24次方-1个字符</td>
</tr>
<tr>
<td>longtext</td>
<td>可变长度，最多2的32次方-1个字符</td>
</tr>
<tr>
<td><strong>json</strong></td>
<td><strong>mysql5.7新增加的数据类型，用来存放json数据</strong></td>
</tr>
</tbody></table>
<p><strong>char：</strong>存储定长数据很方便，CHAR字段上的索引效率级高，必须在括号里定义长度，可以有默认值，比如定义char(10)，那么不<strong>论你存储的数据是否达到了10个字节，都要占去10个字节的空间</strong>（自动用空格填充），且在检索的时候后面的空格会隐藏掉，所以检索出来的数据需要记得用什么trim之类的函数去过滤空格。</p>
<p><strong>varchar</strong>：存储变长数据，但存储效率没有CHAR高，必须在括号里定义长度，可以有默认值。<strong>保存数据的时候，不进行空格自动填充，而且如果数据存在空格时，当值保存和检索时尾部的空格仍会保留。</strong>另外，varchar类型的实际长度是它的值的实际长度+1，这一个字节用于保存实际使用了多大的长度。</p>
<p><strong>text：</strong>存储可变长度的非Unicode数据，最大长度为2^31-1个字符。text列不能有默认值，存储或检索过程中，不存在大小写转换，后面如果指定长度，不会报错误，但是这个长度是不起作用的，意思就是你插入数据的时候，超过你指定的长度还是可以正常插入。text默认不走索引</p>
<p>1、经常变化的字段用varchar；</p>
<p>2、知道固定长度的用char；</p>
<p>3、超过255字节的只能用varchar或者text；</p>
<p>4、能用varchar的地方不用text；</p>
<p>5、能够用数字类型的字段尽量选择数字类型而不用字符串类型，这会降低查询和连接的性能，并会增加存储开销。这是因为引擎在处理查询和连接回逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了；</p>
<p>6、同一张表出现多个大字段，能合并时尽量合并，不能合并时考虑分表</p>
<h2 id="4-5-日期时间类型-java-Date-LocalDate-Timestemp"><a href="#4-5-日期时间类型-java-Date-LocalDate-Timestemp" class="headerlink" title="4.5 日期时间类型[java Date LocalDate Timestemp]"></a>4.5 <strong>日期时间类型</strong>[java Date LocalDate Timestemp]</h2><table>
<thead>
<tr>
<th>date</th>
<th>日期 ‘2021-1-1’</th>
</tr>
</thead>
<tbody><tr>
<td>time</td>
<td>时间 ‘12:25:36’</td>
</tr>
<tr>
<td>datetime</td>
<td>日期时间 ‘2021-1-1 22:06:44’</td>
</tr>
<tr>
<td>timestamp</td>
<td>自动存储记录修改时间[如果修改表的数据，这个字段自动更新]</td>
</tr>
</tbody></table>
<h2 id="4-6-Logic类型【了解】"><a href="#4-6-Logic类型【了解】" class="headerlink" title="4.6 Logic类型【了解】"></a>4.6 Logic类型【了解】</h2><p>Logic类型使用bit表示，它只能存储两个值0或者1</p>
<h2 id="4-7-数据类型的属性"><a href="#4-7-数据类型的属性" class="headerlink" title="4.7 数据类型的属性"></a>4.7 <strong>数据类型的属性</strong></h2><table>
<thead>
<tr>
<th>MySQL关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>NULL</td>
<td>数据列可包含NULL值</td>
</tr>
<tr>
<td>NOT NULL</td>
<td>数据列不允许包含NULL值</td>
</tr>
<tr>
<td>DEFAULT</td>
<td>默认值</td>
</tr>
<tr>
<td>PRIMARY KEY</td>
<td>主键</td>
</tr>
<tr>
<td>AUTO_INCREMENT</td>
<td>自动递增，适用于整数类型</td>
</tr>
<tr>
<td>CHARACTER SET name</td>
<td>指定一个字符集</td>
</tr>
</tbody></table>
<h1 id="5-MySQL表的相关操作DDL"><a href="#5-MySQL表的相关操作DDL" class="headerlink" title="5.MySQL表的相关操作DDL"></a>5.MySQL表的相关操作DDL</h1><h2 id="5-1-创建表"><a href="#5-1-创建表" class="headerlink" title="5.1 创建表"></a>5.1 <strong>创建表</strong></h2><h3 id="5-1-1-语法"><a href="#5-1-1-语法" class="headerlink" title="5.1.1 语法"></a>5.1.1 语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table &lt;表名&gt;(</span><br><span class="line">   字段名  数据类型  属性,</span><br><span class="line">   字段名  数据类型  属性,</span><br><span class="line">   字段名  数据类型  属性,</span><br><span class="line">   字段名  数据类型  属性</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="5-1-2，实例创建一个学生表tb-student"><a href="#5-1-2，实例创建一个学生表tb-student" class="headerlink" title="5.1.2，实例创建一个学生表tb_student"></a>5.1.2，实例创建一个学生表tb_student</h3><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217098.png" alt="1637290484249"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tb_student(</span><br><span class="line">	 id int COMMENT &#x27;学生编号&#x27;,</span><br><span class="line">	 stu_name varchar(20) COMMENT &#x27;学生姓名&#x27;,</span><br><span class="line">	 stu_age int COMMENT &#x27;学生年龄&#x27;,</span><br><span class="line">	 stu_sex char(1) COMMENT &#x27;学生性别&#x27;,</span><br><span class="line">	 stu_hobby varchar(255) COMMENT &#x27;学生爱好&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217256.png" alt="1637290652759"></p>
<h3 id="5-1-3-创建一个学生表tb-student并指定编码和存储引擎"><a href="#5-1-3-创建一个学生表tb-student并指定编码和存储引擎" class="headerlink" title="5.1.3,创建一个学生表tb_student并指定编码和存储引擎"></a>5.1.3,创建一个学生表tb_student并指定编码和存储引擎</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tb_student(</span><br><span class="line">	 id int COMMENT &#x27;学生编号&#x27;,</span><br><span class="line">	 stu_name varchar(20) COMMENT &#x27;学生姓名&#x27;,</span><br><span class="line">	 stu_age int COMMENT &#x27;学生年龄&#x27;,</span><br><span class="line">	 stu_sex char(1) COMMENT &#x27;学生性别&#x27;,</span><br><span class="line">	 stu_hobby varchar(255) COMMENT &#x27;学生爱好&#x27;</span><br><span class="line">) DEFAULT CHARSET=UTF8MB4,ENGINE INNODB;</span><br></pre></td></tr></table></figure>

<h2 id="5-2-数据存储的问题"><a href="#5-2-数据存储的问题" class="headerlink" title="5.2 数据存储的问题"></a>5.2 <strong>数据存储的问题</strong></h2><p>以上的表创建成功之后，如果电脑关掉，那么内存的数据会清空，但是我们发现表还存在，那么说表的结构是存储在硬盘里面的，【那么存的哪的呢】</p>
<p>现在我们在数据库中创建了一个表，那么如我们把电脑重启，这个表还在不在呢？</p>
<p>测试结果为   在   那是为什么呢？</p>
<p>原因是当我们创建表个表之后，在我们数据库的文件系统里面就会有一个对应的文件存在</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217822.jpg" alt="img"> </p>
<p><strong>.frm文件：保存了每个表的元数据，包括表结构的定义等；</strong></p>
<p><strong>.ibd文件：InnoDB引擎开启了独立表空间(my.ini中配置innodb_file_per_table &#x3D; 1)产生的存放该表的数据和索引的文件。</strong></p>
<h2 id="5-3-查看表结构"><a href="#5-3-查看表结构" class="headerlink" title="5.3 查看表结构"></a>5.3 <strong>查看表结构</strong></h2><p>创建表之后如何查看是否创建成功？可以通过desc命令来查看表结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 第一种方式查看表结构</span><br><span class="line">-- desc &lt;表名称&gt;;</span><br><span class="line">desc student;</span><br><span class="line">-- 第二种方式查看表结构</span><br><span class="line">-- show create table &lt;表名称&gt;;</span><br><span class="line">show create table tb_student;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217710.png" alt="1637291175934"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217162.png" alt="1637291214301"></p>
<h2 id="5-4-修改表结构"><a href="#5-4-修改表结构" class="headerlink" title="5.4 修改表结构"></a>5.4 <strong>修改表结构</strong></h2><p>基本语法如下：alter table &lt;表名称&gt;;</p>
<h3 id="5-4-1-向student表新增加一列stu-height学生身高"><a href="#5-4-1-向student表新增加一列stu-height学生身高" class="headerlink" title="5.4.1,向student表新增加一列stu_height学生身高"></a>5.4.1,向student表新增加一列stu_height学生身高</h3><p>[语法]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 语法如下：</span><br><span class="line">-- alter table &lt;表名称&gt; add column &lt;列名称&gt;  &lt;数据类型&gt;;</span><br><span class="line">alter table student add column stu_height int(11);</span><br><span class="line">-- 查看表结构</span><br><span class="line">desc student;</span><br></pre></td></tr></table></figure>

<h3 id="5-4-1-删除student表中的学生身高"><a href="#5-4-1-删除student表中的学生身高" class="headerlink" title="5.4.1,删除student表中的学生身高"></a>5.4.1,删除student表中的学生身高</h3><p>[语法]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 语法如下：</span><br><span class="line">-- alter table &lt;表名称&gt; drop column &lt;列名称&gt;;</span><br><span class="line">alter table student drop column stu_height;</span><br></pre></td></tr></table></figure>

<h3 id="5-4-1-例如修改stu-sex-为-student-sex-数据类型修改为-varchar-30"><a href="#5-4-1-例如修改stu-sex-为-student-sex-数据类型修改为-varchar-30" class="headerlink" title="5.4.1,例如修改stu_sex 为 student_sex 数据类型修改为 varchar(30)"></a><strong>5.4.1,例如修改stu_sex 为 student_sex 数据类型修改为 varchar(30)</strong></h3><p>【语法】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法如下：</span></span><br><span class="line"><span class="comment">-- alter table &lt;表名称&gt; change column &lt;原列名称&gt; &lt;新列名称&gt; &lt;数据类型&gt;;</span></span><br><span class="line"><span class="comment">-- 修改stu_sex 为 student_sex 数据类型修改为 varchar(30)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student change <span class="keyword">column</span> stu_sex student_sex <span class="type">varchar</span>(<span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<h3 id="5-4-1-将学生性别修改为int类型"><a href="#5-4-1-将学生性别修改为int类型" class="headerlink" title="5.4.1,将学生性别修改为int类型"></a>5.4.1,将学生性别修改为int类型</h3><p>【语法】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法如下：</span></span><br><span class="line"><span class="comment">-- alter table  &lt;表名称&gt; modify column &lt;原来的列名称&gt;  &lt;新的数据类型&gt;;</span></span><br><span class="line"><span class="comment">-- 例如：</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student modify <span class="keyword">column</span> student_age <span class="type">int</span>(<span class="number">11</span>);</span><br></pre></td></tr></table></figure>

<h2 id="5-5-删除表"><a href="#5-5-删除表" class="headerlink" title="5.5 删除表"></a>5.5 <strong>删除表</strong></h2><h3 id="1-1-1-直接删除"><a href="#1-1-1-直接删除" class="headerlink" title="1.1.1 直接删除"></a>1.1.1 <strong>直接删除</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- drop table &lt;表名称&gt;;</span><br><span class="line">drop table EMP_bak;</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-删除之前先判断表是否存在"><a href="#1-1-2-删除之前先判断表是否存在" class="headerlink" title="1.1.2 删除之前先判断表是否存在"></a>1.1.2 <strong>删除之前先判断表是否存在</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- drop table if exists &lt;表名称&gt;;  </span><br><span class="line">-- 刪除之前先做校验，表在数据库中存在才删除</span><br><span class="line">drop table if exists EMP_bak;</span><br></pre></td></tr></table></figure>

<h2 id="5-6-显示当前库的所有表"><a href="#5-6-显示当前库的所有表" class="headerlink" title="5.6 显示当前库的所有表"></a>5.6 <strong>显示当前库的所有表</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<h1 id="6，MySQL表里面数据的相关操作DML"><a href="#6，MySQL表里面数据的相关操作DML" class="headerlink" title="6，MySQL表里面数据的相关操作DML"></a>6，MySQL表里面数据的相关操作DML</h1><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282217328.png" alt="1637302180718"></p>
<h2 id="6-1，添加数据"><a href="#6-1，添加数据" class="headerlink" title="6.1，添加数据"></a>6.1，添加数据</h2><h3 id="6-1-1，一条一条的添加"><a href="#6-1-1，一条一条的添加" class="headerlink" title="6.1.1，一条一条的添加"></a>6.1.1，一条一条的添加</h3><p>【语法】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into &lt;表名&gt;(字段名1，字段名2，字段名N) values(值1，值2，值N);</span><br><span class="line">insert into &lt;表名&gt; values(表里面已存在的所有字段的值)</span><br></pre></td></tr></table></figure>

<p>【实例】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into tb_student(id,stu_name,stu_age,stu_sex,stu_hobby) values(1,&#x27;小明&#x27;,22,1,&quot;DOTA&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="6-1-2，一组一组的加"><a href="#6-1-2，一组一组的加" class="headerlink" title="6.1.2，一组一组的加"></a>6.1.2，一组一组的加</h3><p>【语法】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into tb_student(id,stu_name,stu_age,stu_sex,stu_hobby) </span><br><span class="line">		values(3,&#x27;小丽&#x27;,22,1,&quot;DOTA&quot;),(3,&#x27;小芳&#x27;,22,1,&quot;DOTA&quot;);</span><br></pre></td></tr></table></figure>

<h2 id="6-2，修改数据"><a href="#6-2，修改数据" class="headerlink" title="6.2，修改数据"></a>6.2，修改数据</h2><h3 id="6-2-1，一条一条的修改"><a href="#6-2-1，一条一条的修改" class="headerlink" title="6.2.1，一条一条的修改"></a>6.2.1，一条一条的修改</h3><p>【语法】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update &lt;表名&gt; set 字段名=修改后的值,字段名=修改后的值……………… where id=1;</span><br></pre></td></tr></table></figure>

<p>【实例】 把id&#x3D;1的学生名字变成张大明</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update tb_student set stu_name=&#x27;张大名&#x27; where id=1;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-2，一组一组的修改"><a href="#6-2-2，一组一组的修改" class="headerlink" title="6.2.2，一组一组的修改"></a>6.2.2，一组一组的修改</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 把表里面所有的名字变成张大名</span><br><span class="line">update tb_student set stu_name=&#x27;张大名&#x27;</span><br><span class="line">-- 把年龄大于20的学生爱好变成 LOL</span><br><span class="line">update tb_student set stu_hobby=&#x27;LOL&#x27; where stu_age&gt;20</span><br></pre></td></tr></table></figure>

<h2 id="6-3，删除数据"><a href="#6-3，删除数据" class="headerlink" title="6.3，删除数据"></a>6.3，删除数据</h2><h3 id="6-3-1，一条一条的修改"><a href="#6-3-1，一条一条的修改" class="headerlink" title="6.3.1，一条一条的修改"></a>6.3.1，一条一条的修改</h3><p>【语法】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from &lt;表名&gt;  where 条件</span><br></pre></td></tr></table></figure>

<p>【实例】删除ID&#x3D;1的学生</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from tb_student where id=1;</span><br></pre></td></tr></table></figure>



<h3 id="6-3-2，一组一组的修改"><a href="#6-3-2，一组一组的修改" class="headerlink" title="6.3.2，一组一组的修改"></a>6.3.2，一组一组的修改</h3><p>【实例】 删除所有学生信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from tb_student;</span><br></pre></td></tr></table></figure>

<p>【实例】 删除 年龄大于20的学生</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from tb_student where stu_age&gt;20;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-3，truncate关键字"><a href="#6-3-3，truncate关键字" class="headerlink" title="6.3.3，truncate关键字"></a>6.3.3，truncate关键字</h2><p>原理：删表再重建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">truncate是DDL，删除所有数据，不支持where，不能回滚</span><br><span class="line">delete是DML，可以删除部分数据，因为支持where，可以回滚</span><br><span class="line">总体上truncate效率比delete高，他们都只能删除数据不能删除表结构，只有drop才能删除表结构</span><br></pre></td></tr></table></figure>

<h1 id="7-数据完整性"><a href="#7-数据完整性" class="headerlink" title="7. 数据完整性"></a>7. <strong>数据完整性</strong></h1><p>为什么要学习数据完整性？我们上面创建的tb_student表缺乏安全性，还会有重复的id，这些都是脏数据。</p>
<p>什么是数据完整性？需要为MySQL数据库中的表定义一个规则，确保表中数据的有效性、一致性、安全性、尽最大的可能减少脏数据，重复的数据(冗余)。、</p>
<h2 id="7-1-主键约束"><a href="#7-1-主键约束" class="headerlink" title="7.1 主键约束"></a>7.1 <strong>主键约束</strong></h2><p>特点：非空并且唯一</p>
<h3 id="添加方法-创建表时添加"><a href="#添加方法-创建表时添加" class="headerlink" title="添加方法[创建表时添加]"></a>添加方法[创建表时添加]</h3><figure class="highlight sql"><figcaption><span>lite</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_student(</span><br><span class="line">	 id <span class="type">int</span>  <span class="keyword">primary</span> key  COMMENT <span class="string">&#x27;学生编号&#x27;</span>,</span><br><span class="line">	 stu_name <span class="type">varchar</span>(<span class="number">20</span>) COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">	 stu_age <span class="type">int</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">	 stu_sex <span class="type">char</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">	 stu_hobby <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;学生爱好&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_student(</span><br><span class="line">	 id <span class="type">int</span>   COMMENT <span class="string">&#x27;学生编号&#x27;</span>,</span><br><span class="line">	 stu_name <span class="type">varchar</span>(<span class="number">20</span>) COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">	 stu_age <span class="type">int</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">	 stu_sex <span class="type">char</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">	 stu_hobby <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;学生爱好&#x27;</span>,</span><br><span class="line">	 <span class="keyword">primary</span> key (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="主键的自动增长"><a href="#主键的自动增长" class="headerlink" title="主键的自动增长"></a>主键的自动增长</h3><p>【添加数据的时不用给主键设置值，会根据数据库里面的数据进行自动递增】</p>
<p>【设置方式】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_student(</span><br><span class="line">	 id <span class="type">int</span>  auto_increment  COMMENT <span class="string">&#x27;学生编号&#x27;</span>,</span><br><span class="line">	 stu_name <span class="type">varchar</span>(<span class="number">20</span>) COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">	 stu_age <span class="type">int</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">	 stu_sex <span class="type">char</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">	 stu_hobby <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;学生爱好&#x27;</span>,</span><br><span class="line">	 <span class="keyword">primary</span> key (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282216565.png" alt="1637305715514"></p>
<h2 id="7-2-非空约束"><a href="#7-2-非空约束" class="headerlink" title="7.2 非空约束"></a>7.2 非空<strong>约束</strong></h2><p>特点：不能为空</p>
<p>语法 属性名  类型  not null </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_student(</span><br><span class="line">	 id <span class="type">int</span>  auto_increment  COMMENT <span class="string">&#x27;学生编号&#x27;</span>,</span><br><span class="line">	 stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> COMMENT  <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">	 stu_age <span class="type">int</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">	 stu_sex <span class="type">char</span>(<span class="number">1</span>) COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">	 stu_hobby <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;学生爱好&#x27;</span>,</span><br><span class="line">	 <span class="keyword">primary</span> key (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="7-3-唯一约束"><a href="#7-3-唯一约束" class="headerlink" title="7.3 唯一约束"></a>7.3 唯一<strong>约束</strong></h2><p>特点：不能重复</p>
<p>语法  属性名 类型  UNIQUE</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tb_student(</span><br><span class="line">	 id int  auto_increment  COMMENT &#x27;学生编号&#x27;,</span><br><span class="line">	 stu_name varchar(20) UNIQUE COMMENT  &#x27;学生姓名&#x27;,</span><br><span class="line">	 stu_age int COMMENT &#x27;学生年龄&#x27;,</span><br><span class="line">	 stu_sex char(1) COMMENT &#x27;学生性别&#x27;,</span><br><span class="line">	 stu_hobby varchar(255) COMMENT &#x27;学生爱好&#x27;,</span><br><span class="line">	 primary key (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="7-4-默认约束"><a href="#7-4-默认约束" class="headerlink" title="7.4 默认约束"></a>7.4 默认<strong>约束</strong></h2><p>特点：当用户添加数据时，如果没有指定某一列的数据，那么就使用默认值</p>
<p>语法  字段名  类型   DEFAULT  默认值</p>
<p>【设置性别默认为‘1’】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tb_student(</span><br><span class="line">	 id int  auto_increment  COMMENT &#x27;学生编号&#x27;,</span><br><span class="line">	 stu_name varchar(20) UNIQUE COMMENT  &#x27;学生姓名&#x27;,</span><br><span class="line">	 stu_age int COMMENT &#x27;学生年龄&#x27;,</span><br><span class="line">	 stu_sex char(1) DEFAULT &#x27;1&#x27; COMMENT &#x27;学生性别&#x27;,</span><br><span class="line">	 stu_hobby varchar(255) COMMENT &#x27;学生爱好&#x27;,</span><br><span class="line">	 primary key (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="7-5-外键约束"><a href="#7-5-外键约束" class="headerlink" title="7.5 外键约束"></a>7.5 外键<strong>约束</strong></h2><p>以学生和班级为例</p>
<p>【创建班级表】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_cls(</span><br><span class="line">   clsId <span class="type">int</span> <span class="keyword">primary</span> key auto_increment  comment <span class="string">&#x27;班级编号&#x27;</span>,</span><br><span class="line">   clsName <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> comment <span class="string">&#x27;班级名称&#x27;</span>,</span><br><span class="line">   clsRemark <span class="type">varchar</span>(<span class="number">50</span>) comment <span class="string">&#x27;班级备注&#x27;</span></span><br><span class="line">)</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> tb_cls(clsId,clsName,clsRemark) <span class="keyword">values</span>(<span class="number">1</span>,&quot;JAVA一班&quot;,&quot;JAVA一班&quot;);</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">INTO</span> tb_cls(clsId,clsName,clsRemark) <span class="keyword">values</span>(<span class="number">2</span>,&quot;JAVA二班&quot;,&quot;JAVA二班&quot;);</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> tb_cls(clsId,clsName,clsRemark) <span class="keyword">values</span>(<span class="number">3</span>,&quot;JAVA三班&quot;,&quot;JAVA三班&quot;);</span><br></pre></td></tr></table></figure>

<p>【创建学生表】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_student(</span><br><span class="line">     stuId <span class="type">int</span>  <span class="keyword">primary</span> key auto_increment  COMMENT <span class="string">&#x27;学生编号&#x27;</span>,</span><br><span class="line">	 stuName <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> COMMENT  <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">	 stuAge <span class="type">int</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">	 stuSex <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">	 stuHobby <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;学生爱好&#x27;</span>,</span><br><span class="line">     clsId <span class="type">int</span>  comment <span class="string">&#x27;班级编号&#x27;</span>,</span><br><span class="line">      #添加外键</span><br><span class="line">	 <span class="keyword">FOREIGN</span> key(clsId) <span class="keyword">REFERENCES</span> tb_cls(clsId)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明1&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明2&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明3&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明4&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明5&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明6&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<h4 id="1-外键定义的语法"><a href="#1-外键定义的语法" class="headerlink" title="1. 外键定义的语法"></a>1. 外键定义的语法</h4><p>通常在create table和alter table语句中定义外键约束，基本语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[CONSTRAINT [symbol]] FOREIGN KEY</span><br><span class="line">    [index_name] (col_name, ...)</span><br><span class="line">    REFERENCES tbl_name (col_name,...)</span><br><span class="line">    [ON DELETE reference_option]</span><br><span class="line">    [ON UPDATE reference_option]</span><br><span class="line"></span><br><span class="line">reference_option:</span><br><span class="line">    RESTRICT | CASCADE | SET NULL | NO ACTION | SET DEFAULT</span><br></pre></td></tr></table></figure>

<p>CONSTRAINT symbol 为外键约束名称，如果没有定义，InnoDB表会自动生成一个名称，这个名称在数据库里面必须唯一。</p>
<p>ON DELETE、ON UPDATE表示事件触发时的动作，可设置值为：</p>
<ul>
<li>CASCADE，更新或者删除父表记录时，子表中的相应记录同步更新或者删除。由级联更新或者删除导致的子表记录修改，不会触发子表的触发器执行。</li>
<li>SET NULL，更新或者删除父表记录时，子表中的相应记录字段设置为NULL，前提是子表中相应字段不能定义为NOT NULL。</li>
<li>RESTRICT，有外键关系约束时，拒绝父表记录的更新和删除操作。</li>
<li>NO ACTION，无动作，实际功能与RESTRICT相同。</li>
<li>SET DEFAULT，仅仅解析器能识别，实际功能未实现。</li>
</ul>
<h4 id="2-级联更新和级联删除"><a href="#2-级联更新和级联删除" class="headerlink" title="2. 级联更新和级联删除"></a>2. 级联更新和级联删除</h4><p>当父表对外键关联的字段进行update、delete操作时，子表对应的字段值也会同步变化，称之为级联更新或者级联删除。当外键定义时，设置 referential action 为CASCADE即可实现级联更新与删除。</p>
<p><strong>示例：</strong><br>foreign key(parent_id) references parent(id) on update cascade</p>
<p>foreign key(parent_id) references parent(id) on delete cascade</p>
<p>foreign key(parent_id) references parent(id) on update cascade on delete cascade</p>
<h4 id="3-外键约束案例"><a href="#3-外键约束案例" class="headerlink" title="3. 外键约束案例"></a>3. 外键约束案例</h4><h5 id="3-1-外键约束字段值"><a href="#3-1-外键约束字段值" class="headerlink" title="3.1 外键约束字段值"></a>3.1 外键约束字段值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 创建父表</span><br><span class="line">create table parent(id int, primary key(id));</span><br><span class="line"></span><br><span class="line"># 创建子表</span><br><span class="line">create table child(id int, parent_id int, </span><br><span class="line">foreign key(parent_id) references parent(id), </span><br><span class="line">primary key(id));</span><br></pre></td></tr></table></figure>

<p>子表child会自动在parent_id字段上加上索引。往子表插入数据或者更新数据时，parent_id字段值必须为父表parent中已经存在的值，否则会报错。如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cannot add or update a child row: a foreign key </span><br><span class="line">constraint fails (`db`.`child`, CONSTRAINT `child_ibfk_1` </span><br><span class="line">FOREIGN KEY (`parent_id`) REFERENCES `parent` (`id`))</span><br></pre></td></tr></table></figure>

<p>删除父表中有外键约束的记录时，也会报错，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> Cannot delete or update a parent row: a foreign key </span><br><span class="line">constraint fails (`db`.`child`, CONSTRAINT `child_ibfk_1` </span><br><span class="line">FOREIGN KEY (`parent_id`) REFERENCES `parent` (`id`))</span><br></pre></td></tr></table></figure>

<h5 id="3-2-外键级联更新"><a href="#3-2-外键级联更新" class="headerlink" title="3.2 外键级联更新"></a>3.2 外键级联更新</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建父表</span><br><span class="line">create table parent(id int, primary key(id));</span><br><span class="line"></span><br><span class="line"># 创建子表</span><br><span class="line">create table child(id int, parent_id int, </span><br><span class="line">foreign key(parent_id) references parent(id) </span><br><span class="line">on update cascade, </span><br><span class="line">primary key(id));</span><br></pre></td></tr></table></figure>

<p>更新父表parent的id字段值，那么子表字段parent_id中相应的值也会同步更新。</p>
<h5 id="3-3-外键级联删除"><a href="#3-3-外键级联删除" class="headerlink" title="3.3 外键级联删除"></a>3.3 外键级联删除</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建父表</span><br><span class="line">create table parent(id int, primary key(id));</span><br><span class="line"></span><br><span class="line"># 创建子表</span><br><span class="line">create table child(id int, parent_id int, </span><br><span class="line">foreign key(parent_id) references parent(id) </span><br><span class="line">on delete cascade, </span><br><span class="line">primary key(id));</span><br></pre></td></tr></table></figure>

<p>删除父表parent的某个id字段值的记录，那么子表字段parent_id中相应值的记录也会同步删除。</p>
<h5 id="3-4-删除外键"><a href="#3-4-删除外键" class="headerlink" title="3.4 删除外键"></a>3.4 删除外键</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table child drop foreign key child_ibfk_1;</span><br></pre></td></tr></table></figure>

<h5 id="3-5-创建外键"><a href="#3-5-创建外键" class="headerlink" title="3.5 创建外键"></a>3.5 创建外键</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table child add foreign key(parent_id) references parent(id);</span><br></pre></td></tr></table></figure>

<h4 id="4-外键约束的条件和限制"><a href="#4-外键约束的条件和限制" class="headerlink" title="4. 外键约束的条件和限制"></a>4. 外键约束的条件和限制</h4><ol>
<li>父表和子表必须为同一种存储引擎，且不能定义为临时表。</li>
<li>创建外键约束需要有REFERENCES权限。</li>
<li>外键约束中使用的字段必须有相似的数据类型，整型的大小必须相同，有无符号也必须相同。字符串类型的长度可以不相同，但是字符集和校验规则必须相同。</li>
<li>外键约束的两个字段可以在同一个表中，但是不能是同一个字段。</li>
<li>外键约束的字段上必须要有索引，以便加快外键检查，如果引用表上的外键字段没有索引的话，MySQL会自动创建一个索引。</li>
<li>不支持外键字段上的前缀索引，blob和text字段不能用于外键。</li>
<li>InnoDB表外键约束不支持分区。</li>
<li>一个有外键约束的表不能修改其存储引擎。</li>
<li>外键约束不能引用虚拟字段。</li>
</ol>
<p>总结</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">外键就是一个主从关系 </span><br><span class="line">学生和班</span><br><span class="line">多个学生可以属性同一个班级</span><br><span class="line">一个班级里面可以有多个学生</span><br><span class="line">【学生角度关系】 多对一</span><br><span class="line">【班级角度关系】 一对多</span><br><span class="line"></span><br><span class="line">问题，如果班级的信息在学生表里面出现了，那么班级默认是不能删除的</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="7-6-约束关键字总结"><a href="#7-6-约束关键字总结" class="headerlink" title="7.6 约束关键字总结"></a>7.6 <strong>约束关键字总结</strong></h2><table>
<thead>
<tr>
<th>约束名称</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>主键约束</td>
<td>primary key   自增   auto_increment</td>
</tr>
<tr>
<td>非空约束</td>
<td>not null</td>
</tr>
<tr>
<td>唯一约束</td>
<td>unique</td>
</tr>
<tr>
<td>默认约束</td>
<td>default</td>
</tr>
<tr>
<td>外键约束</td>
<td>foreign key()…….references 父表(父表的字段)</td>
</tr>
</tbody></table>
<h1 id="8-表关系"><a href="#8-表关系" class="headerlink" title="8. 表关系"></a>8. 表关系</h1><h2 id="8-1-一对一（one-to-one）【了解】"><a href="#8-1-一对一（one-to-one）【了解】" class="headerlink" title="8.1 一对一（one-to-one）【了解】"></a>8.1 一对一（one-to-one）【了解】</h2><p>如果表里面的字段非常多，那么我们可以把表拆成1对1 的关系，但是如果不拆，放在一张里面也行，只是后期数据查询时可以能慢</p>
<h2 id="8-2-一对多-x2F-多对一（many-to-one）【掌握】"><a href="#8-2-一对多-x2F-多对一（many-to-one）【掌握】" class="headerlink" title="8.2 一对多&#x2F;多对一（many-to-one）【掌握】"></a>8.2 一对多&#x2F;多对一（many-to-one）【掌握】</h2><p>学生-班级</p>
<p>【创建班级表】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_cls(</span><br><span class="line">   clsId <span class="type">int</span> <span class="keyword">primary</span> key auto_increment  comment <span class="string">&#x27;班级编号&#x27;</span>,</span><br><span class="line">   clsName <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> comment <span class="string">&#x27;班级名称&#x27;</span>,</span><br><span class="line">   clsRemark <span class="type">varchar</span>(<span class="number">50</span>) comment <span class="string">&#x27;班级备注&#x27;</span></span><br><span class="line">)</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> tb_cls(clsId,clsName,clsRemark) <span class="keyword">values</span>(<span class="number">1</span>,&quot;JAVA一班&quot;,&quot;JAVA一班&quot;);</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">INTO</span> tb_cls(clsId,clsName,clsRemark) <span class="keyword">values</span>(<span class="number">2</span>,&quot;JAVA二班&quot;,&quot;JAVA二班&quot;);</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> tb_cls(clsId,clsName,clsRemark) <span class="keyword">values</span>(<span class="number">3</span>,&quot;JAVA三班&quot;,&quot;JAVA三班&quot;);</span><br></pre></td></tr></table></figure>

<p>【创建学生表】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_student(</span><br><span class="line">     stuId <span class="type">int</span>  <span class="keyword">primary</span> key auto_increment  COMMENT <span class="string">&#x27;学生编号&#x27;</span>,</span><br><span class="line">	 stuName <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> COMMENT  <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">	 stuAge <span class="type">int</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">	 stuSex <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">	 stuHobby <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;学生爱好&#x27;</span>,</span><br><span class="line">     clsId <span class="type">int</span>  comment <span class="string">&#x27;班级编号&#x27;</span>,</span><br><span class="line">      #添加外键</span><br><span class="line">	 <span class="keyword">FOREIGN</span> key(clsId) <span class="keyword">REFERENCES</span> tb_cls(clsId)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明1&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明2&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明3&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明4&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明5&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tb_student(stuName,stuAge,stuSex,stuHobby,clsId) <span class="keyword">values</span>(<span class="string">&#x27;小明6&#x27;</span>,<span class="number">22</span>,<span class="number">1</span>,&quot;DOTA&quot;,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>关于一对多和多对一的删除问题</p>
<p>默认情况，是如果对应的班级有学生，班级是不能删除</p>
<p>可以设置如果要删除的班级下面有学生，可以让学生也删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_student(</span><br><span class="line">   stuId <span class="type">int</span>  <span class="keyword">primary</span> key auto_increment  COMMENT <span class="string">&#x27;学生编号&#x27;</span>,</span><br><span class="line">	 stuName <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> COMMENT  <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">	 stuAge <span class="type">int</span> COMMENT <span class="string">&#x27;学生年龄&#x27;</span>,</span><br><span class="line">	 stuSex <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;学生性别&#x27;</span>,</span><br><span class="line">	 stuHobby <span class="type">varchar</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;学生爱好&#x27;</span>,</span><br><span class="line">   clsId <span class="type">int</span>  comment <span class="string">&#x27;班级编号&#x27;</span>,</span><br><span class="line">#添加外键</span><br><span class="line"><span class="keyword">FOREIGN</span> key(clsId) <span class="keyword">REFERENCES</span> tb_cls(clsId)  <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>可以设置如果要删除的班级下面有学生，让学生的班级编号设置为null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table tb_student(</span><br><span class="line">       stuId int  primary key auto_increment  COMMENT &#x27;学生编号&#x27;,</span><br><span class="line">    	 stuName varchar(20) UNIQUE COMMENT  &#x27;学生姓名&#x27;,</span><br><span class="line">    	 stuAge int COMMENT &#x27;学生年龄&#x27;,</span><br><span class="line">    	 stuSex char(1) DEFAULT &#x27;1&#x27; COMMENT &#x27;学生性别&#x27;,</span><br><span class="line">    	 stuHobby varchar(255) COMMENT &#x27;学生爱好&#x27;,</span><br><span class="line">       clsId int  comment &#x27;班级编号&#x27;,</span><br><span class="line">			 #添加外键</span><br><span class="line">			 FOREIGN key(clsId) REFERENCES tb_cls(clsId)  ON DELETE CASCADE</span><br><span class="line">			 	#|--如果一方被删除，那么多方法引用的数据也会被删除</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>【使用工具如何设置】</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282216130.png" alt="1637310079835"></p>
<h2 id="8-3-多对多（many-to-many）【掌握】"><a href="#8-3-多对多（many-to-many）【掌握】" class="headerlink" title="8.3 多对多（many-to-many）【掌握】"></a>8.3 多对多（many-to-many）【掌握】</h2><p>总结，多对多的关系必须建立中间表</p>
<p>中间表的里要使用联合主键+外键的规则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">			</span><br><span class="line">#一对多和多对一</span><br><span class="line">以学生和班级为例</span><br><span class="line"></span><br><span class="line">【创建班级表】</span><br><span class="line"></span><br><span class="line">    create table tb_cls(</span><br><span class="line">       clsId int primary key auto_increment  comment &#x27;班级编号&#x27;,</span><br><span class="line">       clsName varchar(20) UNIQUE comment &#x27;班级名称&#x27;,</span><br><span class="line">       clsRemark varchar(50) comment &#x27;班级备注&#x27;</span><br><span class="line">    )</span><br><span class="line">    insert into tb_cls(clsId,clsName,clsRemark) values(1,&quot;JAVA一班&quot;,&quot;JAVA一班&quot;);</span><br><span class="line">    insert INTO tb_cls(clsId,clsName,clsRemark) values(2,&quot;JAVA二班&quot;,&quot;JAVA二班&quot;);</span><br><span class="line">    insert into tb_cls(clsId,clsName,clsRemark) values(3,&quot;JAVA三班&quot;,&quot;JAVA三班&quot;);</span><br><span class="line"></span><br><span class="line">【创建学生表】</span><br><span class="line"></span><br><span class="line">    create table tb_student(</span><br><span class="line">stuId int  primary key auto_increment COMMENT &#x27;学生编号&#x27;,</span><br><span class="line">stuName varchar(20) UNIQUE COMMENT  &#x27;学生姓名&#x27;,</span><br><span class="line">stuAge int COMMENT &#x27;学生年龄&#x27;,</span><br><span class="line">stuSex char(1) DEFAULT &#x27;1&#x27; COMMENT &#x27;学生性别&#x27;,</span><br><span class="line">stuHobby varchar(255) COMMENT &#x27;学生爱好&#x27;,</span><br><span class="line">clsId int  comment &#x27;班级编号&#x27;</span><br><span class="line">#添加外键</span><br><span class="line">FOREIGN key(clsId) REFERENCES tb_cls(clsId)  ON DELETE RESTRICT </span><br><span class="line">    )</span><br><span class="line">    insert into tb_student(stuName,stuAge,stuSex,stuHobby,clsId) values(&#x27;小明&#x27;,22,1,&quot;DOTA&quot;,1);</span><br><span class="line">    insert into tb_student(stuName,stuAge,stuSex,stuHobby,clsId) values(&#x27;小荭&#x27;,22,1,&quot;DOTA&quot;,2);</span><br><span class="line">    insert into tb_student(stuName,stuAge,stuSex,stuHobby,clsId) values(&#x27;小丽&#x27;,22,1,&quot;DOTA&quot;,3);</span><br><span class="line">    insert into tb_student(stuName,stuAge,stuSex,stuHobby,clsId) values(&#x27;小芳&#x27;,22,1,&quot;DOTA&quot;,1);</span><br><span class="line">    insert into tb_student(stuName,stuAge,stuSex,stuHobby,clsId) values(&#x27;小花&#x27;,22,1,&quot;DOTA&quot;,2);</span><br><span class="line">    insert into tb_student(stuName,stuAge,stuSex,stuHobby,clsId) values(&#x27;小美&#x27;,22,1,&quot;DOTA&quot;,1);</span><br><span class="line"></span><br><span class="line">#现在是1-3号班级都有数据</span><br><span class="line"></span><br><span class="line"># 创建一个科目表</span><br><span class="line">create table tb_course(</span><br><span class="line">  course_id int(11) auto_increment COMMENT &#x27;课程编号&#x27;, </span><br><span class="line">  course_name varchar(30) not null comment &#x27;课程名称&#x27;,</span><br><span class="line">  primary key(course_id)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#创建一个学生和课程的关系表（一个学生可以选多个课 |一个课可以让多个学生选择）</span><br><span class="line">create table tb_student_course(</span><br><span class="line">	stuId int ,</span><br><span class="line">	course_id int ,</span><br><span class="line">    score int,</span><br><span class="line">	#联合主键的建立</span><br><span class="line">	primary key(stuId,course_id),</span><br><span class="line">	#建立stuId的外键</span><br><span class="line">	FOREIGN key(stuId) REFERENCES tb_student(stuId),</span><br><span class="line">	#建立course_id的外键</span><br><span class="line">	FOREIGN key(course_id) REFERENCES tb_course(course_id));</span><br><span class="line">#小明[1]选择了JAVA[1] 分数为100分</span><br><span class="line">insert into tb_student_course(stuId,course_id,score) values(1,1,100)</span><br><span class="line">#小明[1]选择了PHP[2] 分数为100分</span><br><span class="line">insert into tb_student_course(stuId,course_id,score) values(1,2,100)</span><br><span class="line"># 下面的数据添加不进去，原因是10号学生不存在，违反的外键规则 </span><br><span class="line">insert into tb_student_course(stuId,course_id,score) values(10,2,100)</span><br></pre></td></tr></table></figure>

<h2 id="8-4-员工系统设计"><a href="#8-4-员工系统设计" class="headerlink" title="8.4 员工系统设计"></a>8.4 员工系统设计</h2><h3 id="8-4-1-要求"><a href="#8-4-1-要求" class="headerlink" title="8.4.1 要求"></a>8.4.1 要求</h3><p>​	1，可以记录员工信息EMP</p>
<p>​	2，可以记录公司所有的部门信息DEPT</p>
<p>​	3，可以记录工资等级信息SALGRAGE</p>
<h3 id="8-4-2-部门表（dept）"><a href="#8-4-2-部门表（dept）" class="headerlink" title="8.4.2 部门表（dept）"></a>8.4.2 <strong>部门表（dept）</strong></h3><table>
<thead>
<tr>
<th><strong>№</strong></th>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>1</strong></td>
<td><strong>DEPTNO</strong></td>
<td><strong>INT</strong></td>
<td><strong>表示部门编号</strong></td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><strong>DNAME</strong></td>
<td><strong>VARCHAR(<strong><strong>20</strong></strong>)</strong></td>
<td><strong>部门名称，最多由<strong><strong>20</strong></strong>个字符所组成</strong></td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><strong>LOC</strong></td>
<td><strong>VARCHAR(<strong><strong>20</strong></strong>)</strong></td>
<td><strong>部门所在的位置</strong></td>
</tr>
</tbody></table>
<h3 id="8-4-3-员工表（emp）"><a href="#8-4-3-员工表（emp）" class="headerlink" title="8.4.3 员工表（emp）"></a>8.4.3 <strong>员工表（emp）</strong></h3><table>
<thead>
<tr>
<th><strong>№</strong></th>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>1</strong></td>
<td><strong>EMPNO</strong></td>
<td><strong>INT</strong></td>
<td><strong>雇员的编号</strong> <strong>主键</strong></td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><strong>ENAME</strong></td>
<td><strong>VARCHAR(10)</strong></td>
<td><strong>雇员的姓名</strong></td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><strong>MGR</strong></td>
<td><strong>INT</strong></td>
<td><strong>雇员对应的领导编号，领导也是雇员</strong></td>
</tr>
<tr>
<td><strong>5</strong></td>
<td><strong>HIREDATE</strong></td>
<td><strong>DATE</strong></td>
<td><strong>雇员的雇佣日期</strong></td>
</tr>
<tr>
<td><strong>6</strong></td>
<td><strong>JOB</strong></td>
<td><strong>VARCHAR(10)</strong></td>
<td><strong>职位</strong></td>
</tr>
<tr>
<td><strong>7</strong></td>
<td><strong>SAL</strong></td>
<td><strong>decimal</strong><strong>(7,2)</strong></td>
<td><strong>基本工资，其中有两位小数，五倍整数，一共是七位</strong></td>
</tr>
<tr>
<td><strong>8</strong></td>
<td><strong>COMM</strong></td>
<td><strong>decimal(7,2)</strong></td>
<td><strong>奖金，佣金</strong></td>
</tr>
<tr>
<td><strong>9</strong></td>
<td><strong>DEPTNO</strong></td>
<td><strong>INT</strong></td>
<td><strong>雇员所在的部门编号</strong></td>
</tr>
</tbody></table>
<h3 id="8-4-4-工资等级表（salgrade）"><a href="#8-4-4-工资等级表（salgrade）" class="headerlink" title="8.4.4 工资等级表（salgrade）"></a>8.4.4 <strong>工资等级表（salgrade）</strong></h3><table>
<thead>
<tr>
<th><strong>№</strong></th>
<th><strong>名称</strong></th>
<th><strong>类型</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>1</strong></td>
<td><strong>GRADE</strong></td>
<td><strong>INT</strong></td>
<td><strong>工资的等级</strong>  <strong>主键</strong></td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><strong>LOSAL</strong></td>
<td><strong>decimal(7,2)</strong></td>
<td><strong>此等级的最低工资</strong></td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><strong>HISAL</strong></td>
<td><strong>decimal(7,2)</strong></td>
<td><strong>此等级的最高工资</strong></td>
</tr>
</tbody></table>
<h3 id="8-4-5-脚本"><a href="#8-4-5-脚本" class="headerlink" title="8.4.5 脚本"></a>8.4.5 脚本</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> dept;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept  (</span><br><span class="line">  DEPTNO <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;部门编号&#x27;</span>,</span><br><span class="line">  DNAME <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;部门名称&#x27;</span>,</span><br><span class="line">  LOC <span class="type">varchar</span>(<span class="number">20</span>)  COMMENT <span class="string">&#x27;部门所在的位置&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (DEPTNO) </span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4  COMMENT <span class="operator">=</span> <span class="string">&#x27;部门表&#x27;</span>;</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> emp;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp  (</span><br><span class="line">  EMPNO <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;雇员的编号&#x27;</span>,</span><br><span class="line">  ENAME <span class="type">varchar</span>(<span class="number">50</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;雇员的姓名&#x27;</span>,</span><br><span class="line">JOB 	<span class="type">varchar</span>(<span class="number">50</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;职位&#x27;</span>,</span><br><span class="line">  MGR <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;雇员对应的领导编号&#x27;</span>,</span><br><span class="line">  HIREDATE <span class="type">date</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;雇员的雇佣日期&#x27;</span>,</span><br><span class="line">  SAL <span class="type">decimal</span>(<span class="number">7</span>, <span class="number">2</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;基本工资&#x27;</span>,</span><br><span class="line">  COMM <span class="type">decimal</span>(<span class="number">7</span>, <span class="number">2</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;奖金，佣金&#x27;</span>,</span><br><span class="line">  DEPTNO <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;雇员所在的部门编号&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (EMPNO),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> FK_EMP_DEPTNO <span class="keyword">FOREIGN</span> KEY (DEPTNO) <span class="keyword">REFERENCES</span> dept (DEPTNO) <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT <span class="keyword">ON</span> <span class="keyword">UPDATE</span> RESTRICT</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 COMMENT <span class="operator">=</span> <span class="string">&#x27;员工表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 工资等级表</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> salgrade;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salgrade  (</span><br><span class="line">  GRADE <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;工资的等级  主键&#x27;</span>,</span><br><span class="line">  LOSAL <span class="type">decimal</span>(<span class="number">7</span>, <span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;此等级的最低工资&#x27;</span>,</span><br><span class="line">  HISAL <span class="type">decimal</span>(<span class="number">7</span>, <span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;此等级的最高工资&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (GRADE)</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4  COMMENT <span class="operator">=</span> <span class="string">&#x27;工资等级表&#x27;</span> ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 部门表插入数据</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEPT <span class="keyword">VALUES</span> (<span class="number">10</span>, <span class="string">&#x27;财务部&#x27;</span>, <span class="string">&#x27;武汉&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEPT <span class="keyword">VALUES</span> (<span class="number">20</span>, <span class="string">&#x27;研发部&#x27;</span>, <span class="string">&#x27;武汉&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEPT <span class="keyword">VALUES</span> (<span class="number">30</span>, <span class="string">&#x27;销售部&#x27;</span>, <span class="string">&#x27;深圳&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEPT <span class="keyword">VALUES</span> (<span class="number">40</span>, <span class="string">&#x27;业务部&#x27;</span>, <span class="string">&#x27;上海&#x27;</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 员工表插入数据</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7369</span>, <span class="string">&#x27;SMITH&#x27;</span>, <span class="string">&#x27;CLERK&#x27;</span>, <span class="number">7902</span>, <span class="string">&#x27;1980-12-17&#x27;</span>, <span class="number">800.00</span>, <span class="keyword">null</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7499</span>, <span class="string">&#x27;ALLEN&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1981-02-20&#x27;</span>, <span class="number">1600.00</span>, <span class="number">300.00</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7521</span>, <span class="string">&#x27;WARD&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1981-02-22&#x27;</span>, <span class="number">1250.00</span>, <span class="number">500.00</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7566</span>, <span class="string">&#x27;JONES&#x27;</span>, <span class="string">&#x27;MANAGER&#x27;</span>, <span class="number">7839</span>, <span class="string">&#x27;1981-04-02&#x27;</span>, <span class="number">2975.00</span>, <span class="keyword">null</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7654</span>, <span class="string">&#x27;MARTIN&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1981-09-28&#x27;</span>, <span class="number">1250.00</span>, <span class="number">1400.00</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7698</span>, <span class="string">&#x27;BLAKE&#x27;</span>, <span class="string">&#x27;MANAGER&#x27;</span>, <span class="number">7839</span>, <span class="string">&#x27;1981-05-01&#x27;</span>, <span class="number">2850.00</span>, <span class="keyword">null</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7782</span>, <span class="string">&#x27;CLARK&#x27;</span>, <span class="string">&#x27;MANAGER&#x27;</span>, <span class="number">7839</span>, <span class="string">&#x27;1981-06-09&#x27;</span>, <span class="number">2450.00</span>, <span class="keyword">null</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7788</span>, <span class="string">&#x27;SCOTT&#x27;</span>, <span class="string">&#x27;ANALYST&#x27;</span>, <span class="number">7566</span>, <span class="string">&#x27;1987-04-19&#x27;</span>, <span class="number">3000.00</span>, <span class="keyword">null</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7839</span>, <span class="string">&#x27;KING&#x27;</span>, <span class="string">&#x27;PRESIDENT&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;1981-11-17&#x27;</span>, <span class="number">5000.00</span>, <span class="keyword">null</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7844</span>, <span class="string">&#x27;TURNER&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1981-09-08&#x27;</span>, <span class="number">1500.00</span>, <span class="number">0.00</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7876</span>, <span class="string">&#x27;ADAMS&#x27;</span>, <span class="string">&#x27;CLERK&#x27;</span>, <span class="number">7788</span>, <span class="string">&#x27;1987-05-23&#x27;</span>, <span class="number">1100.00</span>, <span class="keyword">null</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7900</span>, <span class="string">&#x27;JAMES&#x27;</span>, <span class="string">&#x27;CLERK&#x27;</span>, <span class="number">7698</span>, <span class="string">&#x27;1981-12-03&#x27;</span>, <span class="number">950.00</span>, <span class="keyword">null</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7902</span>, <span class="string">&#x27;FORD&#x27;</span>, <span class="string">&#x27;ANALYST&#x27;</span>, <span class="number">7566</span>, <span class="string">&#x27;1981-12-03&#x27;</span>, <span class="number">3000.00</span>, <span class="keyword">null</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> EMP  <span class="keyword">values</span> (<span class="number">7934</span>, <span class="string">&#x27;MILLER&#x27;</span>, <span class="string">&#x27;CLERK&#x27;</span>, <span class="number">7782</span>, <span class="string">&#x27;1982-01-23&#x27;</span>, <span class="number">1300.00</span>, <span class="keyword">null</span>, <span class="number">10</span>);</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- 工资等级表插入数据</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SALGRADE (GRADE, LOSAL, HISAL) <span class="keyword">values</span> (<span class="number">1</span>, <span class="number">700</span>, <span class="number">1200</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SALGRADE (GRADE, LOSAL, HISAL) <span class="keyword">values</span> (<span class="number">2</span>, <span class="number">1201</span>, <span class="number">1400</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SALGRADE (GRADE, LOSAL, HISAL) <span class="keyword">values</span> (<span class="number">3</span>, <span class="number">1401</span>, <span class="number">2000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SALGRADE (GRADE, LOSAL, HISAL) <span class="keyword">values</span> (<span class="number">4</span>, <span class="number">2001</span>, <span class="number">3000</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SALGRADE (GRADE, LOSAL, HISAL) <span class="keyword">values</span> (<span class="number">5</span>, <span class="number">3001</span>, <span class="number">9999</span>);</span><br></pre></td></tr></table></figure>

<h1 id="9，单表数据查询"><a href="#9，单表数据查询" class="headerlink" title="9，单表数据查询"></a>9，单表数据查询</h1><p>查询是MYSQL学习里面最重要的环节</p>
<h3 id="sql语句的注释"><a href="#sql语句的注释" class="headerlink" title="sql语句的注释"></a>sql语句的注释</h3><p>SQL中的注释分为单行注释和多行注释。顾名思义，单行注释就是对一行进行注释，多行注释就是同时对多行进行注释。</p>
<p>一、单行注释</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQL语句中的单行注释使用 –</span><br><span class="line"></span><br><span class="line">create database database_x    --创建数据库database_x</span><br><span class="line">1</span><br></pre></td></tr></table></figure>


<p>二、多行注释</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL语句中的多行注释采用 /…/</span><br><span class="line"></span><br><span class="line">create database database_x</span><br><span class="line">/*</span><br><span class="line">    创建一个数据库</span><br><span class="line">    名字叫做database_x</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>



<h2 id="9-1-最简单的查询方式"><a href="#9-1-最简单的查询方式" class="headerlink" title="9.1 最简单的查询方式"></a>9.1 最简单的查询方式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1，查询部门所有信息</span><br><span class="line">SELECT * FROM DEPT;</span><br><span class="line">2，查询所有部门的部门编号和名称</span><br><span class="line">SELECT DEPTNO,DNAME FROM DEPT;</span><br><span class="line">3,查询所有员工信息</span><br><span class="line">SELECT * FROM EMP;</span><br><span class="line">4,查询所有员的名字和入职时间</span><br><span class="line">SELECT ENAME,HIREDATE FROM EMP;</span><br></pre></td></tr></table></figure>

<h2 id="9-2-使用算术表达式"><a href="#9-2-使用算术表达式" class="headerlink" title="9.2 使用算术表达式"></a>9.2 使用算术表达式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1,查询所有员工名字和工资，并在原有的工资基础加10%</span><br><span class="line">SELECT ENAME,SAL*1.1 FROM EMP;</span><br><span class="line">2,查询所有员工名字和工资，并在原有的工资基础减10%</span><br><span class="line">SELECT ENAME,SAL*0.9 FROM EMP;</span><br><span class="line">3,查询所有员工名字和工资，并在原有的工资基础加1000</span><br><span class="line">SELECT ENAME,SAL+1000 FROM EMP;</span><br><span class="line">4,查询所有员工名字和工资，并在原有的工资基础减500</span><br><span class="line">SELECT ENAME,SAL-500 FROM EMP;</span><br></pre></td></tr></table></figure>

<h2 id="9-3-使用字段别名"><a href="#9-3-使用字段别名" class="headerlink" title="9.3 使用字段别名"></a>9.3 使用字段别名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1，查询所有部门信息并翻译表头</span><br><span class="line">SELECT DEPTNO AS &#x27;部门 编号&#x27;,DNAME AS 部门名称,LOC AS 部门地址 FROM  DEPT;</span><br><span class="line">2,在SQL查询中，AS可以不写</span><br><span class="line">SELECT DEPTNO  &#x27;部门 编号&#x27;,DNAME  部门名称,LOC  部门地址 FROM  DEPT;</span><br></pre></td></tr></table></figure>

<h2 id="9-4-去重查询DISTINCT"><a href="#9-4-去重查询DISTINCT" class="headerlink" title="9.4 去重查询DISTINCT"></a>9.4 去重查询DISTINCT</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1，查询所有员工的部门编号</span><br><span class="line">SELECT DEPTNO FROM EMP;</span><br><span class="line">2,过虑上一个查询部门编号</span><br><span class="line">SELECT DISTINCT DEPTNO FROM EMP;</span><br><span class="line">3,查询所有员工的部门编号和工种[JOB]</span><br><span class="line">SELECT JOB,DEPTNO FROM EMP;</span><br><span class="line">4,过虑上一个查询的数据</span><br><span class="line">SELECT DISTINCT JOB,DEPTNO FROM EMP;</span><br></pre></td></tr></table></figure>

<h2 id="9-5-排序查询-ORDER-BY"><a href="#9-5-排序查询-ORDER-BY" class="headerlink" title="9.5 排序查询 ORDER BY"></a>9.5 排序查询 ORDER BY</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1，查询所有员工信息，并按工资升序【ASC--可以不写】</span><br><span class="line">SELECT * FROM EMP ORDER BY SAL ASC</span><br><span class="line">2，查询所有员工信息，并按工资降序【DESC】</span><br><span class="line">SELECT * FROM EMP ORDER BY SAL DESC</span><br><span class="line">3,查询所有员工信息，并按工资降序【DESC】 如果工资相同，按入职时间升序</span><br><span class="line">SELECT * FROM EMP ORDER BY SAL DESC ,HIREDATE ASC</span><br></pre></td></tr></table></figure>

<h2 id="9-6-分页查询LIMIT"><a href="#9-6-分页查询LIMIT" class="headerlink" title="9.6 分页查询LIMIT"></a>9.6 分页查询LIMIT</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1,查询员工的前三条数</span><br><span class="line">SELECT * FROM EMP LIMIT 3;</span><br><span class="line">2, 真正的分页查询 应该有页码   每页条数</span><br><span class="line">                     </span><br><span class="line">pageNum  页码  </span><br><span class="line">pageSize 每页的条数</span><br><span class="line">          pageNum       pageSize</span><br><span class="line">第一页       1            5</span><br><span class="line">第二页       2            5</span><br><span class="line">第三页       3            5</span><br><span class="line">SELECT * FROM EMP;</span><br><span class="line">SELECT * FROM EMP LIMIT A,B  # 第一页的查询</span><br><span class="line">SELECT * FROM EMP LIMIT 0,5  # 第一页的查询</span><br><span class="line">SELECT * FROM EMP LIMIT 5,5  # 第二页的查询</span><br><span class="line">SELECT * FROM EMP LIMIT 10,5  # 第三页的查询</span><br><span class="line"></span><br><span class="line">算</span><br><span class="line">A =(pageNum-1)*pageSize    A是指从第一条开始的便宜量</span><br><span class="line">B =pageSize</span><br></pre></td></tr></table></figure>

<h2 id="9-7-合并查询-UNION"><a href="#9-7-合并查询-UNION" class="headerlink" title="9.7 **合并查询 **UNION"></a>9.7 **合并查询 **UNION</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1,查询部门编号为10的员工</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=10;</span><br><span class="line">2,查询部门编号为30的员工</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=30;</span><br><span class="line">3,把上面两个查询的结果合并到一起</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=10</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=30;</span><br><span class="line">4,查询部门编号为10或者20的员工</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=10 OR DEPTNO=20;</span><br><span class="line">5，查询部门编号20的员工</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=20;</span><br><span class="line">6,把4和5的查询结构进行合并</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=10 OR DEPTNO=20</span><br><span class="line">UNION  #合并并去重</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=20</span><br><span class="line">7,把4和5的查询结构进行合并 不去重</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=10 OR DEPTNO=20</span><br><span class="line">UNION ALL  #只合并，不去重</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=20</span><br><span class="line">8，如果字段名不一样，可不可以合并[--不可以]</span><br><span class="line">SELECT EMPNO,ENAME,SAL FROM EMP</span><br><span class="line">UNION   </span><br><span class="line">SELECT JOB,SAL,DEPTNO FROM EMP</span><br><span class="line">#合并的原则，只要两个查询结果列数一样就可以合并</span><br></pre></td></tr></table></figure>

<h1 id="10，WHERE子句"><a href="#10，WHERE子句" class="headerlink" title="10，WHERE子句"></a>10，WHERE子句</h1><p>作用：对查询结果进行筛选</p>
<h2 id="10-1-用法举例"><a href="#10-1-用法举例" class="headerlink" title="10.1 用法举例"></a>10.1 <strong>用法举例</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where deptno=10;  #查询所有部门ID=10的员工</span><br><span class="line">select * from emp where ename = &#x27;JACK&#x27;;#查询名字等于JACK的员工</span><br><span class="line">select * from emp where hiredate = &#x27;2020-12-12&#x27;;  查询入职时间为2020-12-12的工</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>字符串和日期值要用<strong>单引号</strong>扩起来                  </p>
<p>字符串大小写敏感</p>
<p>日期值格式敏感，缺省的日期格式是**’YYYY-MM-DD HH:mm:ss’**</p>
<h2 id="10-2-查询条件中可以使用比较运算符"><a href="#10-2-查询条件中可以使用比较运算符" class="headerlink" title="10.2 查询条件中可以使用比较运算符"></a>10.2 <strong>查询条件中可以使用比较运算符</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &gt;=  &lt;  &lt;=  != &lt;&gt;  =</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282216869.jpg" alt="img"></p>
<p>注意：MySQL使用&#x3D;运算符来判断表达式是否相等，它没有&#x3D;&#x3D;</p>
<p>​      Java使用!&#x3D;表示不等于，MySQL也支持。但是我们不要使用，效率太低了</p>
<p>​      MySQL使用的不等于使用**&lt;&gt;**</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#1，比较运算符</span><br><span class="line">1,查询工资大于2500的所有员工</span><br><span class="line">SELECT * FROM EMP WHERE SAL&gt;2500;</span><br><span class="line">2,查询部门编号不等于20的员工</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO&lt;&gt;20</span><br><span class="line">3,查询工资在800-1100之间的员工信息</span><br><span class="line">SELECT * FROM EMP WHERE SAL BETWEEN 800 AND 1100;</span><br><span class="line">	||</span><br><span class="line">SELECT * FROM EMP WHERE SAL&gt;=800 AND SAL &lt;=1100;</span><br><span class="line">4,查询JOB 为 CLERK SALESMAN MANAGER的员工</span><br><span class="line">SELECT * FROM EMP WHERE JOB IN(&#x27;CLERK&#x27;,&#x27;SALESMAN&#x27;,&#x27;MANAGER&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="10-3-使用LIKE运算符执行模糊查询（通配查询）"><a href="#10-3-使用LIKE运算符执行模糊查询（通配查询）" class="headerlink" title="10.3 使用LIKE运算符执行模糊查询（通配查询）"></a>10.3 使用LIKE运算符执行模糊查询（通配查询）</h2><p>LIKE  像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1,查询出所有员工里面名字以S开头的</span><br><span class="line">SELECT * FROM EMP WHERE ENAME LIKE &#x27;S%&#x27;</span><br><span class="line">2,查询出所有员工里面名字包含S的</span><br><span class="line">SELECT * FROM EMP WHERE ENAME LIKE &#x27;%S%&#x27;</span><br><span class="line">3,查询出所有员工里面字以S开头，并且名字长度为5的员工</span><br><span class="line">SELECT * FROM EMP WHERE ENAME LIKE &#x27;S____&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="10-4-使用IS-NULL运算符进行空值判断"><a href="#10-4-使用IS-NULL运算符进行空值判断" class="headerlink" title="10.4 使用IS NULL运算符进行空值判断"></a>10.4 使用IS NULL运算符进行空值判断</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1,查询所有员工里面奖金为NULL的员工</span><br><span class="line">SELECT * FROM EMP WHERE COMM IS NULL;</span><br><span class="line">2,查询所有员工里面部门编号为30 并且奖金不为空的</span><br><span class="line">SELECT * FROM EMP WHERE DEPTNO=30 AND COMM IS NOT NULL;</span><br></pre></td></tr></table></figure>

<h2 id="10-5-查询条件中可以使用逻辑运算符"><a href="#10-5-查询条件中可以使用逻辑运算符" class="headerlink" title="10.5 查询条件中可以使用逻辑运算符"></a>10.5 查询条件中可以使用逻辑运算符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">and  前后的条件都为true </span><br><span class="line">or   前后的条件满足一个就可以了</span><br><span class="line">in(1,2,3,4,5) 在XX里面 以集合里面的所有数据进行等值判断</span><br><span class="line">not in(1,2,3,4,5) 不在集合里面  对集合里面的所有数据做&lt;&gt;判断</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1,查询员工表里面部门编号为10 并且工资大于1000</span><br><span class="line">select * from emp where deptno = 10 and sal &gt; 1000;</span><br><span class="line">2，查询员工表里面部门编号为10 或者 JOB 为 CLERK</span><br><span class="line">select * from emp where deptno = 10 or job = ‘CLERK’;</span><br><span class="line">||</span><br><span class="line">select * from emp where deptno = 10</span><br><span class="line">UNION </span><br><span class="line">select * from emp where job = ‘CLERK’;</span><br><span class="line">3,查询员工工资不在800, 1500, 2000里面的员工信息</span><br><span class="line">SELECT * FROM EMP WHERE SAL NOT IN(800, 1500, 2000)</span><br></pre></td></tr></table></figure>

<h3 id="SQL优化问题"><a href="#SQL优化问题" class="headerlink" title="SQL优化问题"></a>SQL优化问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AND:  把检索结果较少的条件放到后面</span><br><span class="line">OR:  把检索结果较多的条件放到后面</span><br></pre></td></tr></table></figure>

<h2 id="10-6-四种运算符优先级：算术-gt-连接-gt-比较-gt-逻辑"><a href="#10-6-四种运算符优先级：算术-gt-连接-gt-比较-gt-逻辑" class="headerlink" title="10.6 四种运算符优先级：算术&gt;连接&gt;比较&gt;逻辑"></a>10.6 四种运算符优先级：算术&gt;连接&gt;比较&gt;逻辑</h2><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282216676.jpg" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">可使用小括号强行改变运算顺序</span><br><span class="line">select * from emp where job=&#x27;SALESMAN&#x27; or job=&#x27;CLERK&#x27; and sal&gt;=1280;</span><br><span class="line">select * from emp where (job=&#x27;SALESMAN&#x27; or job=&#x27;CLERK&#x27;) and sal&gt;=1280;</span><br></pre></td></tr></table></figure>



<h1 id="11-聚合函数"><a href="#11-聚合函数" class="headerlink" title="11 聚合函数"></a>11 聚合函数</h1><p>使用函数可以大大提高SELECT语句操作数据库的能力。它给数据的转换和处理提供了方便。</p>
<p>函数只是将取出的数据进行处理，不会改变数据库中的值。</p>
<h2 id="11-1-函数的分类"><a href="#11-1-函数的分类" class="headerlink" title="11.1 函数的分类"></a>11.1 函数的分类</h2><p>本质就是方法</p>
<h3 id="11-1-1-单行函数"><a href="#11-1-1-单行函数" class="headerlink" title="11.1.1 单行函数"></a>11.1.1 单行函数</h3><p>对表里面的某一个字段进行处理</p>
<p><strong>Ø 数学函数</strong></p>
<p><strong>Ø 字符串函数</strong></p>
<p><strong>Ø 日期和时间函数</strong></p>
<p><strong>Ø 条件判断函数</strong></p>
<p>Ø 系统信息函数</p>
<p>Ø 加密函数</p>
<p>Ø 格式化函数</p>
<h3 id="11-1-2-多行函数"><a href="#11-1-2-多行函数" class="headerlink" title="11.1.2 多行函数"></a>11.1.2 多行函数</h3><p>对表里面某一组字段数据进行数据</p>
<p> 仅适用数值型的多行函数  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sum() 求和 </span><br><span class="line">avg() 求平均值  </span><br></pre></td></tr></table></figure>

<p>  适用任何类型数据</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">count() 计数  </span><br><span class="line">max() 求最大值    </span><br><span class="line">min() 求最小值   </span><br></pre></td></tr></table></figure>

<h2 id="11-2-单行函数"><a href="#11-2-单行函数" class="headerlink" title="11.2 单行函数"></a>11.2 <strong>单行函数</strong></h2><h3 id="11-2-1-数学函数"><a href="#11-2-1-数学函数" class="headerlink" title="11.2.1 数学函数"></a>11.2.1 数学函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）<span class="built_in">ABS</span>(x) 返回x的绝对值</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-10</span>);</span><br><span class="line">（<span class="number">2</span>）PI()  返回圆周率π，默认显示<span class="number">6</span>位小数</span><br><span class="line"><span class="keyword">SELECT</span> PI();</span><br><span class="line">（<span class="number">3</span>）<span class="built_in">SQRT</span>(x)  返回非负数的x的二次方根</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SQRT</span>(<span class="number">16</span>)</span><br><span class="line">（<span class="number">4</span>）<span class="built_in">MOD</span>(x,y)  返回x被y除后的余数</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">（<span class="number">5</span>）<span class="built_in">CEIL</span>(x) 向上取整</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEIL</span>(<span class="number">9.000001</span>);</span><br><span class="line">（<span class="number">6</span>）<span class="built_in">FLOOR</span>(x)  向下取整</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">9.99999999</span>);</span><br><span class="line">（<span class="number">7</span>）ROUND(x)、ROUND(x,y)  前者返回最接近于x的整数，即对x进行四舍五入；后者返回最接近x的数，其值保留到小数点后面y位，若y为负值，则将保留到x到小数点左边y位</span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">4.51312312</span>);</span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">4.51312312</span>,<span class="number">2</span>);</span><br><span class="line">（<span class="number">8</span>）POW(x,y)和、<span class="built_in">POWER</span>(x,y)  返回x的y次乘方的值</span><br><span class="line"><span class="keyword">SELECT</span> POW(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">（<span class="number">9</span>）RAND(x)   返回<span class="number">0</span><span class="number">-1</span>之间的随机小数  X是种子值 如果定死那么返回的值就是一样的</span><br><span class="line"><span class="keyword">SELECT</span> RAND();</span><br><span class="line">（<span class="number">10</span>）查询员工数据，返回员工名字和工资  并对工资向上取整</span><br><span class="line"><span class="keyword">SELECT</span> ENAME,<span class="built_in">CEIL</span>(SAL) <span class="keyword">AS</span> SAL <span class="keyword">FROM</span> EMP;</span><br></pre></td></tr></table></figure>

<h3 id="11-2-1-字符串函数"><a href="#11-2-1-字符串函数" class="headerlink" title="11.2.1 字符串函数"></a>11.2.1 字符串函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）<span class="keyword">CHAR_LENGTH</span>(str)  计算字符串字符个数</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(&quot;HELLO&quot;);</span><br><span class="line">    <span class="operator">|</span><span class="comment">--查询员工表里面员工姓名及员工的姓名的字符长度</span></span><br><span class="line">		<span class="keyword">SELECT</span> ENAME,<span class="keyword">CHAR_LENGTH</span>(ENAME) <span class="keyword">FROM</span> EMP ;</span><br><span class="line">		<span class="operator">|</span><span class="comment">--查询员工表里面员工姓名长度为5的员工的所有信息</span></span><br><span class="line">		<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> <span class="keyword">CHAR_LENGTH</span>(ENAME)<span class="operator">=</span><span class="number">5</span></span><br><span class="line">（<span class="number">2</span>）CONCAT(s1,s2，...)  返回连接参数产生的字符串，一个或多个待拼接的内容，任意一个为<span class="keyword">NULL</span>则返回值为<span class="keyword">NULL</span></span><br><span class="line">	 <span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">	 <span class="operator">|</span><span class="comment">--查询员的表里面的数据 要求把员工ID和员的姓名使用-连接在一起</span></span><br><span class="line">			<span class="keyword">SELECT</span> CONCAT(EMPNO,<span class="string">&#x27;-&#x27;</span>,ENAME) <span class="keyword">FROM</span> EMP ;</span><br><span class="line">（<span class="number">3</span>）CONCAT_WS(x,s1,s2,...) 返回多个字符串拼接之后的字符串，每个字符串之间有一个x</span><br><span class="line">   <span class="keyword">SELECT</span> CONCAT_WS(<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">	 <span class="operator">|</span><span class="comment">--查询员的表里面的数据 要求把员工ID和员的姓名使用-连接在一起</span></span><br><span class="line">			<span class="keyword">SELECT</span> CONCAT_WS(<span class="string">&#x27;-&#x27;</span>,EMPNO,ENAME) <span class="keyword">FROM</span> EMP ;</span><br><span class="line">（<span class="number">4</span>）<span class="built_in">LOWER</span>(str)<span class="built_in">UPPER</span>(str)前两者将str中的字母全部转换成小写，后两者将字符串中的字母全部转换成大写</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;HELLO&#x27;</span>);</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;hellO&#x27;</span>);</span><br><span class="line">（<span class="number">5</span>）<span class="built_in">TRIM</span>(s)  返回字符串s删除了两边空格之后的字符串</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27;   ABC     &#x27;</span>)</span><br><span class="line">（<span class="number">6</span>）REPLACE(s,s1,s2)  返回一个字符串，用字符串s2替代字符串s中所有的字符串s1</span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;hello world&#x27;</span>,<span class="string">&#x27;l&#x27;</span>,<span class="string">&#x27;L&#x27;</span>);</span><br><span class="line">（<span class="number">7</span>）<span class="built_in">SUBSTRING</span>(s,n,len)两个函数作用相同，从字符串s中返回一个第n个字符开始、长度为len的字符串</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(&quot;HELLO WORLD&quot;,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">	<span class="operator">|</span><span class="comment">--查询所有员的的名字 并取出员工名字的第一个字母  并转成小写</span></span><br><span class="line">		<span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(ENAME,<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">FROM</span> EMP;</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(<span class="built_in">SUBSTRING</span>(ENAME,<span class="number">1</span>,<span class="number">1</span>)) <span class="keyword">FROM</span> EMP;</span><br><span class="line">（<span class="number">8</span>）REVERSE(s)  将字符串s反转</span><br><span class="line">	<span class="keyword">SELECT</span> REVERSE(&quot;HELLO&quot;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="11-2-1-日期和时间函数"><a href="#11-2-1-日期和时间函数" class="headerlink" title="11.2.1 日期和时间函数"></a>11.2.1 日期和时间函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）CURDATE()、<span class="built_in">CURRENT_DATE</span>()将当前日期按照&quot;YYYY-MM-DD&quot;或者&quot;YYYYMMDD&quot;格式的值返回，具体格式根据函数用在字符串或是数字语境中而定</span><br><span class="line"><span class="keyword">SELECT</span> CURDATE(),<span class="built_in">CURRENT_DATE</span>();</span><br><span class="line">（<span class="number">2</span>）<span class="built_in">CURRENT_TIMESTAMP</span>()、<span class="built_in">LOCALTIME</span>()、NOW()、SYSDATE()这四个函数作用相同，返回当前日期和时间值，格式为&quot;YYYY_MM-DD HH:MM:SS&quot;或&quot;YYYYMMDDHHMMSS&quot;，具体格式根据函数用在字符串或数字语境中而定</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIMESTAMP</span>(),<span class="built_in">LOCALTIME</span>(),NOW(),SYSDATE();</span><br><span class="line"></span><br><span class="line">（<span class="number">3</span>）<span class="keyword">MONTH</span>(<span class="type">date</span>)和MONTHNAME(<span class="type">date</span>)前者返回指定日期中的月份，后者返回指定日期中的月份的名称</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(SYSDATE()) ,MONTHNAME(SYSDATE());</span><br><span class="line"></span><br><span class="line">（<span class="number">4</span>）WEEK(d)、WEEKOFYEAR(d)前者计算日期d是一年中的第几周，后者计算某一天位于一年中的第几周</span><br><span class="line"><span class="keyword">SELECT</span> WEEK(<span class="string">&#x27;2021-11-11&#x27;</span>),WEEKOFYEAR(<span class="string">&#x27;2021-11-11&#x27;</span>)</span><br><span class="line">（<span class="number">5</span>）DAYOFYEAR(d)、DAYOFMONTH(d)前者返回d是一年中的第几天，后者返回d是一月中的第几天</span><br><span class="line"><span class="keyword">SELECT</span> DAYOFYEAR(NOW()),DAYOFMONTH(NOW());</span><br><span class="line">（<span class="number">6</span>）<span class="built_in">EXTRACT</span>(type <span class="keyword">FROM</span> <span class="type">date</span>)从日期中提取一部分，type可以是<span class="keyword">YEAR</span>、YEAR_MONTH、<span class="keyword">MONTH</span>、<span class="keyword">DAY</span>、DAY_HOUR、DAY_MINUTE、DAY_SECOND、DAY_MICROSECOND、</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">EXTRACT</span>(<span class="keyword">YEAR</span> <span class="keyword">FROM</span> NOW()),<span class="built_in">EXTRACT</span>(YEAR_MONTH <span class="keyword">FROM</span> NOW()),<span class="built_in">EXTRACT</span>(<span class="keyword">MONTH</span> <span class="keyword">FROM</span> NOW()),<span class="built_in">EXTRACT</span>(<span class="keyword">DAY</span> <span class="keyword">FROM</span> NOW());</span><br><span class="line">（<span class="number">7</span>）TimeStampDiff(间隔类型，前一个日期，后一个日期) </span><br><span class="line">例如距离现在差了多少年：TimeStampDiff(<span class="keyword">year</span>, 前一个日期, now())</span><br><span class="line">间隔类型有：<span class="keyword">second</span>秒，<span class="keyword">minute</span>分，<span class="keyword">hour</span>时，<span class="keyword">day</span>天，week周，<span class="keyword">month</span>月，quarter季度，<span class="keyword">year</span>年</span><br><span class="line"><span class="keyword">SELECT</span> TimeStampDiff(<span class="keyword">month</span>,<span class="string">&#x27;1990-1-3&#x27;</span>,NOW())</span><br><span class="line">作业：计算EMP表里面<span class="number">35</span>年前入职的员工</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> TimeStampDiff(<span class="keyword">year</span>,HIREDATE,NOW())<span class="operator">&gt;</span><span class="number">35</span>;</span><br><span class="line">（<span class="number">8</span>）DATE_ADD(<span class="type">date</span>,<span class="type">INTERVAL</span> expr type)、ADD_DATE(<span class="type">date</span>,<span class="type">INTERVAL</span> expr type)返回将起始时间加上expr type之后的时间，</span><br><span class="line">   比如DATE_ADD(<span class="string">&#x27;2010-12-31 23:59:59&#x27;</span>, <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>)表示的就是把第一个时间加<span class="number">1</span>秒</span><br><span class="line"></span><br><span class="line">   比如DATE_ADD(<span class="string">&#x27;2021-11-20 23:59:59&#x27;</span>, <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">SECOND</span>)表示的就是把第一个时间加<span class="number">1</span>秒</span><br><span class="line"></span><br><span class="line">	<span class="keyword">SELECT</span> 	DATE_ADD(<span class="string">&#x27;2021-11-20 23:59:59&#x27;</span>, <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">YEAR</span>)	</span><br></pre></td></tr></table></figure>

<h3 id="11-2-1-if条件判断函数"><a href="#11-2-1-if条件判断函数" class="headerlink" title="11.2.1 if条件判断函数"></a>11.2.1 if条件判断函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）IF(expr,v1,v2)如果expr是<span class="literal">TRUE</span>则返回v1，否则返回v2</span><br><span class="line"><span class="keyword">SELECT</span> IF(<span class="number">1</span><span class="operator">&gt;</span><span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    查询员工表里面的数据，如果奖金为空就显示<span class="number">0.00</span></span><br><span class="line">		<span class="keyword">SELECT</span> ENAME,JOB,SAL,IF(COMM <span class="keyword">IS</span> <span class="keyword">NULL</span>,<span class="number">0.00</span>,COMM) <span class="keyword">FROM</span> EMP;</span><br><span class="line">（<span class="number">2</span>）IFNULL(v1,v2)函数  如果v1的值不为<span class="keyword">NULL</span>，则返回v1，否则返回v2。</span><br><span class="line">	    查询员工表里面的数据，如果奖金为空就显示<span class="number">0.00</span></span><br><span class="line">		<span class="keyword">SELECT</span> ENAME,JOB,SAL,IFNULL(COMM,<span class="number">0.00</span>) <span class="keyword">FROM</span> EMP;</span><br><span class="line">（<span class="number">2</span>）<span class="keyword">CASE</span> expr <span class="keyword">WHEN</span> v1 <span class="keyword">THEN</span> r1 [<span class="keyword">WHEN</span> v2 <span class="keyword">THEN</span> v2] [<span class="keyword">ELSE</span> rn] <span class="keyword">END</span> 如果expr等于某个vn，则返回对应位置<span class="keyword">THEN</span>后面的结果，如果与所有值都不想等，则返回<span class="keyword">ELSE</span>后面的rn</span><br><span class="line">	 <span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="number">4</span> <span class="keyword">WHEN</span>  <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">&#x27;第一名&#x27;</span> <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span> <span class="string">&#x27;第二名&#x27;</span> <span class="keyword">ELSE</span> <span class="string">&#x27;第三名&#x27;</span> <span class="keyword">END</span>;</span><br><span class="line">	 <span class="operator">|</span><span class="comment">--查询员的信息里面的JOB ，要求把JOB翻译成中文</span></span><br><span class="line">	 <span class="keyword">SELECT</span> ENAME,JOB,</span><br><span class="line">			<span class="keyword">CASE</span> JOB </span><br><span class="line">			<span class="keyword">WHEN</span> <span class="string">&#x27;CLERK&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;职员&#x27;</span></span><br><span class="line">			<span class="keyword">WHEN</span> <span class="string">&#x27;SALESMAN&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;销售员&#x27;</span></span><br><span class="line">			<span class="keyword">WHEN</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;经理&#x27;</span></span><br><span class="line">			<span class="keyword">WHEN</span> <span class="string">&#x27;ANALYST&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;财务&#x27;</span></span><br><span class="line">			<span class="keyword">WHEN</span> <span class="string">&#x27;PRESIDENT&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;总经理&#x27;</span></span><br><span class="line">		  <span class="keyword">ELSE</span>  <span class="string">&#x27;未知&#x27;</span></span><br><span class="line">			<span class="keyword">END</span></span><br><span class="line">	 <span class="keyword">FROM</span> EMP;</span><br></pre></td></tr></table></figure>

<h3 id="11-2-1-系统函数"><a href="#11-2-1-系统函数" class="headerlink" title="11.2.1 系统函数"></a>11.2.1 系统函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（1）VERSION()查看MySQL版本号</span><br><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure>

<h3 id="11-2-1-加密函数"><a href="#11-2-1-加密函数" class="headerlink" title="11.2.1 加密函数"></a>11.2.1 加密函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（1）PASSWORD(str)从原明文密码str计算并返回加密后的字符串密码，注意这个函数的加密是单向的（不可逆），因此不应将它应用在个人的应用程序中而应该只在MySQL服务器的鉴定系统中使用</span><br><span class="line">SELECT PASSWORD(&#x27;123456&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="11-3-多行函数"><a href="#11-3-多行函数" class="headerlink" title="11.3 多行函数"></a>11.3 多行函数</h2><p>对一组数据进行运算，针对一组数据（多行记录）只返回一个结果，也称分组函数</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282215282.jpg" alt="img"></p>
<h3 id="11-3-1，多行函数的作用"><a href="#11-3-1，多行函数的作用" class="headerlink" title="11.3.1，多行函数的作用"></a>11.3.1，多行函数的作用</h3><p>对一组数据进行处理，返回一行一列的数据</p>
<h3 id="11-3-2，常用的多行函数"><a href="#11-3-2，常用的多行函数" class="headerlink" title="11.3.2，常用的多行函数"></a>11.3.2，常用的多行函数</h3><p>sum()  avg()   仅适用数值型</p>
<p>count()   max()   min()   适用任何类型数据</p>
<h3 id="11-3-3，多行函数和空值及count的说明"><a href="#11-3-3，多行函数和空值及count的说明" class="headerlink" title="11.3.3，多行函数和空值及count的说明"></a>11.3.3，多行函数和空值及count的说明</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">多行函数除了count(*)外，都跳过空值而处理非空值</span><br><span class="line">可使用IF()函数强制多行函数处理空值</span><br><span class="line"></span><br><span class="line">count(*)返回组中总记录数目； 一般推荐使用count(1)</span><br><span class="line">count(exp)返回表达式exp值非空的记录数目；</span><br><span class="line">count(distinct(exp))返回表达式exp值不重复的、非空的记录数目。</span><br></pre></td></tr></table></figure>

<h3 id="11-3-4，GROUP-BY-子句的使用"><a href="#11-3-4，GROUP-BY-子句的使用" class="headerlink" title="11.3.4，GROUP BY 子句的使用"></a>11.3.4，GROUP BY 子句的使用</h3><p>作用：将表中数据分成若干小组</p>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select 字段，[多行函数]</span><br><span class="line">from [where] </span><br><span class="line">group by [字段]</span><br></pre></td></tr></table></figure>

<p>【注意事项】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">出现在<span class="keyword">SELECT</span>列表中的字段，如果不是包含在多行函数中，那么该字段必须同时在<span class="keyword">GROUP</span> <span class="keyword">BY</span>子句中出现。</span><br><span class="line">错误：<span class="keyword">select</span> ename,deptno,<span class="built_in">sum</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"><span class="operator">|</span><span class="comment">--以上的SQL在MYSQL中是不错的，但是在oracle是错的，在开发中避免这样写</span></span><br><span class="line">包含在<span class="keyword">GROUP</span> <span class="keyword">BY</span>子句中的字段则不必须出现在<span class="keyword">SELECT</span>列表中。          </span><br><span class="line"></span><br><span class="line">如果没有<span class="keyword">GROUP</span> <span class="keyword">BY</span>子句，<span class="keyword">SELECT</span>列表中不允许出现字段（单行函数）与多行函数混用的情况</span><br><span class="line"><span class="keyword">select</span> empno, sal <span class="keyword">from</span> emp; <span class="operator">/</span><span class="operator">/</span>合法</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp; <span class="operator">/</span><span class="operator">/</span>合法</span><br><span class="line"><span class="keyword">select</span> empno, <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp; <span class="operator">/</span><span class="operator">/</span>非法</span><br><span class="line">不允许在<span class="keyword">WHERE</span> 子句中使用多行函数</span><br><span class="line"><span class="keyword">select</span> deptno, <span class="built_in">avg</span>(sal)   <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">avg</span>(sal) <span class="operator">&gt;</span> <span class="number">2000</span>;   <span class="operator">/</span><span class="operator">/</span>执行<span class="keyword">where</span>时尚未执行groupby 及其他</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br></pre></td></tr></table></figure>

<h3 id="11-3-5，HAVEING子句的使用"><a href="#11-3-5，HAVEING子句的使用" class="headerlink" title="11.3.5，HAVEING子句的使用"></a>11.3.5，HAVEING子句的使用</h3><p>注意点：因为在Group by后现不能跟where子句，那么如果想对分组之后的结果进行过滤只能使用having</p>
<p>语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段，[多行函数]</span><br><span class="line"><span class="keyword">from</span> [<span class="keyword">where</span>] </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> [字段]</span><br><span class="line"><span class="keyword">having</span> [表达式]</span><br></pre></td></tr></table></figure>

<p>案例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span>，按部门统计每个部门最高工资 最底工资，平均工资 并找出平均工资大于<span class="number">2000</span>的数据</span><br><span class="line"><span class="keyword">SELECT</span> DEPTNO, <span class="built_in">MAX</span>(SAL) 最高工资,<span class="built_in">MIN</span>(SAL) 最低工资,<span class="built_in">AVG</span>(SAL) 平均工资  <span class="keyword">FROM</span> EMP <span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO  <span class="keyword">HAVING</span> 平均工资<span class="operator">&gt;</span><span class="number">2000</span></span><br><span class="line"><span class="keyword">SELECT</span> DEPTNO, <span class="built_in">MAX</span>(SAL) 最高工资,<span class="built_in">MIN</span>(SAL) 最低工资,<span class="built_in">AVG</span>(SAL) 平均工资  <span class="keyword">FROM</span> EMP <span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO  <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(SAL)<span class="operator">&gt;</span><span class="number">2000</span></span><br></pre></td></tr></table></figure>

<h3 id="小练习"><a href="#小练习" class="headerlink" title="小练习"></a>小练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">统计人数小于<span class="number">4</span>的部门的平均工资。</span><br><span class="line"><span class="keyword">SELECT</span> DEPTNO,<span class="built_in">COUNT</span>(<span class="number">1</span>) 人数,<span class="built_in">AVG</span>(SAL) 平均工资 <span class="keyword">FROM</span> EMP </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO <span class="keyword">HAVING</span> 人数<span class="operator">&lt;</span><span class="number">4</span></span><br><span class="line">统计各部门的最高工资，排除最高工资小于<span class="number">8000</span>的部门。</span><br><span class="line"><span class="keyword">SELECT</span> DEPTNO,<span class="built_in">MAX</span>(SAL) 最高工资 <span class="keyword">FROM</span> EMP <span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO <span class="keyword">HAVING</span> 最高工资<span class="operator">&gt;=</span><span class="number">8000</span></span><br><span class="line">显示部门编号大于<span class="number">10</span> 的部门的人数，要求人数大于<span class="number">3</span></span><br><span class="line"><span class="keyword">SELECT</span> DEPTNO,<span class="built_in">COUNT</span>(<span class="number">1</span>) 人数 <span class="keyword">FROM</span> EMP <span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO <span class="keyword">HAVING</span> 人数<span class="operator">&gt;</span><span class="number">3</span> <span class="keyword">AND</span> DEPTNO<span class="operator">&gt;</span><span class="number">10</span>;</span><br><span class="line">	<span class="operator">|</span><span class="comment">--逻辑 先把所有数据按部门分组，再找出人数&gt;3和部门编号大于10的</span></span><br><span class="line">	<span class="operator">|</span><span class="comment">--上面的不足，第一次就对所有数据进行分组【其它小于10的部门根本没有必须分组】</span></span><br><span class="line">	<span class="operator">|</span><span class="comment">--修改之后的逻辑</span></span><br><span class="line">			<span class="operator">|</span><span class="comment">--先找出部门编号大于10的所有员工，再进行分组</span></span><br><span class="line">	<span class="keyword">SELECT</span> DEPTNO,<span class="built_in">COUNT</span>(<span class="number">1</span>) 人数 <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">&gt;</span><span class="number">10</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO </span><br><span class="line">		<span class="keyword">HAVING</span> 人数<span class="operator">&gt;</span><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h1 id="12，连接查询（SQL92）"><a href="#12，连接查询（SQL92）" class="headerlink" title="12，连接查询（SQL92）"></a>12，连接查询（SQL92）</h1><h2 id="12-1-为什么要连接查询"><a href="#12-1-为什么要连接查询" class="headerlink" title="12.1 为什么要连接查询"></a>12.1 为什么要连接查询</h2><p>当用户需要的数据来源于多张表的时候，我们就需要使用连接查询 </p>
<h2 id="12-2-连接查询概述"><a href="#12-2-连接查询概述" class="headerlink" title="12.2 连接查询概述"></a>12.2 连接查询概述</h2><blockquote>
<p>笛卡尔集</p>
<p>等值连接</p>
<p>非等值连接</p>
<p>外连接</p>
<p>自连接</p>
</blockquote>
<p>说明。SQL92是1992年提出的查询语法，向上兼容</p>
<h2 id="12-3-连接查询语法"><a href="#12-3-连接查询语法" class="headerlink" title="12.3 连接查询语法"></a>12.3 连接查询语法</h2><h3 id="12-3-1-语法规则"><a href="#12-3-1-语法规则" class="headerlink" title="12.3.1 语法规则"></a>12.3.1 语法规则</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select table1.column,table2.column from table1,table2 where (连接条件)</span><br></pre></td></tr></table></figure>

<h3 id="12-3-2-特点"><a href="#12-3-2-特点" class="headerlink" title="12.3.2 特点"></a>12.3.2 <strong>特点</strong></h3><p>在 WHERE 子句中写入连接条件</p>
<p>当多个表中有重名列时，必须在列的名字前加上表名作为前缀</p>
<h3 id="12-3-3-连接的类型："><a href="#12-3-3-连接的类型：" class="headerlink" title="12.3.3 连接的类型："></a>12.3.3 <strong>连接的类型：</strong></h3><p>等值连接 – Equijoin</p>
<p>非等值连接 – Non-equijoin</p>
<p>左连接  –LEFT JOIN</p>
<p>右连接  –RIGHT JOIN</p>
<p>自连接 – Self join</p>
<h2 id="12-4-笛卡尔集"><a href="#12-4-笛卡尔集" class="headerlink" title="12.4 笛卡尔集"></a>12.4 笛卡尔集</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select * from dept;//4条记录</span><br><span class="line">select * from emp; //14条记录</span><br><span class="line">select * from dept,emp; ;//4*14=56条记录</span><br><span class="line">总结</span><br><span class="line">检索出的行的数目将是第一个表中的行数乘以第二个表中的行数</span><br><span class="line">检索出的列的数目将是第一个表中的列数加上第二个表中的列数</span><br><span class="line">应该保证所有联结都有where子句，不然数据库返回比想要的数据多得多的数据 </span><br></pre></td></tr></table></figure>

<h2 id="12-5-等值连接"><a href="#12-5-等值连接" class="headerlink" title="12.5 等值连接"></a>12.5 等值连接</h2><p>上面的笛卡尔集的查询里面的数据很多不是合法的数据，而我们要找的数据是员工表的部门编号和部门表的部门编号相等数据【左边表的某一列必须和右边表的某一列相等】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1,要求查询员的信息并查询员的所有部门信息</span><br><span class="line">SELECT EMP.*,DEPT.DNAME,DEPT.LOC FROM EMP,DEPT WHERE EMP.DEPTNO=DEPT.DEPTNO;</span><br><span class="line">||--简化</span><br><span class="line">SELECT T1.*,T2.DNAME,T2.LOC FROM EMP AS T1,DEPT AS T2 WHERE T1.DEPTNO=T2.DEPTNO;</span><br><span class="line">||--再简化</span><br><span class="line">SELECT T1.*,T2.DNAME,T2.LOC FROM EMP  T1,DEPT  T2 WHERE T1.DEPTNO=T2.DEPTNO;</span><br><span class="line">2,要求查询工资大于2000员工信息并查询员的所有部门信息</span><br><span class="line">SELECT T1.*,T2.DNAME,T2.LOC FROM EMP  T1,DEPT  T2 WHERE T1.DEPTNO=T2.DEPTNO AND T1.SAL&gt;2000;</span><br></pre></td></tr></table></figure>

<h3 id="【注意点】"><a href="#【注意点】" class="headerlink" title="【注意点】"></a>【注意点】</h3><p>当被连接的多个表中存在同名字段时，须在该字段前加上”表名|另名.”前缀</p>
<p>可使用AND 操作符增加查询条件；</p>
<p>使用表别名可以简化查询</p>
<p>使用表名（表别名）前缀可提高查询效率；</p>
<h2 id="12-6-非等值连接"><a href="#12-6-非等值连接" class="headerlink" title="12.6 非等值连接"></a>12.6 非等值连接</h2><p>如查连接条件不是使用&#x3D;去判断的就叫非等值连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1,查询出员工的工资等级[salgrage]及员工信息[emp]</span><br><span class="line">select t1.*,t2.* from emp t1,salgrade t2 where t1.sal&gt;=t2.losal and t1.sal&lt;=t2.hisal</span><br><span class="line">||--等价写法</span><br><span class="line">select t1.*,t2.* from emp t1,salgrade t2 where t1.sal between t2.losal and t2.hisal</span><br></pre></td></tr></table></figure>

<h2 id="12-7-自连接"><a href="#12-7-自连接" class="headerlink" title="12.7 自连接"></a>12.7 自连接</h2><p>特点：自己连接自己</p>
<p>何时使用：用户需要的数据来源同一张表的不同行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1,查询出员工信息及员的直接领导名字【差一条数据SQL92解决不了】</span><br><span class="line">SELECT T1.*,T2.ENAME AS 领导名字 FROM EMP T1,EMP T2 WHERE T1.MGR=T2.EMPNO</span><br></pre></td></tr></table></figure>

<h2 id="12-8-三表连查"><a href="#12-8-三表连查" class="headerlink" title="12.8 三表连查"></a>12.8 三表连查</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">综合 </span><br><span class="line">1，查询出员工信息[emp]，及部门名称[dept] 及员工的工资等级[salgrade]</span><br><span class="line">SELECT T1.*,T2.DNAME,T3.GRADE FROM EMP T1,DEPT T2,SALGRADE T3 </span><br><span class="line">WHERE (T1.DEPTNO=T2.DEPTNO AND T1.SAL BETWEEN T3.LOSAL AND T3.HISAL)</span><br></pre></td></tr></table></figure>

<h2 id="开发中的注意点"><a href="#开发中的注意点" class="headerlink" title="[开发中的注意点]"></a>[开发中的注意点]</h2><blockquote>
<p>如果不必使用连表查询就不用边表查询 ，尽量使用单表查询【性能问题】</p>
<p>连接查询原则上对表的个是没有限制，但是开发中尽量不要超过5张表</p>
</blockquote>
<h1 id="13，连接查询（SQL99）"><a href="#13，连接查询（SQL99）" class="headerlink" title="13，连接查询（SQL99）"></a>13，连接查询（SQL99）</h1><h2 id="1-1-SQL99语法概述"><a href="#1-1-SQL99语法概述" class="headerlink" title="1.1 SQL99语法概述"></a>1.1 <strong>SQL99语法概述</strong></h2><p><strong>SQL92的语法规则的缺点：</strong></p>
<p>语句过滤条件和表连接的条件都放到了where子句中 。</p>
<p>当条件过多时，联结条件多，过滤条件多时，就容易造成混淆</p>
<p><strong>SQL99修正了整个缺点，把联结条件，过滤条件分开来，包括以下新的TABLE JOIN的句法结构：</strong></p>
<p>交叉连接（Cross join） </p>
<p>自然连接（Natural join）</p>
<p>使用Using子句建立连接</p>
<p>使用On子句建立连接</p>
<p>连接（ Outer join ）</p>
<p>​		 内连接INNER JOIN</p>
<p>​		 左连接LEFT JOIN</p>
<p>​		右连接RIGHT JOIN</p>
<h2 id="13-2-语法"><a href="#13-2-语法" class="headerlink" title="13.2 语法"></a>13.2 <strong>语法</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表</span><br><span class="line">from table1</span><br><span class="line">[cross join table2] |                                    //1：交叉连接</span><br><span class="line">[natural join table2] |                                  //2：自然连接</span><br><span class="line">[join table2 using (字段名)] |                      //3：using子句</span><br><span class="line">[join table2 on (table1.column_name = table2.column_name)] | //4：on子句</span><br><span class="line">[(left | right | full outer) join table2</span><br><span class="line">on (table1.column_name = table2.column_name)]; //5：左/右/满外连接</span><br><span class="line">WHERE 过滤条件</span><br></pre></td></tr></table></figure>

<h2 id="13-3-交叉连接"><a href="#13-3-交叉连接" class="headerlink" title="13.3 交叉连接"></a>13.3 交叉连接</h2><p>Cross join产生了一个笛卡尔集，其效果等同于在两个表进行连接时未使用WHERE子句限定连接条件;</p>
<p>可以使用where条件从笛卡尔集中选出满足条件的记录。</p>
<p>语法  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select 字段列表 </span><br><span class="line">from  table1 cross join table 2 </span><br><span class="line">select 字段列表 from table1,table2  [sql92写]</span><br></pre></td></tr></table></figure>

<h2 id="13-4-自然连接"><a href="#13-4-自然连接" class="headerlink" title="13.4 自然连接"></a>13.4 自然连接</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Natural join基于两个表中的全部同名列建立等值连接</span><br><span class="line">  从两个表中选出同名列做等值连接</span><br><span class="line">  如果两个表中同名列的数据类型不同，则出错</span><br><span class="line">  不允许在参照列上使用表名或者别名作为前缀</span><br><span class="line">  自然连接的结果不保留重复的属性</span><br><span class="line">  </span><br><span class="line"> select empno, ename, sal, deptno, dname</span><br><span class="line">from emp natural join dept</span><br></pre></td></tr></table></figure>

<h2 id="13-5-Using关键字"><a href="#13-5-Using关键字" class="headerlink" title="13.5 Using关键字"></a>13.5 Using关键字</h2><p>如果不希望参照被连接表的所有同名列进行等值连接，自然连接将无法满足要求，可以在连接时使用USING子句来设置用于等值连接的列（参照列）名。</p>
<p>using子句引用的列在sql任何地方不能使用表名或者别名做前缀</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM EMP T1 JOIN DEPT T2 USING(DEPTNO);</span><br></pre></td></tr></table></figure>

<h2 id="13-6-On子句"><a href="#13-6-On子句" class="headerlink" title="13.6 On子句"></a>13.6 <strong>On子句</strong></h2><p>自然连接的条件是基于表中所有同名列的等值连接</p>
<p>为了设置任意的连接条件或者指定连接的列，需要使用ON子句</p>
<p>连接条件与其它的查询条件分开书写</p>
<p>使用ON 子句使查询语句更容易理解</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查询出员工信息[emp]，及部门名称[dept] 及员工的工资等级[salgrade] 并只显示职位为 CLERK SALESMAN MANAGER</span><br><span class="line"><span class="keyword">SELECT</span> T1.<span class="operator">*</span>,T2.DNAME,T2.LOC <span class="keyword">FROM</span> EMP T1 <span class="keyword">JOIN</span> DEPT T2 <span class="keyword">JOIN</span> salgrade T3 </span><br><span class="line"><span class="keyword">ON</span>(T1.DEPTNO<span class="operator">=</span>T2.DEPTNO <span class="keyword">AND</span> T1.SAL <span class="keyword">BETWEEN</span> T3.LOSAL <span class="keyword">AND</span> T3.HISAL) </span><br><span class="line"><span class="keyword">WHERE</span> T1.JOB <span class="keyword">IN</span>(<span class="string">&#x27;CLERK&#x27;</span>,<span class="string">&#x27;SALESMAN&#x27;</span>,<span class="string">&#x27;MANAGER&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="13-7-外连接"><a href="#13-7-外连接" class="headerlink" title="13.7 外连接"></a>13.7 <strong>外连接</strong></h2><h3 id="13-7-1-左外联接"><a href="#13-7-1-左外联接" class="headerlink" title="13.7.1 左外联接"></a>13.7.1 <strong>左外联接</strong></h3><p>​    两个表在连接过程中除返回满足连接条件的行以外，还返回左表中不满足条件的行，这种连接称为左外联接。</p>
<h3 id="13-7-2-右外联接"><a href="#13-7-2-右外联接" class="headerlink" title="13.7.2 右外联接"></a>13.7.2 <strong>右外联接</strong></h3><p>​    两个表在连接过程中除返回满足连接条件的行以外，还返回右表中不满足条件的行，这种连接称为右外联接。</p>
<h3 id="13-7-3-满外联接"><a href="#13-7-3-满外联接" class="headerlink" title="13.7.3 满外联接"></a>13.7.3 <strong>满外联接</strong></h3><p>​    两个表在连接过程中除返回满足连接条件的行以外，还返回两个表中不满足条件的所有行，这种连接称为满外联接。</p>
<p>内连接:在SQL99规范中，内连接只返回满足连接条件的数据。</p>
<h3 id="13-7-4-外连接举例"><a href="#13-7-4-外连接举例" class="headerlink" title="13.7.4 外连接举例"></a>13.7.4 <strong>外连接举例</strong></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t1.deptno, t1.dname,t2.empno,t2.ename <span class="keyword">from</span> dept t1 <span class="keyword">left</span> <span class="keyword">join</span> emp t2 <span class="keyword">on</span>(t1.deptno<span class="operator">=</span>t2.deptno);</span><br></pre></td></tr></table></figure>

<h1 id="14-子查询"><a href="#14-子查询" class="headerlink" title="14. 子查询"></a>14. <strong>子查询</strong></h1><h2 id="14-1-问题引入"><a href="#14-1-问题引入" class="headerlink" title="14.1 问题引入"></a>14.1 <strong>问题引入</strong></h2><p>如何查得所有比“CLARK”工资高的员工的信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">如何查得所有比&quot;CLARK&quot;工资高的员工的信息</span><br><span class="line">	<span class="number">1</span>,根据CLARK的名字找到他的工资</span><br><span class="line">	<span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;CLARK&#x27;</span></span><br><span class="line">	<span class="number">2</span>,再拿着上一个查询的结果去所有数据里面比较</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> SAL <span class="operator">&gt;</span>(<span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;CLARK&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>思考：查询工资高于平均工资的雇员名字和工资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>,查询出平均工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(SAL) <span class="keyword">FROM</span> EMP;</span><br><span class="line"><span class="number">2</span>,使用<span class="number">1</span>的结果再去查询所有员工进行比较</span><br><span class="line"><span class="keyword">SELECT</span> ENAME,SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> SAL<span class="operator">&gt;</span>(<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(SAL) <span class="keyword">FROM</span> EMP)</span><br></pre></td></tr></table></figure>

<p>思考：查询和SCOTT同一部门且比他工资低的雇员名字和工资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>，根据SCOTT的名字找到部门编号</span><br><span class="line"><span class="keyword">SELECT</span> DEPTNO <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME <span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span></span><br><span class="line"><span class="number">2</span>，根据SCOTT的名字找到工资</span><br><span class="line"><span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span></span><br><span class="line"><span class="number">3</span>，使用<span class="number">1</span>和<span class="number">2</span>结果再去查询</span><br><span class="line"><span class="keyword">SELECT</span> ENAME,SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">=</span>(<span class="keyword">SELECT</span> DEPTNO <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME <span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>)</span><br><span class="line"><span class="keyword">AND</span> SAL <span class="operator">&lt;</span>(<span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="14-2-语法格式："><a href="#14-2-语法格式：" class="headerlink" title="14.2 语法格式："></a>14.2 <strong>语法格式：</strong></h2><p>select 字段列表   from table</p>
<p>​    where 表达式  operator  (select 字段列表  from table);</p>
<h2 id="14-3-特点"><a href="#14-3-特点" class="headerlink" title="14.3 特点"></a>14.3 <strong>特点</strong></h2><p>子查询在主查询前执行一次</p>
<p>主查询使用子查询的结果</p>
<p>使用子查询注意事项</p>
<p>在查询是基于未知值时应考虑使用子查询</p>
<p><strong>子查询必须包含在括号内</strong></p>
<p>建议将子查询放在比较运算符的右侧，以增强可读性。</p>
<p>如果子查询返回单行结果，则为单行子查询，可以在主查询中对其使用相应的单行记录比较运算符</p>
<p>如果子查询返回多行结果，则为多行子查询，此时不允许对其使用单行记录比较运算符</p>
<h2 id="14-4-单行子查询"><a href="#14-4-单行子查询" class="headerlink" title="14.4 单行子查询"></a>14.4 <strong>单行子查询</strong></h2><p>单行子查询只返回一行记录</p>
<p>对单行子查询可使用单行记录比较运算符</p>
<p>&lt; 、  &gt; 、  &#x3D; 、 &gt;&#x3D;、  &lt;&#x3D; 、 &lt;&gt;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">思考：查询工资最高的雇员名字和工资。</span><br><span class="line"><span class="number">1</span>,使用函数找到所有员的中的最高工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(SAL) <span class="keyword">FROM</span> EMP;</span><br><span class="line"><span class="number">2</span>,使用<span class="number">1</span>的结果去emp表里面查询</span><br><span class="line"><span class="keyword">SELECT</span> ENAME,SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> SAL<span class="operator">=</span>(<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(SAL) <span class="keyword">FROM</span> EMP)</span><br><span class="line">查询职务和SCOTT相同，比SCOTT雇佣时间早的雇员信息</span><br><span class="line"><span class="number">1</span>,查询出SCOTT的职务[job]</span><br><span class="line"><span class="keyword">SELECT</span> JOB <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>;</span><br><span class="line"><span class="number">2</span>,查询出SCOTT的雇佣时间</span><br><span class="line"><span class="keyword">SELECT</span> HIREDATE <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>;</span><br><span class="line"><span class="number">3</span>，使用<span class="number">1</span>和<span class="number">2</span>的结果再次进行查询</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> JOB<span class="operator">=</span>(<span class="keyword">SELECT</span> JOB <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>)</span><br><span class="line">	<span class="keyword">AND</span> HIREDATE<span class="operator">&lt;</span>(<span class="keyword">SELECT</span> HIREDATE <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>)</span><br><span class="line">	</span><br><span class="line">查询工资比SCOTT高或者雇佣时间比SCOTT早的雇员的编号和名字</span><br><span class="line"><span class="number">1</span>,查询出SCOTT的工资</span><br><span class="line"><span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>;</span><br><span class="line"><span class="number">2</span>，查询出SCOTT的入职时间</span><br><span class="line"><span class="keyword">SELECT</span> HIREDATE <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>;</span><br><span class="line"><span class="number">3</span>,使用上面的结果再次查询</span><br><span class="line"><span class="keyword">SELECT</span> ENAME,EMPNO <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> SAL<span class="operator">&gt;</span>(<span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>)</span><br><span class="line">				<span class="keyword">OR</span> HIREDATE <span class="operator">&lt;</span>(<span class="keyword">SELECT</span> HIREDATE <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> ENAME<span class="operator">=</span><span class="string">&#x27;SCOTT&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="14-5-多行子查询"><a href="#14-5-多行子查询" class="headerlink" title="14.5 多行子查询"></a>14.5 <strong>多行子查询</strong></h2><p>多行子查询返回多行记录</p>
<p>对多行子查询只能使用多行记录比较运算符</p>
<p>ALL 和子查询返回的所有值比较</p>
<p>ANY 和子查询返回的任意一个值比较</p>
<p>IN 等于列表中的任何一个</p>
<figure class="highlight sql"><figcaption><span>lite</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP;</span><br><span class="line">查询工资低于任何一个<span class="string">&#x27;CLERK&#x27;</span>的工资的雇员信息。</span><br><span class="line"><span class="number">1</span>，查询出所有CLERK的工资</span><br><span class="line"><span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> JOB<span class="operator">=</span><span class="string">&#x27;CLERK&#x27;</span></span><br><span class="line"><span class="number">2</span>,比较</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> SAL<span class="operator">&lt;</span> <span class="keyword">ANY</span>(<span class="keyword">SELECT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> JOB<span class="operator">=</span><span class="string">&#x27;CLERK&#x27;</span>)</span><br><span class="line"></span><br><span class="line">查询工资比所有的 <span class="string">&#x27;SALESMAN&#x27;</span>都高的雇员的编号、名字和工资。</span><br><span class="line"><span class="number">1</span>,查询SALESMAN的所有工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> JOB<span class="operator">=</span><span class="string">&#x27;SALESMAN&#x27;</span></span><br><span class="line"><span class="number">2</span>,比较</span><br><span class="line"><span class="keyword">SELECT</span> EMPNO,ENAME,SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> SAL<span class="operator">&gt;</span><span class="keyword">ALL</span>(<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> SAL <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> JOB<span class="operator">=</span><span class="string">&#x27;SALESMAN&#x27;</span>)</span><br><span class="line"></span><br><span class="line">查询部门<span class="number">20</span>中职务同部门<span class="number">10</span>的雇员一样的雇员信息。</span><br><span class="line"><span class="number">1</span>,查询部门<span class="number">10</span>中的所有职务</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> JOB <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">=</span><span class="number">10</span></span><br><span class="line"><span class="number">2</span>,查询</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">=</span><span class="number">20</span> <span class="keyword">AND</span> JOB <span class="keyword">IN</span>(<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> JOB <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">=</span><span class="number">10</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="14-6-练习"><a href="#14-6-练习" class="headerlink" title="14.6 练习"></a>14.6 练习</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">找出部门编号为<span class="number">20</span>的所有员工中收入最高的职员</span><br><span class="line"><span class="number">1</span>,找出<span class="number">20</span>部门中收入最高的工资</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(SAL) <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">=</span><span class="number">20</span></span><br><span class="line"><span class="number">2</span>,再查询<span class="number">20</span>里面的员工使用<span class="number">1</span>的结果去比较</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">=</span><span class="number">20</span> <span class="keyword">AND</span>  SAL<span class="operator">=</span>(<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(SAL) <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> DEPTNO<span class="operator">=</span><span class="number">20</span>)</span><br><span class="line">查询每个部门平均薪水的等级</span><br><span class="line"><span class="number">1</span>，查询出部门的平均薪水</span><br><span class="line"><span class="keyword">SELECT</span> DEPTNO,<span class="built_in">AVG</span>(SAL) <span class="keyword">AS</span> AVGSAL <span class="keyword">FROM</span> EMP <span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO;</span><br><span class="line"><span class="number">2</span>,使用<span class="number">1</span>的结果和salgrade连接查询</span><br><span class="line"><span class="keyword">SELECT</span> T1.<span class="operator">*</span>, T2.<span class="operator">*</span> <span class="keyword">FROM</span> salgrade T1 <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> DEPTNO,<span class="built_in">AVG</span>(SAL) <span class="keyword">AS</span> AVGSAL <span class="keyword">FROM</span> EMP <span class="keyword">GROUP</span> <span class="keyword">BY</span> DEPTNO) T2 <span class="keyword">ON</span>(T2.AVGSAL <span class="keyword">BETWEEN</span> T1.LOSAL <span class="keyword">AND</span> T1.HISAL)</span><br></pre></td></tr></table></figure>

<h1 id="15，视图"><a href="#15，视图" class="headerlink" title="15，视图"></a>15，视图</h1><h2 id="15-1-视图的定义及作用"><a href="#15-1-视图的定义及作用" class="headerlink" title="15.1 视图的定义及作用"></a>15.1 <strong>视图的定义及作用</strong></h2><h3 id="15-1-1-定义"><a href="#15-1-1-定义" class="headerlink" title="15.1.1 定义"></a>15.1.1 <strong>定义</strong></h3><p>​       视图是从若干基本表和（或）其他视图构造出来的表。</p>
<p>在创建一个视图时，只是存放的视图的定义，也即是动态检索数据的查询语句，而并不存放视图对应的数据</p>
<p>在用户使用视图时才去求相对应的数据。所以视图被称作“虚表”</p>
<h3 id="15-1-2-作用"><a href="#15-1-2-作用" class="headerlink" title="15.1.2 作用"></a>15.1.2 <strong>作用</strong></h3><p>​       可以限制对数据的访问，可以给用户授予表的特定部分的访问权限而不是整个表的访问权限。</p>
<p>可以使复杂的查询变的简单。在编写查询后，可以方便地重用它而不必知道他的基本查询细节。</p>
<p>提供了对相同数据的不同显示</p>
<h2 id="15-2-视图的创建和删除"><a href="#15-2-视图的创建和删除" class="headerlink" title="15.2 视图的创建和删除"></a>15.2 视图的创建和删除</h2><h3 id="15-2-1-创建或修改单表视图"><a href="#15-2-1-创建或修改单表视图" class="headerlink" title="15.2.1 创建或修改单表视图"></a>15.2.1 <strong>创建或修改单表视图</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW MYVIEW1</span><br><span class="line">AS</span><br><span class="line">SELECT EMPNO,ENAME,JOB,SAL FROM EMP;</span><br></pre></td></tr></table></figure>

<h3 id="15-2-2-视图的添加数据【了解】"><a href="#15-2-2-视图的添加数据【了解】" class="headerlink" title="15.2.2 视图的添加数据【了解】"></a>15.2.2 视图的添加数据【了解】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1，如果视图里面的数据都来源一同一张表，并具没有包含的数据都是可以为空的，那么我们可以使用INSERT 去向这个视图里面添加数据</span><br><span class="line">2，如果视图里面的数据来源于多张表，那么不能一次性修改或添加多个基表（视图里面包含的原始表）的数据</span><br></pre></td></tr></table></figure>

<h3 id="15-2-3-视图的删除"><a href="#15-2-3-视图的删除" class="headerlink" title="15.2.3 视图的删除"></a>15.2.3 视图的删除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">删除表  DROP TABLE IF EXISTS &lt;表名&gt;</span><br><span class="line">删除数据 DELETE FROM &lt;表名&gt; WHERE 条件</span><br><span class="line">删除视图 DROP VIEW &lt;视图名&gt;</span><br></pre></td></tr></table></figure>

<h2 id="15-3-统计视图"><a href="#15-3-统计视图" class="headerlink" title="15.3 统计视图"></a>15.3 统计视图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">要求，创建一个视图，并显示部门名称 部门编号，部门的平均工资 ，最高工资，最低工资，部门人数，平均工资等级</span><br><span class="line">要使用的表 emp dept salgrede</span><br><span class="line">CREATE OR REPLACE VIEW MYVIEW3</span><br><span class="line">AS </span><br><span class="line">SELECT</span><br><span class="line">	T1.DNAME 部门名称,</span><br><span class="line">	T2.DEPTNO 部门编号,</span><br><span class="line">	T2.SALAVG 平均工资,</span><br><span class="line">	T2.SALMAX 最高工资,</span><br><span class="line">	T2.SALMIN 最低工资,</span><br><span class="line">	T2.EMPCOUNT 员工人数,</span><br><span class="line">	T3.GRADE   平均工资等级</span><br><span class="line">FROM</span><br><span class="line">	DEPT T1</span><br><span class="line">	INNER JOIN (</span><br><span class="line">	SELECT</span><br><span class="line">		DEPTNO,</span><br><span class="line">		AVG( SAL ) SALAVG,</span><br><span class="line">		MAX( SAL ) SALMAX,</span><br><span class="line">		MIN( SAL ) SALMIN,</span><br><span class="line">		COUNT( 1 ) EMPCOUNT </span><br><span class="line">	FROM</span><br><span class="line">		EMP </span><br><span class="line">	GROUP BY</span><br><span class="line">		DEPTNO </span><br><span class="line">	) T2</span><br><span class="line">	INNER JOIN SALGRADE T3 </span><br><span class="line">	ON ( T1.DEPTNO = T2.DEPTNO AND T2.SALAVG BETWEEN T3.LOSAL AND T3.HISAL );</span><br><span class="line"></span><br><span class="line">SELECT * FROM MYVIEW3;</span><br></pre></td></tr></table></figure>

<h2 id="15-4-基于其它视图的视图"><a href="#15-4-基于其它视图的视图" class="headerlink" title="15.4 基于其它视图的视图"></a>15.4 基于其它视图的视图</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW MYVIEW4</span><br><span class="line">AS </span><br><span class="line">SELECT 部门名称,部门编号,最高工资,最低工资  FROM MYVIEW3</span><br></pre></td></tr></table></figure>

<h2 id="15-5-视图的总结"><a href="#15-5-视图的总结" class="headerlink" title="15.5 视图的总结"></a>15.5 <strong>视图的总结</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.视图对应一个查询语句；视图是（从若干基本表和（或）其他视图构造出来的）表</span><br><span class="line">2.视图进行查询，添加，修改，删除，其实就是对背后的表进行相应操作</span><br><span class="line">3 虚表 在创建一个视图时，只是存放的视图的定义，也即是动态检索数据的查询语句，而并不存放视图对应的数据</span><br><span class="line">4.视图的好处</span><br><span class="line">      1.安全 可以只显示部分行部分列的数据;可以对添加的数据进行检查；可以设置为只读视图</span><br><span class="line">      2.操作简单</span><br></pre></td></tr></table></figure>

<h1 id="16-MySQL存储引擎"><a href="#16-MySQL存储引擎" class="headerlink" title="16. MySQL存储引擎"></a>16. MySQL存储引擎</h1><h2 id="16-1-InnoDB-引擎-MySQL5-5以后默认使用"><a href="#16-1-InnoDB-引擎-MySQL5-5以后默认使用" class="headerlink" title="16.1, InnoDB 引擎(MySQL5.5以后默认使用)"></a>16.1, <strong>InnoDB 引擎(MySQL5.5以后默认使用)</strong></h2><p>MySQL 5.5 及以后版本中的默认存储引擎，他的优点如下：</p>
<p>灾难恢复性好</p>
<p><strong>支持事务</strong></p>
<p><strong>使用行级锁</strong></p>
<p>支持外键关联</p>
<p>支持热备份</p>
<p>对于InnoDB引擎中的表，其数据的物理组织形式是簇表（Cluster Table），主键索引和数据是在一起的，数据按主键的顺序物理分布</p>
<p>实现了缓冲管理，不仅能缓冲索引也能缓冲数据，并且会自动创建散列索引以加快数据的获取</p>
<p>支持热备份</p>
<h2 id="16-2-MyISAM引擎"><a href="#16-2-MyISAM引擎" class="headerlink" title="16.2 MyISAM引擎"></a>16.2 <strong>MyISAM引擎</strong></h2><p>特性如下：</p>
<p>不支持事务</p>
<p>使用表级锁，并发性差</p>
<p>主机宕机后，MyISAM表易损坏，灾难恢复性不佳</p>
<p>可以配合锁，实现操作系统下的复制备份、迁移</p>
<p>只缓存索引，数据的缓存是利用操作系统缓冲区来实现的。可能引发过多的系统调用且效率不佳</p>
<p>数据紧凑存储，因此可获得更小的索引和更快的全表扫描性能</p>
<h2 id="16-3-两种存储引擎的大致区别表现在："><a href="#16-3-两种存储引擎的大致区别表现在：" class="headerlink" title="16.3 两种存储引擎的大致区别表现在："></a>16.3 <strong>两种存储引擎的大致区别表现在：</strong></h2><p>1）InnoDB支持事务，MyISAM不支持，这一点是非常之重要。事务是一种高级的处理方式，如在一些列增删改中只要哪个出错还可以回滚还原，而MyISAM就不可以了。</p>
<p>2）MyISAM适合查询以及插入为主的应用，InnoDB适合频繁修改以及涉及到安全性较高的应用</p>
<p>3）InnoDB支持外键，MyISAM不支持</p>
<p>4）从MySQL5.5.5以后，InnoDB是默认引擎</p>
<p>5）InnoDB不支持FULLTEXT类型的索引</p>
<p>6）InnoDB中不保存表的行数，如select count(<em>) from table时，InnoDB需要扫描一遍整个表来计算有多少行，但是MyISAM只要简单的读出保存好的行数即可。注意的是，当count(</em>)语句包含where条件时MyISAM也需要扫描整个表。</p>
<p>7）对于自增长的字段，InnoDB中必须包含只有该字段的索引，但是在MyISAM表中可以和其他字段一起建立联合索引。</p>
<p>8）清空整个表时，InnoDB是一行一行的删除，效率非常慢。MyISAM则会重建表。</p>
<p>9）InnoDB支持行锁（某些情况下还是锁整表，如 update table set a&#x3D;1 where user like ‘%lee%’</p>
<p>有人说MYISAM只能用于小型应用，其实这只是一种偏见。</p>
<p>如果数据量比较大，这是需要通过升级架构来解决，比如分表分库，读写分离，而不是单纯地依赖存储引擎。</p>
<p>现在一般都是选用InnoDB了，主要是MyISAM的全表锁，读写串行问题，并发效率锁表，效率低，MyISAM对于读写密集型应用一般是不会去选用的。</p>
<h2 id="16-4-总结"><a href="#16-4-总结" class="headerlink" title="16.4 总结"></a>16.4 <strong>总</strong>结</h2><p>1.MyISAM类型不支持事务处理等高级处理，而InnoDB类型支持。</p>
<p>2.MyISAM类型的表强调的是性能，其执行速度比InnoDB类型更快，但是不提供事务支持，而InnoDB提供事务支持已经外部键等高级数据库功能。</p>
<h2 id="16-5，相关设置"><a href="#16-5，相关设置" class="headerlink" title="16.5，相关设置"></a>16.5，相关设置</h2><h3 id="16-5-1，创建表时设置"><a href="#16-5-1，创建表时设置" class="headerlink" title="16.5.1，创建表时设置"></a>16.5.1，创建表时设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table test_table( </span><br><span class="line">id int(11)</span><br><span class="line">)ENGINE=INNODB ,DEFAULT CHARSET = UTF8;</span><br></pre></td></tr></table></figure>

<h3 id="16-5-2，设置默认的存储引擎"><a href="#16-5-2，设置默认的存储引擎" class="headerlink" title="16.5.2，设置默认的存储引擎"></a>16.5.2，设置默认的存储引擎</h3><p>C:\ProgramData\MySQL\MySQL Server 5.7\my.ini</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282215070.png" alt="1637545745262"></p>
<h1 id="17-事务-mysql"><a href="#17-事务-mysql" class="headerlink" title="17.事务[mysql]"></a>17.事务[mysql]</h1><h2 id="17-1-什么是事务"><a href="#17-1-什么是事务" class="headerlink" title="17.1 什么是事务"></a>17.1 什么是事务</h2><p>完成一个事情需要的一系列步骤(操作)，这些操作要么同时成功，要么同时失败</p>
<h2 id="17-2-事务的基本操作"><a href="#17-2-事务的基本操作" class="headerlink" title="17.2 事务的基本操作"></a>17.2 <strong>事务的基本操作</strong></h2><p>场景：有两个账户分别为张三和李四，他们默认都有1000块钱的余额。在这两个账户之间进行转账。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#1 创建账户表</span><br><span class="line">create table tb_account(</span><br><span class="line">id int(11) auto_increment,</span><br><span class="line">user_name varchar(30) not null,</span><br><span class="line">account_blance  int(11) not null, -- 账户余额</span><br><span class="line">primary key (id)    </span><br><span class="line">)ENGINE=INNODB,default charset =UTF8MB4;</span><br><span class="line">#2 向账户表里面添加两条测试数据</span><br><span class="line">insert into tb_account(user_name,account_blance)</span><br><span class="line">values(&#x27;ZS&#x27;,1000),(&#x27;LS&#x27;,1000);</span><br><span class="line"># 3 执行张三向李四转账500</span><br><span class="line"># ZS账户-500，LS账户+500</span><br><span class="line"># 下面两个update语句要么同时执行成功要么同时执行失败</span><br><span class="line"># 执行下列SQL语句会出现问题：张三的钱减少了，李四的钱没有加上。因为此时的两个update语句并没有使用事务来托管</span><br><span class="line">update tb_account set account_blance=account_blance-500 where id=1;</span><br><span class="line"># 银行转帐异常情况：如机机房停电</span><br><span class="line">update tb_account set account_blance=account_blance+500 where id=2;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="17-3-事务的四大特征"><a href="#17-3-事务的四大特征" class="headerlink" title="17.3 事务的四大特征"></a>17.3 <strong>事务的四大特征</strong></h2><p>原子性：事务每一步都是不可再分</p>
<p>一致性：张三和李四账户一共2000块钱，不管转账多少次总金额不变</p>
<p>持久性：当一个事务执行成功(完毕)，数据会持久化到磁盘的数据文件中。例如转账成功：张三余额变为500，李四余额变为1500.</p>
<p>隔离性：A事务和B事务同时操作一份数据，相互之间不影响。</p>
<h2 id="17-4-事务的提交方式"><a href="#17-4-事务的提交方式" class="headerlink" title="17.4 事务的提交方式"></a>17.4 <strong>事务的提交方式</strong></h2><p>1 自动提交，MySQL默认为自动提交。</p>
<p> 不需要写commit;就会自动将DML语句持久化提交</p>
<p>2 手动提交，Oracle默认手动提交。</p>
<p>如何在MySQL中查看提交方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询结果为1表示自动提交，0表示手动提交 </span><br><span class="line">select @@autocommit;</span><br><span class="line">-- 修改提交方式（自动提交修改为手动提交）</span><br><span class="line">set @@autocommit = 0 ;</span><br></pre></td></tr></table></figure>

<h2 id="17-5-事务的基本操作"><a href="#17-5-事务的基本操作" class="headerlink" title="17.5 事务的基本操作"></a>17.5 <strong>事务的基本操作</strong></h2><p>1 开启事务</p>
<blockquote>
<p> start transaction;</p>
</blockquote>
<p>2 提交事务</p>
<blockquote>
<p> commit;</p>
</blockquote>
<p>3 回滚事务</p>
<blockquote>
<p> rollback;</p>
</blockquote>
<p>注意：一旦使用start transaction;开启事务那么自动提交将失效</p>
<p>  如果所有操作都正常执行使用commit;提交事务</p>
<p>  当发生异常情况回滚事务，数据(此时为tb_account表)通常回滚到开启事务之前的状态</p>
<h2 id="17-6-转账的操作"><a href="#17-6-转账的操作" class="headerlink" title="17.6 转账的操作"></a>17.6 转账的操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 1 开启事务</span><br><span class="line">start transaction;</span><br><span class="line">-- 2 执行SQL语句</span><br><span class="line">update tb_account set account_blance=account_blance-500 where id=1;</span><br><span class="line"> 手机转账异常情况：转账过程中手机没电了</span><br><span class="line">update tb_account set account_blance=account_blance+500 where id=2;</span><br><span class="line">-- 3 如果SQL语句全部执行成功就提交事务，如果其中任何一步执行失败，立刻回滚事务</span><br><span class="line">-- 此时第一个update执行成功，第二个update语句执行失败了,并没有提交事务，查询结果如下：</span><br><span class="line">select * from tb_account;</span><br><span class="line">/*</span><br><span class="line">+----+-----------+----------------+</span><br><span class="line">| id | user_name | account_blance |</span><br><span class="line">+----+-----------+----------------+</span><br><span class="line">|  1 | ZS        |            500 |</span><br><span class="line">|  2 | LS        |           1000 |</span><br><span class="line">+----+-----------+----------------+</span><br><span class="line">*/</span><br><span class="line">-- 问题：张三账户的余额减少了，李账户余额没有增加。这就是脏数据</span><br><span class="line">-- 此时需要将脏数据回滚到开启事务之前</span><br><span class="line">rollback;</span><br><span class="line">-- 回滚完毕再次查询</span><br><span class="line">select * from tb_account;</span><br><span class="line">-- 此时事务回滚到开启之前的状态</span><br><span class="line">/*</span><br><span class="line">+----+-----------+----------------+</span><br><span class="line">| id | user_name | account_blance |</span><br><span class="line">+----+-----------+----------------+</span><br><span class="line">|  1 | ZS        |           1000 |</span><br><span class="line">|  2 | LS        |           1000 |</span><br><span class="line">+----+-----------+----------------+</span><br><span class="line">*/</span><br><span class="line">-- 一个事务一旦开启了，在没有执行commit或者rollback之前事务不会结束</span><br><span class="line">-- 相关面试题：工作中有没有用到事务？请解释事务的概念？不使用事务会发生什么问题？使用事务能够解决什么问题？解释事务的四大特征[隔离级别]？</span><br></pre></td></tr></table></figure>

<h2 id="17-7-事务隔离级别"><a href="#17-7-事务隔离级别" class="headerlink" title="17.7 事务隔离级别"></a>17.7 <strong>事务隔离级别</strong></h2><h3 id="17-7-1-ISO定义的四大隔离级别"><a href="#17-7-1-ISO定义的四大隔离级别" class="headerlink" title="17.7.1 ISO定义的四大隔离级别"></a>17.7.1 <strong>ISO定义的四大隔离级别</strong></h3><table>
<thead>
<tr>
<th>事务隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>1读未提交（read-uncommitted）</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>2读已提交（read-committed）</td>
<td>否</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>3可重复读（repeatable-read）</td>
<td>否</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>4串行化（serializable）</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
</tbody></table>
<p>查询隔离级别select @@tx_isolation</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282215303.jpg" alt="img"> </p>
<p>隔离级别1最低，4最高 。隔离级别越高就越安全，同时内存资源消耗也越大。隔离级别越高效率越低下。</p>
<p>工作中：1和4都不用，只会在2和3之间切换</p>
<p><strong>MySQL默认的事务隔离级别为3，Oracle默认隔离界别默认为2</strong></p>
<h3 id="17-7-2-并发下的脏读，不可重复读，幻读的问题"><a href="#17-7-2-并发下的脏读，不可重复读，幻读的问题" class="headerlink" title="17.7.2 并发下的脏读，不可重复读，幻读的问题"></a>17.7.2 <strong>并发下的脏读，不可重复读，幻读的问题</strong></h3><p>问题：不使用事务隔离级别会引发啥问题？使用事务隔离级别能够解决什么问题</p>
<h4 id="17-7-2-1-什么是脏读"><a href="#17-7-2-1-什么是脏读" class="headerlink" title="17.7.2.1 什么是脏读"></a>17.7.2.1 什么是脏读</h4><p><strong>一个事务(A</strong>)读取到另一个事务(B)没有提交的数据（破坏了隔离性）</p>
<p>  例如：事务A开启事务做转账，DML语句执行成功但是没有commit；事务B在另一个窗口开启了，执行Select语句读取tb_account数据，读取到的结果是事务A没有提交的数据。</p>
<h4 id="17-7-2-不可重复读问题"><a href="#17-7-2-不可重复读问题" class="headerlink" title="17.7.2. 不可重复读问题"></a>17.7.2. 不可重复读问题</h4><p><strong>同一个事务中多次读取到的数据不一致(破坏了一致性，update和delete)</strong></p>
<p>  例如：事务A开启事务做转账，DML语句执行成功但是没有commit；；事务B在另一个窗口开启了，执行Select语句读取tb_account数据，读取的结果正确（1000,1000）.</p>
<p>  事务A里面提交了事务。然后事务B再次做Select操作查询结果也正确(500,1500)</p>
<p>  问题：事务B在一次事务中对tb_account表做了两次select操作，两次操作查询的结果不一致。</p>
<h4 id="17-7-2-3幻读问题"><a href="#17-7-2-3幻读问题" class="headerlink" title="17.7.2.3幻读问题"></a>17.7.2.3幻读问题</h4><p><strong>事务A插入一条数据，能够使用select获取结果，此时事务B几乎同时插入了一条或者大量数据，此时事务A看不到事务B的更新</strong>（破坏了一致性，insert）。</p>
<h3 id="17-7-3-事务隔离级别的设置查询"><a href="#17-7-3-事务隔离级别的设置查询" class="headerlink" title="17.7.3 事务隔离级别的设置查询"></a>17.7.3 事务隔离级别的设置查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> session transaction isolation level  READ UNCOMMITTED;  #读未提交</span><br><span class="line"><span class="keyword">set</span> session transaction isolation level  READ COMMITTED;    #读已提交</span><br><span class="line"><span class="keyword">set</span> session transaction isolation level  REPEATABLE<span class="operator">-</span>READ;   #可重复读</span><br><span class="line"><span class="keyword">set</span> session transaction isolation level  serializable;   #串型化</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@tx</span>_isolation  #查询 </span><br></pre></td></tr></table></figure>

<h3 id="17-7-4-read-uncommitted脏读测试"><a href="#17-7-4-read-uncommitted脏读测试" class="headerlink" title="17.7.4,read uncommitted脏读测试"></a>17.7.4,read uncommitted脏读测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">设置隔离级别为读未提交</span><br><span class="line"><span class="keyword">set</span> session transaction isolation level  READ UNCOMMITTED; </span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214485.png" alt="1637550774244"></p>
<h3 id="17-7-5-read-committed解决脏读"><a href="#17-7-5-read-committed解决脏读" class="headerlink" title="17.7.5,read committed解决脏读"></a>17.7.5,read committed解决脏读</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如何解决脏读问题？修改事务隔离级别：读已提交</span><br><span class="line">set session transaction isolation level read committed;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214340.png" alt="1637550994039"></p>
<h3 id="17-7-6-repeatable-read解决不可重复读问题"><a href="#17-7-6-repeatable-read解决不可重复读问题" class="headerlink" title="17.7.6,repeatable read解决不可重复读问题"></a>17.7.6,repeatable read解决不可重复读问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set session transaction isolation level repeatable read;</span><br><span class="line">数据都改成1000再按下图进行测试</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214252.png" alt="1637551222066"></p>
<h3 id="17-7-7-串行化serializable测试"><a href="#17-7-7-串行化serializable测试" class="headerlink" title="17.7.7 串行化serializable测试"></a>17.7.7 <strong>串行化serializable</strong>测试</h3><p>能够解决所有的问题，但是效率低下，它类似Java的synchronized</p>
<p>Java使用synchronized用来锁对象。MySQL使用serializable锁表，事务A开启事务，做了DML操作，但是没有提交。此时事务B开启事务，执行select操作，没有查询到数据，因为此时tb_account表被事务A占用了(锁住了)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set session transaction isolation level serializable;</span><br><span class="line"></span><br><span class="line">数据还原</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214021.png" alt="1637551581380"></p>
<h1 id="18，-索引"><a href="#18，-索引" class="headerlink" title="18， 索引"></a>18， 索引</h1><p>面试的问题：</p>
<p>1，做过SQL调优吗？</p>
<p>2，为什么索引能加快查询速度，那么是不是索引越多越好</p>
<p>3，除了索引优化，还有没有其它的数据库化方案</p>
<h2 id="18-1，什么是索引"><a href="#18-1，什么是索引" class="headerlink" title="18.1，什么是索引"></a>18.1，什么是索引</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1，大大提高MySQL的查询速度，只能提高查询速度。</span><br><span class="line">2，索引分单列索引和组合索引。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索引包含多个列。</span><br><span class="line">3，创建索引时，你需要确保该索引是应用在 SQL 查询语句的条件(一般作为 WHERE 子句的条件)</span><br><span class="line">4，建立索引会占用磁盘空间的索引文件</span><br></pre></td></tr></table></figure>



<h2 id="18-2，准备工作创建表"><a href="#18-2，准备工作创建表" class="headerlink" title="18.2，准备工作创建表"></a>18.2，准备工作创建表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS person;</span><br><span class="line">CREATE TABLE person  (</span><br><span class="line">  PID int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;编号&#x27;,</span><br><span class="line">  PNAME varchar(50)  NOT NULL COMMENT &#x27;姓名&#x27;,</span><br><span class="line">  PSEX varchar(10) NULL DEFAULT NULL COMMENT &#x27;性别&#x27;,</span><br><span class="line">	PAGE	int(11)  NOT NULL COMMENT &#x27;年龄&#x27;,</span><br><span class="line">  SAL decimal(7, 2) NULL DEFAULT NULL COMMENT &#x27;工资&#x27;,</span><br><span class="line">  PRIMARY KEY (PID)</span><br><span class="line">) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8mb4 COMMENT = &#x27;人员表&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="18-3-索引分类"><a href="#18-3-索引分类" class="headerlink" title="18.3 索引分类"></a>18.3 索引分类</h2><h3 id="18-3-1-普通索引"><a href="#18-3-1-普通索引" class="headerlink" title="18.3.1 普通索引"></a>18.3.1 普通索引</h3><p>【创建语法】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX &lt;索引名&gt; ON &lt;表名&gt;(字段)</span><br></pre></td></tr></table></figure>

<p>【删除语法】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE &lt;表名称&gt; DROP INDEX &lt;索引名称&gt;</span><br></pre></td></tr></table></figure>

<h4 id="18-3-1-1-为person表的pname列建立普通索引"><a href="#18-3-1-1-为person表的pname列建立普通索引" class="headerlink" title="18.3.1.1 为person表的pname列建立普通索引"></a>18.3.1.1 为person表的pname列建立普通索引</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX INDEX_PERSON_PNAME ON PERSON(PNAME)</span><br></pre></td></tr></table></figure>

<p>查询测试</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214074.png" alt="1637562496617"></p>
<p>看到了ALL就说明这个查询没有走索引</p>
<p>【创建索引之后再测试】</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214684.png" alt="1637562604858"></p>
<h4 id="18-3-1-2-一个表的主键生成之后会默认有一个主键索引"><a href="#18-3-1-2-一个表的主键生成之后会默认有一个主键索引" class="headerlink" title="18.3.1.2 一个表的主键生成之后会默认有一个主键索引"></a>18.3.1.2 一个表的主键生成之后会默认有一个主键索引</h4><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214027.png" alt="1637562726647"></p>
<h4 id="18-3-1-3-where-pname-like-模糊查询用到索引没有"><a href="#18-3-1-3-where-pname-like-模糊查询用到索引没有" class="headerlink" title="18.3.1.3 where pname like 模糊查询用到索引没有"></a>18.3.1.3 where pname like 模糊查询用到索引没有</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PNAME LIKE &#x27;HELLO&#x27; #走索引</span><br><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PNAME LIKE &#x27;HELLO%&#x27;  #走索引</span><br><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PNAME LIKE &#x27;%HELLO%&#x27; #不走索引</span><br></pre></td></tr></table></figure>

<h3 id="18-3-2-普通索引的压力测试"><a href="#18-3-2-普通索引的压力测试" class="headerlink" title="18.3.2 普通索引的压力测试"></a>18.3.2 普通索引的压力测试</h3><p>向person表中插入500W条数据,为pname创建一个索引，观察创建索引之前执行耗时是多长时间，创建索引之后耗时多长时间。</p>
<h4 id="【删除之前索引】"><a href="#【删除之前索引】" class="headerlink" title="【删除之前索引】"></a>【删除之前索引】</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE PERSON DROP INDEX INDEX_PERSON_PNAME;</span><br></pre></td></tr></table></figure>

<h4 id="【数据查看】"><a href="#【数据查看】" class="headerlink" title="【数据查看】"></a>【数据查看】</h4><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214197.png" alt="1637563145011"></p>
<h4 id="【创建一个生成随机字符串的函数】"><a href="#【创建一个生成随机字符串的函数】" class="headerlink" title="【创建一个生成随机字符串的函数】"></a>【创建一个生成随机字符串的函数】</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> RAND_STRING(N <span class="type">INT</span>) <span class="keyword">RETURNS</span> <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> CHARS_STR <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&#x27;</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> RETURN_STR <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> I <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	WHILE I<span class="operator">&lt;</span>N DO</span><br><span class="line">		<span class="keyword">SET</span> RETURN_STR<span class="operator">=</span>CONCAT(RETURN_STR,<span class="built_in">SUBSTRING</span>(CHARS_STR,<span class="built_in">FLOOR</span>(<span class="number">1</span><span class="operator">+</span>RAND()<span class="operator">*</span><span class="number">62</span>),<span class="number">1</span>));</span><br><span class="line">		<span class="keyword">SET</span> I<span class="operator">=</span>I<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> WHILE;</span><br><span class="line">	<span class="keyword">RETURN</span> RETURN_STR;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h4 id="【创建一个存储过程生成数据】"><a href="#【创建一个存储过程生成数据】" class="headerlink" title="【创建一个存储过程生成数据】"></a>【创建一个存储过程生成数据】</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> insert_person(<span class="keyword">in</span> max_num <span class="type">int</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">set</span> autocommit <span class="operator">=</span> <span class="number">0</span>; <span class="comment">-- 把autocommit设置成0，这样可以只提交一次，否则。。。。。</span></span><br><span class="line">	repeat</span><br><span class="line">	<span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> person (PID,PNAME,PSEX,PAGE,SAL) <span class="keyword">values</span> (i,RAND_STRING(<span class="number">5</span>),IF(RAND()<span class="operator">&gt;</span><span class="number">0.5</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>),<span class="built_in">FLOOR</span>((RAND()<span class="operator">*</span><span class="number">100</span>)<span class="operator">+</span><span class="number">10</span>),<span class="built_in">FLOOR</span>((RAND()<span class="operator">*</span><span class="number">19000</span>)<span class="operator">+</span><span class="number">1000</span>));</span><br><span class="line">	until i <span class="operator">=</span> max_num</span><br><span class="line">	<span class="keyword">end</span> repeat;</span><br><span class="line">	<span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h4 id="【再次查看数据文件】"><a href="#【再次查看数据文件】" class="headerlink" title="【再次查看数据文件】"></a>【再次查看数据文件】</h4><p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282214368.png" alt="1637565474636"></p>
<h4 id="【给PNAME创建索引】"><a href="#【给PNAME创建索引】" class="headerlink" title="【给PNAME创建索引】"></a>【给PNAME创建索引】</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX INDEX_PERSON_PNAME ON PERSON(PNAME)</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282213668.png" alt="1637565515616"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282213381.png" alt="1637565560952"></p>
<h4 id="【查询的说明】"><a href="#【查询的说明】" class="headerlink" title="【查询的说明】"></a>【查询的说明】</h4><p>【有索引】</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282213874.png" alt="1637565690233"></p>
<p>【没有索引】</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282213199.png" alt="1637565663421"></p>
<p>【四问索引】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">问题1：为person表的pname创建索引消耗了9.472秒，为什么耗时这么长？</span><br><span class="line">在person.ibd数据文件中创建了一个“目录”，目录的结构是一个B+Tree，类似Java的TreeMap，表的数据越多，索引结构越大，创建时间越长。</span><br><span class="line">问题2：没有创建索引执行WHERE PNAME耗时3.892秒，创建索引执行耗时0.03秒，为什么这么快？</span><br><span class="line">没有创建索引，进行全文检索(从person.ibd数据文件中检索所有的输入，然后在判断是否满足where条件)，创建索引不进行全文检索，直接查询索引</span><br><span class="line">问题3：创建索引之前数据文件person.ibd大小229376，创建索引之后大小319488，为什么会有这么大的变化？</span><br><span class="line">创建索引就相当于创建目录，表中的数据越大，数据文件就越多。</span><br><span class="line">问题4：INDEX_PERSON_PNAME索引的内部结构是啥？</span><br><span class="line">类似TreeMap的B+Tree</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282213228.jpg" alt="img"></p>
<h3 id="18-3-2-组合索引的创建"><a href="#18-3-2-组合索引的创建" class="headerlink" title="18.3.2 组合索引的创建"></a>18.3.2 组合索引的创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">为多个列创建复合索引</span><br><span class="line">CREATE INDEX INDEX_PERSON_AGE_SEX ON PERSON(PAGE,PSEX);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX INDEX_PERSON_AGE_SEX ON PERSON(PAGE,PSEX);</span><br><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PAGE=22 AND PSEX=&#x27;男&#x27;  #走索引</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PSEX=&#x27;男&#x27; AND PAGE=22 #走索引</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PAGE=22  #走索引</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PSEX=&#x27;男&#x27;  #不走索引</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<p>组合索引由多列构成，如果在索引里面的第一列在查询条件里面没有出现就不会走索引</p>
<h3 id="18-3-4-PERSON表的PSEX列只有2个有效值，为该列建立索引会提高查询效率吗"><a href="#18-3-4-PERSON表的PSEX列只有2个有效值，为该列建立索引会提高查询效率吗" class="headerlink" title="18.3.4 PERSON表的PSEX列只有2个有效值，为该列建立索引会提高查询效率吗"></a>18.3.4 PERSON表的PSEX列只有2个有效值，为该列建立索引会提高查询效率吗</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 为性别列创建索引【只有两个值 男  女】</span><br><span class="line">SELECT * FROM PERSON WHERE PSEX=&#x27;男&#x27;  #2.527s  [无索引的时长]</span><br><span class="line">CREATE INDEX INDEX_CUSTOMER_SEX ON PERSON(PSEX);</span><br><span class="line">EXPLAIN SELECT * FROM PERSON WHERE PSEX=&#x27;男&#x27;  #15.307s  [索引的时长]</span><br></pre></td></tr></table></figure>

<p>总结：如果数据库字段里面的值的选项少，不能创建索引</p>
<h3 id="18-3-5唯一索引的创建"><a href="#18-3-5唯一索引的创建" class="headerlink" title="18.3.5唯一索引的创建"></a>18.3.5唯一索引的创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1，在创建表时指定字段唯 一，那么系统会默认在该字段上加一个唯一索引来提高查询速度</span><br><span class="line">2，CREATE UNIQUE INDEX 索引名称 ON 表名称(列名称);来创建唯一索引</span><br></pre></td></tr></table></figure>

<h2 id="【面试题】"><a href="#【面试题】" class="headerlink" title="【面试题】"></a>【面试题】</h2><p>1，做过SQL调优吗？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">绕开这个问题，引入 索引优化，引入数据库的分库分等优化</span><br></pre></td></tr></table></figure>

<p>2，为什么索引能加快查询速度，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">索引相当于在数据库里面为我们每一条数据创建一数据库录，查询时不是直接查询数据，而是先找到的目录</span><br></pre></td></tr></table></figure>

<p>3，那么是不是索引越多越好</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">不是，因为如果是添加和修改和删除会重新调整索引里面的数据【调整过程很耗时】</span><br><span class="line">有索引的情况 </span><br><span class="line">	会降低添加  删除速度</span><br><span class="line">如果修改的字段上没有索引，那对速度没有影响</span><br></pre></td></tr></table></figure>

<p>4，除了索引优化，还有没有其它的数据库化方案</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1，对于常用查询条件创建索引</span><br><span class="line">2，开启SQL的慢查询日志</span><br><span class="line">	|--MYSQL会记录所有的查询执行的时间，开启慢查询设置超过2秒的查询就加入慢查询列表，它会把所有超过2秒的查询语做记录，我们程序员过以通过慢查询日志找到具体是哪一个SQL执行的比较，进而针对性的去优化SQL</span><br><span class="line">3，数据量大了怎么办</span><br><span class="line">	一般一个表里面的数据超过1000W条数据，就要着手考虑分库分表</span><br><span class="line">		|--分库分表的方案</span><br><span class="line">			MYSQL 自带了主从结构 和读写分离 [主数据和从数据] </span><br><span class="line">		|--配合mycat 这种数据库中间件进行分库分表的配置</span><br><span class="line">			|--一个表里面的数据量大，那么我们把这个表分成多个表，把数据分开存储</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h1 id="19，数据库设计原则"><a href="#19，数据库设计原则" class="headerlink" title="19，数据库设计原则"></a>19，数据库设计原则</h1><h2 id="19-1-数据库设置软件"><a href="#19-1-数据库设置软件" class="headerlink" title="19.1 数据库设置软件"></a>19.1 数据库设置软件</h2><p>PowerDesiger</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282213549.png" alt="1637569430047"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282212333.png" alt="1637569458826"></p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282212900.png" alt="1637569512896"></p>
<h2 id="19-2-引入三大范式"><a href="#19-2-引入三大范式" class="headerlink" title="19.2 引入三大范式"></a>19.2 引入三大范式</h2><p>目地：保证数据库设计的合理性</p>
<p>用范式来规范我们数据库的设计</p>
<h3 id="19-2-1-第一范式"><a href="#19-2-1-第一范式" class="headerlink" title="19.2.1 第一范式"></a>19.2.1 <strong>第一范式</strong></h3><p>数据库表每一列都是不可分割的基本数据项，同一列中不能有多个值  </p>
<p>简单说就是要确保每列保持原子性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">设计表</span><br><span class="line">第一版【编号 姓名  性别  年龄   地址】</span><br><span class="line">ID   NAME   SEX  AGE      ADDRESS</span><br><span class="line">1    张三    男    18      湖北省武汉市东湖新技术开发区</span><br><span class="line">第二版【编号 姓名  性别  年龄   省  市   区/镇  街道/村 】</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="19-2-2-第二范式【多对多】"><a href="#19-2-2-第二范式【多对多】" class="headerlink" title="19.2.2 第二范式【多对多】"></a>19.2.2 <strong>第二范式</strong>【多对多】</h3><p>【要求】</p>
<p>第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。</p>
<p>即在一个数据库表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中。</p>
<h3 id="19-2-3-第三范式【一对多和多对一】"><a href="#19-2-3-第三范式【一对多和多对一】" class="headerlink" title="19.2.3 第三范式【一对多和多对一】"></a>19.2.3 <strong>第三范式</strong>【一对多和多对一】</h3><p>【要求】</p>
<p>确保数据表中的每一列数据都和主键直接相关，而不能间接相关</p>
<p>属性不依赖于其他非主属性。</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282212822.jpg" alt="img"></p>
<p>分析以上的表，发现有问题存在  班级名称和班级信息出现了数据冗余</p>
<p>如何解决</p>
<p>学生表</p>
<p>班级表</p>
<p>1，学生表</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282212654.jpg" alt="img"> </p>
<p>2，班级表</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282212363.jpg" alt="img"> </p>
<h2 id="19-3-范式的优缺点"><a href="#19-3-范式的优缺点" class="headerlink" title="19.3  范式的优缺点"></a>19.3  <strong>范式的优缺点</strong></h2><h3 id="19-3-1-优点"><a href="#19-3-1-优点" class="headerlink" title="19.3.1 优点"></a>19.3.1 <strong>优点</strong></h3><p>结构合理</p>
<p>冗余较小</p>
<p>尽量避免插入删除修改异常</p>
<h3 id="19-3-2-缺点"><a href="#19-3-2-缺点" class="headerlink" title="19.3.2 缺点"></a>19.3.2 <strong>缺点</strong></h3><p>性能降低</p>
<p>多表查询比单表查询速度慢</p>
<h3 id="19-3-3-数据库的设计应该根据当前情况和需求做出灵活的处理。"><a href="#19-3-3-数据库的设计应该根据当前情况和需求做出灵活的处理。" class="headerlink" title="19.3.3 数据库的设计应该根据当前情况和需求做出灵活的处理。"></a>19.3.3 <strong>数据库的设计应该根据当前情况和需求做出灵活的处理。</strong></h3><p>在实际设计中，要整体遵循范式理论。</p>
<p>如果在某些特定的情况下还死死遵循范式也是不可取的，因为可能降低数据库的效率，此时可以适当增加冗余而提高性能。</p>
<h3 id="19-3-1-数据库的设计应该根据当前情况和需求做出灵活的处理。"><a href="#19-3-1-数据库的设计应该根据当前情况和需求做出灵活的处理。" class="headerlink" title="19.3.1 数据库的设计应该根据当前情况和需求做出灵活的处理。"></a>19.3.1 <strong>数据库的设计应该根据当前情况和需求做出灵活的处理。</strong></h3><p>在实际设计中，要整体遵循范式理论。</p>
<p>如果在某些特定的情况下还死死遵循范式也是不可取的，因为可能降低数据库的效率，此时可以适当增加冗余而提高性能。</p>
<h3 id="19-3-2-示例："><a href="#19-3-2-示例：" class="headerlink" title="19.3.2 示例："></a>19.3.2 <strong>示例：</strong></h3><p>比如经常购物车条目的中除了条目编号，商品编号，商品数量外，可以增加经常使用的商品名称，商品价格等</p>
<p>商品表</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282212585.jpg" alt="img"> </p>
<p>订单明细表</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282211398.jpg" alt="img"> </p>
<h1 id="1-设计一个商品入库审批的数据库"><a href="#1-设计一个商品入库审批的数据库" class="headerlink" title="1. 设计一个商品入库审批的数据库"></a>1. <strong>设计一个商品入库审批的数据库</strong></h1><p>对象 商品  </p>
<p> 仓库</p>
<p> 入库订单</p>
<p> 订单详情</p>
<p><img src="https://raw.githubusercontent.com/c4rich/imgs/main/imgs/202303282211301.jpg" alt="img"> </p>
<h1 id="1-设计一个商品购物车的数据库【作业】"><a href="#1-设计一个商品购物车的数据库【作业】" class="headerlink" title="1. 设计一个商品购物车的数据库【作业】"></a>1. 设计一个商品购物车的数据库【作业】</h1><p>商品表</p>
<p>商家表</p>
<p>用户表</p>
<p>订单表</p>
<p>订单明细</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://c4rich.github.io">c4rich</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://c4rich.github.io/2023/03/19/%E6%95%B0%E6%8D%AE%E5%BA%93/">https://c4rich.github.io/2023/03/19/%E6%95%B0%E6%8D%AE%E5%BA%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://c4rich.github.io" target="_blank">飘渺之旅</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/Javase/">Javase</a></div><div class="post_share"><div class="social-share" data-image="https://raw.iqiq.io/qihuancode/images/dev/img/202303192049109.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/19/%E5%BC%82%E5%B8%B8/" title="异常"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">异常</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/19/%E6%95%B0%E7%BB%84/" title="数组"><img class="cover" src="https://s2.loli.net/2023/04/03/GwbicE7fdTMRopa.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数组</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/03/19/XML%E5%92%8CJSON%E8%A7%A3%E6%9E%90/" title="XML和JSON解析"><img class="cover" src="https://s2.loli.net/2023/04/03/Pk4FQhxepWCGHDg.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">XML和JSON解析</div></div></a></div><div><a href="/2023/03/19/IO%E6%B5%81/" title="IO流"><img class="cover" src="https://raw.iqiq.io/qihuancode/images/dev/img/202303192049233.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">IO流</div></div></a></div><div><a href="/2023/03/19/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8CStream/" title="lambda表达式和Stream"><img class="cover" src="https://raw.iqiq.io/qihuancode/images/dev/img/202303192049635.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">lambda表达式和Stream</div></div></a></div><div><a href="/2023/03/19/%E5%88%9D%E8%AF%86Java/" title="初识Java"><img class="cover" src="https://s2.loli.net/2023/04/03/yqfQ3jmZizvG8Br.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">初识Java</div></div></a></div><div><a href="/2023/03/19/%E5%8F%8D%E5%B0%84%E5%92%8C%E6%B3%A8%E8%A7%A3/" title="反射和注解"><img class="cover" src="https://s2.loli.net/2023/04/03/zD5mS4klthUsbHf.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">反射和注解</div></div></a></div><div><a href="/2023/03/19/%E5%B8%B8%E7%94%A8%E7%B1%BB/" title="常用类"><img class="cover" src="https://s2.loli.net/2023/04/03/oU6G3ijz4mQTWSD.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">常用类</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">c4rich</div><div class="author-info__description">人生漫漫，身处何处不飘摇</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/c4rich"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/c4rich" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:75302@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">1，数据库的相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.</span> <span class="toc-text">1.1  数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88Database-DB%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">1.2  数据库（Database, DB）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88Database-Management-System-DBMS%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 数据库管理系统（Database Management System, DBMS）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%EF%BC%88DBAS%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 数据库应用程序（DBAS）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E5%91%98%EF%BC%88Database-Administrator-DBA%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">1.5 数据库管理员（Database Administrator, DBA）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E6%9C%80%E7%BB%88%E7%94%A8%E6%88%B7"><span class="toc-number">1.6.</span> <span class="toc-text">1.6 最终用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.7.</span> <span class="toc-text">1.7 数据库系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8F%91%E5%B1%95%E9%98%B6%E6%AE%B5"><span class="toc-number">1.8.</span> <span class="toc-text">1.8 数据库的发展阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-NOSQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.9.</span> <span class="toc-text">1.9 NOSQL数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-10-%E5%B8%82%E5%9C%BA%E4%B8%8A%E6%B5%81%E8%A1%8C%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.10.</span> <span class="toc-text">1.10 市场上流行的关系型数据库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">2 ，数据库的相关操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%90%AF%E5%8A%A8-%E5%81%9C%E6%AD%A2"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 启动|停止</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%96%B9%E5%BC%8F1%E3%80%91"><span class="toc-number">2.1.1.</span> <span class="toc-text">【方式1】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%96%B9%E5%BC%8F2%E3%80%91"><span class="toc-number">2.1.2.</span> <span class="toc-text">【方式2】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E4%BD%BF%E7%94%A8root%E8%B4%A6%E6%88%B7%E7%99%BB%E9%99%86"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 使用root账户登陆</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 显示所有数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E9%BB%98%E8%AE%A4%E7%9A%84%E5%87%A0%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%B4%E6%98%8E"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 默认的几个数据库说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-information-schema"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.4.1 information_schema</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-mysql"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.4.2 mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-performance-schema"><span class="toc-number">2.4.3.</span> <span class="toc-text">2.4.3 performance_schema</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-sys"><span class="toc-number">2.4.4.</span> <span class="toc-text">2.4.4 sys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-5-%E9%87%8D%E8%A6%81%E8%AF%B4%E6%98%8E"><span class="toc-number">2.4.5.</span> <span class="toc-text">2.4.5 重要说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E4%BD%BF%E7%94%A8%E6%9F%90%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 使用某一个数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 修改密码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">2.7.</span> <span class="toc-text">2.7 创建用户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-1-%E5%91%BD%E4%BB%A4"><span class="toc-number">2.7.1.</span> <span class="toc-text">2.7.1 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-2-%E8%AF%B4%E6%98%8E"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.7.2 说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-3-%E4%BE%8B%E5%AD%90"><span class="toc-number">2.7.3.</span> <span class="toc-text">2.7.3 例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E7%BB%99%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83"><span class="toc-number">2.8.</span> <span class="toc-text">2.8 给用户授权</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-1-%E5%91%BD%E4%BB%A4"><span class="toc-number">2.8.1.</span> <span class="toc-text">2.8.1 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-2-%E8%AF%B4%E6%98%8E"><span class="toc-number">2.8.2.</span> <span class="toc-text">2.8.2 说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-3-%E4%BE%8B%E5%AD%90"><span class="toc-number">2.8.3.</span> <span class="toc-text">2.8.3 例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-4-%E6%B3%A8%E6%84%8F"><span class="toc-number">2.8.4.</span> <span class="toc-text">2.8.4 注意</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-5-%E4%BD%9C%E7%94%A8"><span class="toc-number">2.8.5.</span> <span class="toc-text">2.8.5 作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-9-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.9.</span> <span class="toc-text">2.9 创建一个数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-10-%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.10.</span> <span class="toc-text">2.10 删除一个数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-11-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E9%BB%98%E8%AE%A4%E7%BC%96%E7%A0%81"><span class="toc-number">2.11.</span> <span class="toc-text">2.11 修改数据库默认编码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%BB%80%E4%B9%88%E6%98%AFSQL"><span class="toc-number">3.</span> <span class="toc-text">3. 什么是SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1DDL-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80"><span class="toc-number">3.1.</span> <span class="toc-text">3.1DDL 数据定义语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-DML-%E6%95%B0%E6%8D%AE%E6%93%8D%E7%BA%B5%E8%AF%AD%E8%A8%80"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 DML 数据操纵语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-DQL-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 DQL 数据查询语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-DQL%E5%85%B3%E9%94%AE%E5%AD%97-select"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 DQL关键字 select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-DCL-%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 DCL 数据控制语言</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.</span> <span class="toc-text">4. MySQL数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B%E2%80%94java-Integer-Long"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 整数类型—java[Integer Long]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%B0%8F%E6%95%B0%E7%B1%BB%E5%9E%8B%E2%80%94java-float-double"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 小数类型—java[float  double]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%AE%9A%E7%82%B9%E6%95%B0%E2%80%94-java-BigDecimal"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 定点数—-java[BigDecimal]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%AD%97%E7%AC%A6%E4%B8%B2-%E2%80%94java-String"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 字符串 —java[String]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B-java-Date-LocalDate-Timestemp"><span class="toc-number">4.5.</span> <span class="toc-text">4.5 日期时间类型[java Date LocalDate Timestemp]</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-Logic%E7%B1%BB%E5%9E%8B%E3%80%90%E4%BA%86%E8%A7%A3%E3%80%91"><span class="toc-number">4.6.</span> <span class="toc-text">4.6 Logic类型【了解】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">4.7.</span> <span class="toc-text">4.7 数据类型的属性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-MySQL%E8%A1%A8%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9CDDL%7F"><span class="toc-number">5.</span> <span class="toc-text">5.MySQL表的相关操作DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 创建表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-%E8%AF%AD%E6%B3%95"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2%EF%BC%8C%E5%AE%9E%E4%BE%8B%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AD%A6%E7%94%9F%E8%A1%A8tb-student"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2，实例创建一个学生表tb_student</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-3-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AD%A6%E7%94%9F%E8%A1%A8tb-student%E5%B9%B6%E6%8C%87%E5%AE%9A%E7%BC%96%E7%A0%81%E5%92%8C%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">5.1.3.</span> <span class="toc-text">5.1.3,创建一个学生表tb_student并指定编码和存储引擎</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 数据存储的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 查看表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 修改表结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%90%91student%E8%A1%A8%E6%96%B0%E5%A2%9E%E5%8A%A0%E4%B8%80%E5%88%97stu-height%E5%AD%A6%E7%94%9F%E8%BA%AB%E9%AB%98"><span class="toc-number">5.4.1.</span> <span class="toc-text">5.4.1,向student表新增加一列stu_height学生身高</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%88%A0%E9%99%A4student%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%AD%A6%E7%94%9F%E8%BA%AB%E9%AB%98"><span class="toc-number">5.4.2.</span> <span class="toc-text">5.4.1,删除student表中的学生身高</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E4%BE%8B%E5%A6%82%E4%BF%AE%E6%94%B9stu-sex-%E4%B8%BA-student-sex-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BF%AE%E6%94%B9%E4%B8%BA-varchar-30"><span class="toc-number">5.4.3.</span> <span class="toc-text">5.4.1,例如修改stu_sex 为 student_sex 数据类型修改为 varchar(30)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E5%B0%86%E5%AD%A6%E7%94%9F%E6%80%A7%E5%88%AB%E4%BF%AE%E6%94%B9%E4%B8%BAint%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.4.4.</span> <span class="toc-text">5.4.1,将学生性别修改为int类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 删除表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E7%9B%B4%E6%8E%A5%E5%88%A0%E9%99%A4"><span class="toc-number">5.5.1.</span> <span class="toc-text">1.1.1 直接删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E5%88%A0%E9%99%A4%E4%B9%8B%E5%89%8D%E5%85%88%E5%88%A4%E6%96%AD%E8%A1%A8%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">5.5.2.</span> <span class="toc-text">1.1.2 删除之前先判断表是否存在</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E5%BA%93%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%A8"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 显示当前库的所有表</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6%EF%BC%8CMySQL%E8%A1%A8%E9%87%8C%E9%9D%A2%E6%95%B0%E6%8D%AE%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9CDML"><span class="toc-number">6.</span> <span class="toc-text">6，MySQL表里面数据的相关操作DML</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1%EF%BC%8C%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">6.1.</span> <span class="toc-text">6.1，添加数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1%EF%BC%8C%E4%B8%80%E6%9D%A1%E4%B8%80%E6%9D%A1%E7%9A%84%E6%B7%BB%E5%8A%A0"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1，一条一条的添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2%EF%BC%8C%E4%B8%80%E7%BB%84%E4%B8%80%E7%BB%84%E7%9A%84%E5%8A%A0"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2，一组一组的加</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2%EF%BC%8C%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">6.2.</span> <span class="toc-text">6.2，修改数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1%EF%BC%8C%E4%B8%80%E6%9D%A1%E4%B8%80%E6%9D%A1%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1，一条一条的修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2%EF%BC%8C%E4%B8%80%E7%BB%84%E4%B8%80%E7%BB%84%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">6.2.2.</span> <span class="toc-text">6.2.2，一组一组的修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3%EF%BC%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.</span> <span class="toc-text">6.3，删除数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1%EF%BC%8C%E4%B8%80%E6%9D%A1%E4%B8%80%E6%9D%A1%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">6.3.1.</span> <span class="toc-text">6.3.1，一条一条的修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2%EF%BC%8C%E4%B8%80%E7%BB%84%E4%B8%80%E7%BB%84%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">6.3.2.</span> <span class="toc-text">6.3.2，一组一组的修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-3%EF%BC%8Ctruncate%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">6.4.</span> <span class="toc-text">6.3.3，truncate关键字</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">7.</span> <span class="toc-text">7. 数据完整性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 主键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%B9%E6%B3%95-%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0"><span class="toc-number">7.1.1.</span> <span class="toc-text">添加方法[创建表时添加]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%9A%84%E8%87%AA%E5%8A%A8%E5%A2%9E%E9%95%BF"><span class="toc-number">7.1.2.</span> <span class="toc-text">主键的自动增长</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 非空约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 唯一约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 默认约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">7.5.</span> <span class="toc-text">7.5 外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%A4%96%E9%94%AE%E5%AE%9A%E4%B9%89%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">7.5.0.1.</span> <span class="toc-text">1. 外键定义的语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BA%A7%E8%81%94%E6%9B%B4%E6%96%B0%E5%92%8C%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4"><span class="toc-number">7.5.0.2.</span> <span class="toc-text">2. 级联更新和级联删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E6%A1%88%E4%BE%8B"><span class="toc-number">7.5.0.3.</span> <span class="toc-text">3. 外键约束案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E5%AD%97%E6%AE%B5%E5%80%BC"><span class="toc-number">7.5.0.3.1.</span> <span class="toc-text">3.1 外键约束字段值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-%E5%A4%96%E9%94%AE%E7%BA%A7%E8%81%94%E6%9B%B4%E6%96%B0"><span class="toc-number">7.5.0.3.2.</span> <span class="toc-text">3.2 外键级联更新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-%E5%A4%96%E9%94%AE%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4"><span class="toc-number">7.5.0.3.3.</span> <span class="toc-text">3.3 外键级联删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE"><span class="toc-number">7.5.0.3.4.</span> <span class="toc-text">3.4 删除外键</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-%E5%88%9B%E5%BB%BA%E5%A4%96%E9%94%AE"><span class="toc-number">7.5.0.3.5.</span> <span class="toc-text">3.5 创建外键</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%9D%A1%E4%BB%B6%E5%92%8C%E9%99%90%E5%88%B6"><span class="toc-number">7.5.0.4.</span> <span class="toc-text">4. 外键约束的条件和限制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6-%E7%BA%A6%E6%9D%9F%E5%85%B3%E9%94%AE%E5%AD%97%E6%80%BB%E7%BB%93"><span class="toc-number">7.6.</span> <span class="toc-text">7.6 约束关键字总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">8.</span> <span class="toc-text">8. 表关系</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E4%B8%80%E5%AF%B9%E4%B8%80%EF%BC%88one-to-one%EF%BC%89%E3%80%90%E4%BA%86%E8%A7%A3%E3%80%91"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 一对一（one-to-one）【了解】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E4%B8%80%E5%AF%B9%E5%A4%9A-x2F-%E5%A4%9A%E5%AF%B9%E4%B8%80%EF%BC%88many-to-one%EF%BC%89%E3%80%90%E6%8E%8C%E6%8F%A1%E3%80%91"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 一对多&#x2F;多对一（many-to-one）【掌握】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E5%A4%9A%E5%AF%B9%E5%A4%9A%EF%BC%88many-to-many%EF%BC%89%E3%80%90%E6%8E%8C%E6%8F%A1%E3%80%91"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 多对多（many-to-many）【掌握】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-%E5%91%98%E5%B7%A5%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 员工系统设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-%E8%A6%81%E6%B1%82"><span class="toc-number">8.4.1.</span> <span class="toc-text">8.4.1 要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-2-%E9%83%A8%E9%97%A8%E8%A1%A8%EF%BC%88dept%EF%BC%89"><span class="toc-number">8.4.2.</span> <span class="toc-text">8.4.2 部门表（dept）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-3-%E5%91%98%E5%B7%A5%E8%A1%A8%EF%BC%88emp%EF%BC%89"><span class="toc-number">8.4.3.</span> <span class="toc-text">8.4.3 员工表（emp）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-4-%E5%B7%A5%E8%B5%84%E7%AD%89%E7%BA%A7%E8%A1%A8%EF%BC%88salgrade%EF%BC%89"><span class="toc-number">8.4.4.</span> <span class="toc-text">8.4.4 工资等级表（salgrade）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-5-%E8%84%9A%E6%9C%AC"><span class="toc-number">8.4.5.</span> <span class="toc-text">8.4.5 脚本</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9%EF%BC%8C%E5%8D%95%E8%A1%A8%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2"><span class="toc-number">9.</span> <span class="toc-text">9，单表数据查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sql%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%B3%A8%E9%87%8A"><span class="toc-number">9.0.1.</span> <span class="toc-text">sql语句的注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 最简单的查询方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E4%BD%BF%E7%94%A8%E7%AE%97%E6%9C%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 使用算术表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E4%BD%BF%E7%94%A8%E5%AD%97%E6%AE%B5%E5%88%AB%E5%90%8D"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 使用字段别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E5%8E%BB%E9%87%8D%E6%9F%A5%E8%AF%A2DISTINCT"><span class="toc-number">9.4.</span> <span class="toc-text">9.4 去重查询DISTINCT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5-%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2-ORDER-BY"><span class="toc-number">9.5.</span> <span class="toc-text">9.5 排序查询 ORDER BY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-6-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2LIMIT"><span class="toc-number">9.6.</span> <span class="toc-text">9.6 分页查询LIMIT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-7-%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2-UNION"><span class="toc-number">9.7.</span> <span class="toc-text">9.7 **合并查询 **UNION</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10%EF%BC%8CWHERE%E5%AD%90%E5%8F%A5"><span class="toc-number">10.</span> <span class="toc-text">10，WHERE子句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E7%94%A8%E6%B3%95%E4%B8%BE%E4%BE%8B"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 用法举例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E4%B8%AD%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 查询条件中可以使用比较运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-%E4%BD%BF%E7%94%A8LIKE%E8%BF%90%E7%AE%97%E7%AC%A6%E6%89%A7%E8%A1%8C%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%EF%BC%88%E9%80%9A%E9%85%8D%E6%9F%A5%E8%AF%A2%EF%BC%89"><span class="toc-number">10.3.</span> <span class="toc-text">10.3 使用LIKE运算符执行模糊查询（通配查询）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-%E4%BD%BF%E7%94%A8IS-NULL%E8%BF%90%E7%AE%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E7%A9%BA%E5%80%BC%E5%88%A4%E6%96%AD"><span class="toc-number">10.4.</span> <span class="toc-text">10.4 使用IS NULL运算符进行空值判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-5-%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E4%B8%AD%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">10.5.</span> <span class="toc-text">10.5 查询条件中可以使用逻辑运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98"><span class="toc-number">10.5.1.</span> <span class="toc-text">SQL优化问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-6-%E5%9B%9B%E7%A7%8D%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7%EF%BC%9A%E7%AE%97%E6%9C%AF-gt-%E8%BF%9E%E6%8E%A5-gt-%E6%AF%94%E8%BE%83-gt-%E9%80%BB%E8%BE%91"><span class="toc-number">10.6.</span> <span class="toc-text">10.6 四种运算符优先级：算术&gt;连接&gt;比较&gt;逻辑</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">11.</span> <span class="toc-text">11 聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 函数的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-1-%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">11.1.1.</span> <span class="toc-text">11.1.1 单行函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-2-%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">11.1.2.</span> <span class="toc-text">11.1.2 多行函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 单行函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.1.</span> <span class="toc-text">11.2.1 数学函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.2.</span> <span class="toc-text">11.2.1 字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.3.</span> <span class="toc-text">11.2.1 日期和时间函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-if%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.4.</span> <span class="toc-text">11.2.1 if条件判断函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.5.</span> <span class="toc-text">11.2.1 系统函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0"><span class="toc-number">11.2.6.</span> <span class="toc-text">11.2.1 加密函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">11.3.</span> <span class="toc-text">11.3 多行函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-1%EF%BC%8C%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">11.3.1.</span> <span class="toc-text">11.3.1，多行函数的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-2%EF%BC%8C%E5%B8%B8%E7%94%A8%E7%9A%84%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">11.3.2.</span> <span class="toc-text">11.3.2，常用的多行函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-3%EF%BC%8C%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0%E5%92%8C%E7%A9%BA%E5%80%BC%E5%8F%8Acount%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="toc-number">11.3.3.</span> <span class="toc-text">11.3.3，多行函数和空值及count的说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-4%EF%BC%8CGROUP-BY-%E5%AD%90%E5%8F%A5%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">11.3.4.</span> <span class="toc-text">11.3.4，GROUP BY 子句的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-5%EF%BC%8CHAVEING%E5%AD%90%E5%8F%A5%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">11.3.5.</span> <span class="toc-text">11.3.5，HAVEING子句的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%83%E4%B9%A0"><span class="toc-number">11.3.6.</span> <span class="toc-text">小练习</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12%EF%BC%8C%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%88SQL92%EF%BC%89"><span class="toc-number">12.</span> <span class="toc-text">12，连接查询（SQL92）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 为什么要连接查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">12.2.</span> <span class="toc-text">12.2 连接查询概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E8%AF%AD%E6%B3%95"><span class="toc-number">12.3.</span> <span class="toc-text">12.3 连接查询语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-1-%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99"><span class="toc-number">12.3.1.</span> <span class="toc-text">12.3.1 语法规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-2-%E7%89%B9%E7%82%B9"><span class="toc-number">12.3.2.</span> <span class="toc-text">12.3.2 特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-3-%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">12.3.3.</span> <span class="toc-text">12.3.3 连接的类型：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4-%E7%AC%9B%E5%8D%A1%E5%B0%94%E9%9B%86"><span class="toc-number">12.4.</span> <span class="toc-text">12.4 笛卡尔集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-5-%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">12.5.</span> <span class="toc-text">12.5 等值连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%B3%A8%E6%84%8F%E7%82%B9%E3%80%91"><span class="toc-number">12.5.1.</span> <span class="toc-text">【注意点】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-6-%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">12.6.</span> <span class="toc-text">12.6 非等值连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-7-%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">12.7.</span> <span class="toc-text">12.7 自连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-8-%E4%B8%89%E8%A1%A8%E8%BF%9E%E6%9F%A5"><span class="toc-number">12.8.</span> <span class="toc-text">12.8 三表连查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">12.9.</span> <span class="toc-text">[开发中的注意点]</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13%EF%BC%8C%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%88SQL99%EF%BC%89"><span class="toc-number">13.</span> <span class="toc-text">13，连接查询（SQL99）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-SQL99%E8%AF%AD%E6%B3%95%E6%A6%82%E8%BF%B0"><span class="toc-number">13.1.</span> <span class="toc-text">1.1 SQL99语法概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E8%AF%AD%E6%B3%95"><span class="toc-number">13.2.</span> <span class="toc-text">13.2 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="toc-number">13.3.</span> <span class="toc-text">13.3 交叉连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5"><span class="toc-number">13.4.</span> <span class="toc-text">13.4 自然连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-5-Using%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">13.5.</span> <span class="toc-text">13.5 Using关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-6-On%E5%AD%90%E5%8F%A5"><span class="toc-number">13.6.</span> <span class="toc-text">13.6 On子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-7-%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">13.7.</span> <span class="toc-text">13.7 外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-7-1-%E5%B7%A6%E5%A4%96%E8%81%94%E6%8E%A5"><span class="toc-number">13.7.1.</span> <span class="toc-text">13.7.1 左外联接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-7-2-%E5%8F%B3%E5%A4%96%E8%81%94%E6%8E%A5"><span class="toc-number">13.7.2.</span> <span class="toc-text">13.7.2 右外联接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-7-3-%E6%BB%A1%E5%A4%96%E8%81%94%E6%8E%A5"><span class="toc-number">13.7.3.</span> <span class="toc-text">13.7.3 满外联接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-7-4-%E5%A4%96%E8%BF%9E%E6%8E%A5%E4%B8%BE%E4%BE%8B"><span class="toc-number">13.7.4.</span> <span class="toc-text">13.7.4 外连接举例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#14-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">14.</span> <span class="toc-text">14. 子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#14-1-%E9%97%AE%E9%A2%98%E5%BC%95%E5%85%A5"><span class="toc-number">14.1.</span> <span class="toc-text">14.1 问题引入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-2-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span class="toc-number">14.2.</span> <span class="toc-text">14.2 语法格式：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-3-%E7%89%B9%E7%82%B9"><span class="toc-number">14.3.</span> <span class="toc-text">14.3 特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-4-%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">14.4.</span> <span class="toc-text">14.4 单行子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-5-%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">14.5.</span> <span class="toc-text">14.5 多行子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-6-%E7%BB%83%E4%B9%A0"><span class="toc-number">14.6.</span> <span class="toc-text">14.6 练习</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#15%EF%BC%8C%E8%A7%86%E5%9B%BE"><span class="toc-number">15.</span> <span class="toc-text">15，视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#15-1-%E8%A7%86%E5%9B%BE%E7%9A%84%E5%AE%9A%E4%B9%89%E5%8F%8A%E4%BD%9C%E7%94%A8"><span class="toc-number">15.1.</span> <span class="toc-text">15.1 视图的定义及作用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-1-%E5%AE%9A%E4%B9%89"><span class="toc-number">15.1.1.</span> <span class="toc-text">15.1.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-2-%E4%BD%9C%E7%94%A8"><span class="toc-number">15.1.2.</span> <span class="toc-text">15.1.2 作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-2-%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-number">15.2.</span> <span class="toc-text">15.2 视图的创建和删除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-1-%E5%88%9B%E5%BB%BA%E6%88%96%E4%BF%AE%E6%94%B9%E5%8D%95%E8%A1%A8%E8%A7%86%E5%9B%BE"><span class="toc-number">15.2.1.</span> <span class="toc-text">15.2.1 创建或修改单表视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-2-%E8%A7%86%E5%9B%BE%E7%9A%84%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E3%80%90%E4%BA%86%E8%A7%A3%E3%80%91"><span class="toc-number">15.2.2.</span> <span class="toc-text">15.2.2 视图的添加数据【了解】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-3-%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-number">15.2.3.</span> <span class="toc-text">15.2.3 视图的删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-3-%E7%BB%9F%E8%AE%A1%E8%A7%86%E5%9B%BE"><span class="toc-number">15.3.</span> <span class="toc-text">15.3 统计视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-4-%E5%9F%BA%E4%BA%8E%E5%85%B6%E5%AE%83%E8%A7%86%E5%9B%BE%E7%9A%84%E8%A7%86%E5%9B%BE"><span class="toc-number">15.4.</span> <span class="toc-text">15.4 基于其它视图的视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-5-%E8%A7%86%E5%9B%BE%E7%9A%84%E6%80%BB%E7%BB%93"><span class="toc-number">15.5.</span> <span class="toc-text">15.5 视图的总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#16-MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">16.</span> <span class="toc-text">16. MySQL存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1-InnoDB-%E5%BC%95%E6%93%8E-MySQL5-5%E4%BB%A5%E5%90%8E%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8"><span class="toc-number">16.1.</span> <span class="toc-text">16.1, InnoDB 引擎(MySQL5.5以后默认使用)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-2-MyISAM%E5%BC%95%E6%93%8E"><span class="toc-number">16.2.</span> <span class="toc-text">16.2 MyISAM引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-3-%E4%B8%A4%E7%A7%8D%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E7%9A%84%E5%A4%A7%E8%87%B4%E5%8C%BA%E5%88%AB%E8%A1%A8%E7%8E%B0%E5%9C%A8%EF%BC%9A"><span class="toc-number">16.3.</span> <span class="toc-text">16.3 两种存储引擎的大致区别表现在：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-4-%E6%80%BB%E7%BB%93"><span class="toc-number">16.4.</span> <span class="toc-text">16.4 总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-5%EF%BC%8C%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE"><span class="toc-number">16.5.</span> <span class="toc-text">16.5，相关设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-5-1%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE"><span class="toc-number">16.5.1.</span> <span class="toc-text">16.5.1，创建表时设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-5-2%EF%BC%8C%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">16.5.2.</span> <span class="toc-text">16.5.2，设置默认的存储引擎</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#17-%E4%BA%8B%E5%8A%A1-mysql"><span class="toc-number">17.</span> <span class="toc-text">17.事务[mysql]</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#17-1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="toc-number">17.1.</span> <span class="toc-text">17.1 什么是事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-2-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">17.2.</span> <span class="toc-text">17.2 事务的基本操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-3-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E5%BE%81"><span class="toc-number">17.3.</span> <span class="toc-text">17.3 事务的四大特征</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-4-%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%8F%90%E4%BA%A4%E6%96%B9%E5%BC%8F"><span class="toc-number">17.4.</span> <span class="toc-text">17.4 事务的提交方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-5-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">17.5.</span> <span class="toc-text">17.5 事务的基本操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-6-%E8%BD%AC%E8%B4%A6%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">17.6.</span> <span class="toc-text">17.6 转账的操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-7-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">17.7.</span> <span class="toc-text">17.7 事务隔离级别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-1-ISO%E5%AE%9A%E4%B9%89%E7%9A%84%E5%9B%9B%E5%A4%A7%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">17.7.1.</span> <span class="toc-text">17.7.1 ISO定义的四大隔离级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-2-%E5%B9%B6%E5%8F%91%E4%B8%8B%E7%9A%84%E8%84%8F%E8%AF%BB%EF%BC%8C%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%EF%BC%8C%E5%B9%BB%E8%AF%BB%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">17.7.2.</span> <span class="toc-text">17.7.2 并发下的脏读，不可重复读，幻读的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#17-7-2-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%84%8F%E8%AF%BB"><span class="toc-number">17.7.2.1.</span> <span class="toc-text">17.7.2.1 什么是脏读</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-7-2-%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E9%97%AE%E9%A2%98"><span class="toc-number">17.7.2.2.</span> <span class="toc-text">17.7.2. 不可重复读问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-7-2-3%E5%B9%BB%E8%AF%BB%E9%97%AE%E9%A2%98"><span class="toc-number">17.7.2.3.</span> <span class="toc-text">17.7.2.3幻读问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-3-%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E7%9A%84%E8%AE%BE%E7%BD%AE%E6%9F%A5%E8%AF%A2"><span class="toc-number">17.7.3.</span> <span class="toc-text">17.7.3 事务隔离级别的设置查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-4-read-uncommitted%E8%84%8F%E8%AF%BB%E6%B5%8B%E8%AF%95"><span class="toc-number">17.7.4.</span> <span class="toc-text">17.7.4,read uncommitted脏读测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-5-read-committed%E8%A7%A3%E5%86%B3%E8%84%8F%E8%AF%BB"><span class="toc-number">17.7.5.</span> <span class="toc-text">17.7.5,read committed解决脏读</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-6-repeatable-read%E8%A7%A3%E5%86%B3%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E9%97%AE%E9%A2%98"><span class="toc-number">17.7.6.</span> <span class="toc-text">17.7.6,repeatable read解决不可重复读问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-7-%E4%B8%B2%E8%A1%8C%E5%8C%96serializable%E6%B5%8B%E8%AF%95"><span class="toc-number">17.7.7.</span> <span class="toc-text">17.7.7 串行化serializable测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#18%EF%BC%8C-%E7%B4%A2%E5%BC%95"><span class="toc-number">18.</span> <span class="toc-text">18， 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#18-1%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95"><span class="toc-number">18.1.</span> <span class="toc-text">18.1，什么是索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-2%EF%BC%8C%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">18.2.</span> <span class="toc-text">18.2，准备工作创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-3-%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span class="toc-number">18.3.</span> <span class="toc-text">18.3 索引分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-1-%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95"><span class="toc-number">18.3.1.</span> <span class="toc-text">18.3.1 普通索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#18-3-1-1-%E4%B8%BAperson%E8%A1%A8%E7%9A%84pname%E5%88%97%E5%BB%BA%E7%AB%8B%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95"><span class="toc-number">18.3.1.1.</span> <span class="toc-text">18.3.1.1 为person表的pname列建立普通索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-3-1-2-%E4%B8%80%E4%B8%AA%E8%A1%A8%E7%9A%84%E4%B8%BB%E9%94%AE%E7%94%9F%E6%88%90%E4%B9%8B%E5%90%8E%E4%BC%9A%E9%BB%98%E8%AE%A4%E6%9C%89%E4%B8%80%E4%B8%AA%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95"><span class="toc-number">18.3.1.2.</span> <span class="toc-text">18.3.1.2 一个表的主键生成之后会默认有一个主键索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-3-1-3-where-pname-like-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E7%94%A8%E5%88%B0%E7%B4%A2%E5%BC%95%E6%B2%A1%E6%9C%89"><span class="toc-number">18.3.1.3.</span> <span class="toc-text">18.3.1.3 where pname like 模糊查询用到索引没有</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-2-%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95"><span class="toc-number">18.3.2.</span> <span class="toc-text">18.3.2 普通索引的压力测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%90%E5%88%A0%E9%99%A4%E4%B9%8B%E5%89%8D%E7%B4%A2%E5%BC%95%E3%80%91"><span class="toc-number">18.3.2.1.</span> <span class="toc-text">【删除之前索引】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%90%E6%95%B0%E6%8D%AE%E6%9F%A5%E7%9C%8B%E3%80%91"><span class="toc-number">18.3.2.2.</span> <span class="toc-text">【数据查看】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%90%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%91"><span class="toc-number">18.3.2.3.</span> <span class="toc-text">【创建一个生成随机字符串的函数】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%90%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E3%80%91"><span class="toc-number">18.3.2.4.</span> <span class="toc-text">【创建一个存储过程生成数据】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%90%E5%86%8D%E6%AC%A1%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E3%80%91"><span class="toc-number">18.3.2.5.</span> <span class="toc-text">【再次查看数据文件】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%90%E7%BB%99PNAME%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E3%80%91"><span class="toc-number">18.3.2.6.</span> <span class="toc-text">【给PNAME创建索引】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E3%80%90%E6%9F%A5%E8%AF%A2%E7%9A%84%E8%AF%B4%E6%98%8E%E3%80%91"><span class="toc-number">18.3.2.7.</span> <span class="toc-text">【查询的说明】</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-2-%E7%BB%84%E5%90%88%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">18.3.3.</span> <span class="toc-text">18.3.2 组合索引的创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-4-PERSON%E8%A1%A8%E7%9A%84PSEX%E5%88%97%E5%8F%AA%E6%9C%892%E4%B8%AA%E6%9C%89%E6%95%88%E5%80%BC%EF%BC%8C%E4%B8%BA%E8%AF%A5%E5%88%97%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95%E4%BC%9A%E6%8F%90%E9%AB%98%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E5%90%97"><span class="toc-number">18.3.4.</span> <span class="toc-text">18.3.4 PERSON表的PSEX列只有2个有效值，为该列建立索引会提高查询效率吗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-5%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">18.3.5.</span> <span class="toc-text">18.3.5唯一索引的创建</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%91"><span class="toc-number">18.4.</span> <span class="toc-text">【面试题】</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#19%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">19.</span> <span class="toc-text">19，数据库设计原则</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#19-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E8%BD%AF%E4%BB%B6"><span class="toc-number">19.1.</span> <span class="toc-text">19.1 数据库设置软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-2-%E5%BC%95%E5%85%A5%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-number">19.2.</span> <span class="toc-text">19.2 引入三大范式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-1-%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="toc-number">19.2.1.</span> <span class="toc-text">19.2.1 第一范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-2-%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F%E3%80%90%E5%A4%9A%E5%AF%B9%E5%A4%9A%E3%80%91"><span class="toc-number">19.2.2.</span> <span class="toc-text">19.2.2 第二范式【多对多】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-3-%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F%E3%80%90%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%92%8C%E5%A4%9A%E5%AF%B9%E4%B8%80%E3%80%91"><span class="toc-number">19.2.3.</span> <span class="toc-text">19.2.3 第三范式【一对多和多对一】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-3-%E8%8C%83%E5%BC%8F%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">19.3.</span> <span class="toc-text">19.3  范式的优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-1-%E4%BC%98%E7%82%B9"><span class="toc-number">19.3.1.</span> <span class="toc-text">19.3.1 优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-2-%E7%BC%BA%E7%82%B9"><span class="toc-number">19.3.2.</span> <span class="toc-text">19.3.2 缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-3-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%BA%94%E8%AF%A5%E6%A0%B9%E6%8D%AE%E5%BD%93%E5%89%8D%E6%83%85%E5%86%B5%E5%92%8C%E9%9C%80%E6%B1%82%E5%81%9A%E5%87%BA%E7%81%B5%E6%B4%BB%E7%9A%84%E5%A4%84%E7%90%86%E3%80%82"><span class="toc-number">19.3.3.</span> <span class="toc-text">19.3.3 数据库的设计应该根据当前情况和需求做出灵活的处理。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%BA%94%E8%AF%A5%E6%A0%B9%E6%8D%AE%E5%BD%93%E5%89%8D%E6%83%85%E5%86%B5%E5%92%8C%E9%9C%80%E6%B1%82%E5%81%9A%E5%87%BA%E7%81%B5%E6%B4%BB%E7%9A%84%E5%A4%84%E7%90%86%E3%80%82"><span class="toc-number">19.3.4.</span> <span class="toc-text">19.3.1 数据库的设计应该根据当前情况和需求做出灵活的处理。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-2-%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-number">19.3.5.</span> <span class="toc-text">19.3.2 示例：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E5%95%86%E5%93%81%E5%85%A5%E5%BA%93%E5%AE%A1%E6%89%B9%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">20.</span> <span class="toc-text">1. 设计一个商品入库审批的数据库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E5%95%86%E5%93%81%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%90%E4%BD%9C%E4%B8%9A%E3%80%91"><span class="toc-number">21.</span> <span class="toc-text">1. 设计一个商品购物车的数据库【作业】</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E8%BF%90%E7%AE%97%E7%AC%A6/" title="数据类型和运算符"><img src="https://raw.iqiq.io/qihuancode/images/dev/img/202303192032940.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据类型和运算符"/></a><div class="content"><a class="title" href="/2023/03/19/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E8%BF%90%E7%AE%97%E7%AC%A6/" title="数据类型和运算符">数据类型和运算符</a><time datetime="2023-03-19T15:33:03.000Z" title="发表于 2023-03-19 23:33:03">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/XML%E5%92%8CJSON%E8%A7%A3%E6%9E%90/" title="XML和JSON解析"><img src="https://s2.loli.net/2023/04/03/Pk4FQhxepWCGHDg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XML和JSON解析"/></a><div class="content"><a class="title" href="/2023/03/19/XML%E5%92%8CJSON%E8%A7%A3%E6%9E%90/" title="XML和JSON解析">XML和JSON解析</a><time datetime="2023-03-19T15:12:40.000Z" title="发表于 2023-03-19 23:12:40">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/IO%E6%B5%81/" title="IO流"><img src="https://raw.iqiq.io/qihuancode/images/dev/img/202303192049233.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IO流"/></a><div class="content"><a class="title" href="/2023/03/19/IO%E6%B5%81/" title="IO流">IO流</a><time datetime="2023-03-19T15:12:40.000Z" title="发表于 2023-03-19 23:12:40">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8CStream/" title="lambda表达式和Stream"><img src="https://raw.iqiq.io/qihuancode/images/dev/img/202303192049635.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="lambda表达式和Stream"/></a><div class="content"><a class="title" href="/2023/03/19/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8CStream/" title="lambda表达式和Stream">lambda表达式和Stream</a><time datetime="2023-03-19T15:12:40.000Z" title="发表于 2023-03-19 23:12:40">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/%E5%88%9D%E8%AF%86Java/" title="初识Java"><img src="https://s2.loli.net/2023/04/03/yqfQ3jmZizvG8Br.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="初识Java"/></a><div class="content"><a class="title" href="/2023/03/19/%E5%88%9D%E8%AF%86Java/" title="初识Java">初识Java</a><time datetime="2023-03-19T15:12:40.000Z" title="发表于 2023-03-19 23:12:40">2023-03-19</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://raw.iqiq.io/qihuancode/images/dev/img/202303192049109.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2023 By c4rich</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎来到我的<a target="_blank" rel="noopener" href="https://butterfly.js.org/">博客</a>一同学习，一起进步！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://c4rich.github.io/2023/03/19/%E6%95%B0%E6%8D%AE%E5%BA%93/'
    this.page.identifier = '/2023/03/19/%E6%95%B0%E6%8D%AE%E5%BA%93/'
    this.page.title = '数据库'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }

  document.getElementById('darkmode').addEventListener('click', () => {
    setTimeout(() => window.disqusReset(), 200)
  })
}

if ('Valine' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.9" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>